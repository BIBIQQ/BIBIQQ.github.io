<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     ONE PEAC
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/css/style.css">

  
<script src="/js/pace.min.js"></script>


  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/BIBIQQ/BIBIQQ.github.io"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">ONE PEAC</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
        <img
          src="/images/ayer.svg"
          class="cover-logo"
          alt="ONE PEAC"
        />
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-day02_注解开发" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/11/07/day02_%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/"
    >Spring注解开发</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/11/07/day02_%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/" class="article-date">
  <time datetime="2021-11-07T13:16:19.000Z" itemprop="datePublished">2021-11-07</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="Spring-注解开发"><a href="#Spring-注解开发" class="headerlink" title="Spring 注解开发"></a>Spring 注解开发</h3><h4 id="1-数据源对象管理"><a href="#1-数据源对象管理" class="headerlink" title="1.数据源对象管理"></a>1.数据源对象管理</h4><h5 id="1-1-管理第三方资源–druid"><a href="#1-1-管理第三方资源–druid" class="headerlink" title="1.1 管理第三方资源–druid"></a>1.1 管理第三方资源–druid</h5><blockquote>
<ul>
<li>导入依赖坐标</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>配置文件配置</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysq:///spring_dao"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>查找驱动依赖网站：<a href="https://mvnrepository.com/" target="_blank" rel="noopener">https://mvnrepository.com/</a></p>
</blockquote>
<h5 id="1-2-未知第三方资源–c3p0"><a href="#1-2-未知第三方资源–c3p0" class="headerlink" title="1.2 未知第三方资源–c3p0"></a>1.2 未知第三方资源–c3p0</h5><blockquote>
<ul>
<li>导入依赖坐标</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!-- https://mvnrepository.com/artifact/c3p0/c3p0 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>配置文件配置</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--导入路径 --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span>  <span class="attr">id</span>=<span class="string">"dataSoure"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span> &gt;</span></span><br><span class="line">   		<span class="comment">&lt;!--基本配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"dbc:mysq:///spring_dao"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="2-加载properties文件"><a href="#2-加载properties文件" class="headerlink" title="2. 加载properties文件"></a>2. 加载properties文件</h4><blockquote>
<ul>
<li>新建*.properties文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--对应那个资源，在命名前增加前缀，避免和系统属性名重复--&gt;</span></span><br><span class="line">&gt;jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">&gt;jdbc.url=jdbc:mysq:///spring_dao?useSSL = false<span class="symbol">&amp;amp;</span>characterEncoding=utf-8</span><br><span class="line">&gt;jdbc.username=root</span><br><span class="line">&gt;jdbc.password=root</span><br></pre></td></tr></table></figure>

<ul>
<li>开辟新的命名空间   （尽量使用自动生成的，不要自己修改）</li>
</ul>
<p><strong>命名空间</strong>：封装对应标签的包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line">      &lt;!--新增  复制xmlns 设置命名空间，beans修改成context--&gt; </span><br><span class="line">      xmlns:context="http://www.springframework.org/schema/context"</span><br><span class="line">      xsi:schemaLocation="</span><br><span class="line">       http://www.springframework.org/schema/beans</span><br><span class="line">       http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line"> 		<span class="comment">&lt;!--新增  复制上面两个 ，将beans修改成context--&gt;</span> </span><br><span class="line">       http://www.springframework.org/schema/context</span><br><span class="line">       http://www.springframework.org/schema/context/spring-context.xsd"&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>加载properties文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"jdbc.properties"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用属性占位符${}读取properties文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意事项：</strong></p>
<ul>
<li>系统属性大于properties参数等级</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--解决方法--&gt;</span></span><br><span class="line">&gt;<span class="comment">&lt;!--增加system-properties-mode 属性  定义properties文件为系统属性 --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"jdbc.properties"</span>  <span class="attr">system-properties-mode</span>=<span class="string">"NEVER"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>需要加载多个properties文件格式</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--加载指定properties文件--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"jdbc.properties,jdbc2.properties"</span>  <span class="attr">system-properties-mode</span>=<span class="string">"NEVER"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">&lt;!--加载properties文件格式--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"*.properties"</span>  <span class="attr">system-properties-mode</span>=<span class="string">"NEVER"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">&lt;!--classpath:   当前文件    classpath*:  当前文件和依赖的jar文件都可以读取--&gt;</span></span><br><span class="line">&gt;<span class="comment">&lt;!--加载properties标准格式--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:*.properties"</span>  <span class="attr">system-properties-mode</span>=<span class="string">"NEVER"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="3-容器"><a href="#3-容器" class="headerlink" title="3. 容器"></a>3. 容器</h4><h5 id="3-1-创建容器"><a href="#3-1-创建容器" class="headerlink" title="3.1  创建容器"></a>3.1  <strong>创建容器</strong></h5><blockquote>
<p>使用绝对路径获取配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ios = <span class="keyword">new</span> FileSystemXmlApplicationContext(<span class="string">"E:\\HEIMA\\Demo\\Spring\\Spring02_Other\\src\\main\\resources\\applicationContext.xml"</span>);</span><br></pre></td></tr></table></figure>

<p>相对路径获取配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ios = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="3-2-获取bean"><a href="#3-2-获取bean" class="headerlink" title="3.2  获取bean"></a>3.2  获取bean</h5><blockquote>
<ul>
<li>使用bean名称</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;BookDao bookDao = (BookDao) ios.getBean(<span class="string">"bookDao"</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>使用bean名称并获取指定类型</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BookDao bookDao = (BookDao) ios.getBean(<span class="string">"bookDao"</span>,BookDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用bean类型获取</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;BookDao bookDao = (BookDao) ios.getBean(BookDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="3-3-容器类层次结构"><a href="#3-3-容器类层次结构" class="headerlink" title="3.3  容器类层次结构"></a>3.3  容器类层次结构</h5><h5 id="3-4-BeanFactory"><a href="#3-4-BeanFactory" class="headerlink" title="3.4  BeanFactory"></a>3.4  BeanFactory</h5><blockquote>
<ul>
<li>所有容器的顶层接口</li>
</ul>
</blockquote>
<h4 id="4-核心容器总结"><a href="#4-核心容器总结" class="headerlink" title="4. 核心容器总结"></a>4. 核心容器总结</h4><h4 id="5-注解开发"><a href="#5-注解开发" class="headerlink" title="5.注解开发"></a>5.注解开发</h4><h5 id="5-1-注解开发定义bean"><a href="#5-1-注解开发定义bean" class="headerlink" title="5.1 注解开发定义bean"></a>5.1 注解开发定义bean</h5><blockquote>
<ul>
<li>使用@Component定义Bean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;等同于 ： <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.Impl.BookDaoImpl"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>Dao和Service</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Component</span>(<span class="string">"userDao"</span>)</span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span>  <span class="keyword">implements</span> <span class="title">UDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"user dao compnent..."</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br><span class="line">&gt;<span class="meta">@Component</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> UDao userDao;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UDao userDao)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"user service save ..."</span>);</span><br><span class="line">       userDao.save();</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>核心配置文件配置注解扫描</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启注解扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ff"</span> /&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>@Component   Spring有三个衍生注解</strong></p>
<ul>
<li><strong><code>@Controller</code></strong>：用于表现层bean定义</li>
<li><strong><code>@Service</code></strong>：用于业务层bean定义</li>
<li><code>@Repository</code>：用于数据层bean定义</li>
</ul>
</blockquote>
<h5 id="5-2-纯注解开发"><a href="#5-2-纯注解开发" class="headerlink" title="5.2 纯注解开发"></a>5.2 纯注解开发</h5><blockquote>
<p>Java类代替Spring核心配置文件</p>
<p>@Configuration   用于设定当前类为配置类</p>
<p>@ComponentScan  用于设定扫描路径，此注解只能添加一次，多个数据用数组格式</p>
<ul>
<li><p>创建配置类 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//扫描    只能添加一次</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.ff"</span>)</span><br><span class="line"><span class="comment">//加载properties文件</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:mybatis.properties"</span>)</span><br><span class="line"><span class="meta">@Import</span>(&#123;JdbcConfig<span class="class">.<span class="keyword">class</span>,<span class="title">MybatisConfig</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SpringConfig</span> </span>&#123;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">app4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//使用AnnotationConfigApplicationContext 加载配置类的字节码文件</span></span><br><span class="line">        ApplicationContext ios = <span class="keyword">new</span> AnnotationConfigApplicationContext(SpringConfig<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        UDao userDao = (UDao) ios.getBean(<span class="string">"userDao"</span>);</span><br><span class="line">        System.out.println(userDao);</span><br><span class="line">        UserService userService = ios.getBean(UserService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        System.out.println(userService);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<p><strong>生命周期配置：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Scope</span>(<span class="string">"prototype"</span>)     <span class="comment">//多例</span></span><br><span class="line">&gt;<span class="meta">@Scope</span>(<span class="string">"singleton"</span>)		<span class="comment">//单例</span></span><br><span class="line">   </span><br><span class="line">&gt;<span class="meta">@PostConstruct</span>		<span class="comment">//创建后</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"init.."</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;<span class="meta">@PreDestroy</span>			<span class="comment">//销毁前</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destory</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">" destory.."</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<p><strong>依赖注入：</strong></p>
<p>查找bean的策略</p>
<ol>
<li>先按照类型匹配，如果找到一个，直接匹配成功；</li>
<li>如果有多个，按照名称去匹配，去查找当前变量同名的bean对象</li>
<li>如果多个名称也无法匹配，需要使用@Qualifie指定具体要找的那个bean的名字</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Autowired</span>  <span class="comment">//自动装配   不需要setter  自动加载无参构造</span></span><br><span class="line">&gt;<span class="meta">@Qualifie</span>	<span class="comment">//无法单独使用，必须配合@Autowired注解使用   指定Bean名称和别名</span></span><br><span class="line">&gt;<span class="meta">@Value</span>		<span class="comment">//赋值</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="meta">@Service</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="meta">@Qualifier</span>(<span class="string">"userDao"</span>)</span><br><span class="line">   <span class="keyword">private</span> UDao userDao;</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"李四"</span>)</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="comment">/*  public void setUserDao(UDao userDao) &#123;</span></span><br><span class="line"><span class="comment">       this.userDao = userDao;</span></span><br><span class="line"><span class="comment">   &#125;*/</span></span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"name = "</span> + name);</span><br><span class="line">       System.out.println(<span class="string">"user service save ..."</span>);</span><br><span class="line">       userDao.save();</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>



<p><strong>加载properties文件：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@PropertySource</span>(<span class="string">"classpath:mybatis.properties"</span>)</span><br></pre></td></tr></table></figure>

<p>多个properties文件使用数组形式，不可以使用通配符，不识别</p>
<p><strong>第三方Bean资源注解管理：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//配置类</span></span><br><span class="line">&gt;<span class="meta">@Configuration</span></span><br><span class="line">&gt;<span class="comment">//扫描</span></span><br><span class="line">&gt;<span class="meta">@ComponentScan</span>(<span class="string">"com.ff"</span>)</span><br><span class="line">&gt;<span class="comment">//加载properties文件</span></span><br><span class="line">&gt;<span class="meta">@PropertySource</span>(<span class="string">"mybatis.properties"</span>)</span><br><span class="line">&gt;<span class="comment">//导入第三方配置类</span></span><br><span class="line">&gt;<span class="meta">@Import</span>(&#123;JdbcConfig<span class="class">.<span class="keyword">class</span>,<span class="title">MybatisConfig</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class">&gt;<span class="title">public</span> <span class="title">class</span> <span class="title">SpringConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<p>第三方bean：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcConfig</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.driver&#125;"</span>)</span><br><span class="line">   <span class="keyword">private</span> String driver;</span><br><span class="line">   <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.url&#125;"</span>)</span><br><span class="line">   <span class="keyword">private</span> String url;</span><br><span class="line">   <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.username&#125;"</span>)</span><br><span class="line">   <span class="keyword">private</span> String username;</span><br><span class="line">   <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.password&#125;"</span>)</span><br><span class="line">   <span class="keyword">private</span> String password;</span><br><span class="line">   <span class="comment">//定义一个方法获得需要管理的对象</span></span><br><span class="line">   <span class="comment">//添加@Bean,表示当前是一个Bean</span></span><br><span class="line">   <span class="comment">//参数是自动装配，在容器中寻找</span></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">(UDao userDao)</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"userDao = "</span> + userDao);</span><br><span class="line">       DruidDataSource ds = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">       ds.setDriverClassName(driver);</span><br><span class="line">       ds.setUrl(url);</span><br><span class="line">       ds.setUsername(username);</span><br><span class="line">       ds.setPassword(password);</span><br><span class="line">       <span class="keyword">return</span>  ds;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="6-整合Mybatis"><a href="#6-整合Mybatis" class="headerlink" title="6. 整合Mybatis"></a>6. 整合Mybatis</h4><blockquote>
<ol>
<li>创建项目<ol>
<li>引入依赖坐标</li>
<li>搭建项目结构</li>
</ol>
</li>
<li>将数据源对象交给Spring容器管理</li>
<li>将整合Mybatis对应两个对象交给Spring<ol>
<li>SqlSessionFactoryBean</li>
<li>MapperScannerConfigurer</li>
</ol>
</li>
<li>将Service交给Spring对象<ol>
<li>在内部注入dao对象</li>
</ol>
</li>
<li>编写配置类，导入所有配置的Bean</li>
<li>编写控制层，进行测试</li>
</ol>
<hr>
<ul>
<li>导入依赖</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建配置类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//扫描</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.ff"</span>)</span><br><span class="line"><span class="comment">//加载properties文件</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:mybatis.properties"</span>)</span><br><span class="line"><span class="comment">//导入第三方配置类</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;JdbcConfig<span class="class">.<span class="keyword">class</span>,<span class="title">MybatisConfig</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SpringConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>JdbcConfig类：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.driver&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.url&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.username&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.password&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//定义一个方法获得需要管理的对象</span></span><br><span class="line">    <span class="comment">//添加@Bean,表示当前是一个Bean</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line">        DruidDataSource ds = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">        ds.setDriverClassName(driver);</span><br><span class="line">        ds.setUrl(url);</span><br><span class="line">        ds.setUsername(username);</span><br><span class="line">        ds.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span>  ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>MybatisConfig类：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SqlSessionFactoryBean <span class="title">sqlSessionFactory</span><span class="params">(DataSource dataSource)</span></span>&#123;</span><br><span class="line">        SqlSessionFactoryBean ssfb = <span class="keyword">new</span> SqlSessionFactoryBean();</span><br><span class="line">        ssfb.setTypeAliasesPackage(<span class="string">"com.ff.domain"</span>);</span><br><span class="line">        ssfb.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> ssfb;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MapperScannerConfigurer <span class="title">mapperScannerConfigurer</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MapperScannerConfigurer msc = <span class="keyword">new</span> MapperScannerConfigurer();</span><br><span class="line">        msc.setBasePackage(<span class="string">"com.ff.dao"</span>);</span><br><span class="line">        <span class="keyword">return</span> msc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>properties文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://127.0.0.1:3306/spring_dao?useSSL = false</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=root</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>整合junit：</strong></p>
<ul>
<li>导入依赖坐标</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--单元测试--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建测试类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置主运行</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">//导入配置类</span></span><br><span class="line"><span class="class">@<span class="title">ContextConfiguration</span>(<span class="title">classes</span> </span>= SpringConfig<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span>  AccountService accountService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Acount acount = accountService.selectAcount(<span class="number">1</span>);</span><br><span class="line">        System.out.println(acount);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/11/07/day02_%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/" data-id="ckvp9fb7g000054ue8lic2irx"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-day01_Spring" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/11/06/day01_Spring/"
    >Spring入门</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/11/06/day01_Spring/" class="article-date">
  <time datetime="2021-11-06T10:32:19.000Z" itemprop="datePublished">2021-11-06</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h3><h4 id="1-初识Spring技术"><a href="#1-初识Spring技术" class="headerlink" title="1.初识Spring技术"></a>1.初识Spring技术</h4><blockquote>
<p>简化开发：降低企业级开发的复杂性</p>
<ul>
<li>IOC（反转控制）</li>
<li>AOP（面向切面编程）<ul>
<li>事务处理</li>
</ul>
</li>
</ul>
<p>框架整合：高效整合其他技术，提高企业级应用开发与运行效率</p>
<ul>
<li>MyBatis</li>
<li>MyBatis-plus</li>
<li>Struts</li>
<li>Struts2</li>
<li>Hibernate</li>
</ul>
<p>Spring Framework</p>
<p>Spring Boot</p>
<p>Spring Cloud</p>
</blockquote>
<h4 id="2-Spring-Framework技术"><a href="#2-Spring-Framework技术" class="headerlink" title="2. Spring Framework技术"></a>2. Spring Framework技术</h4><blockquote>
<p>Spring Framework的架构 ：是Spring生态的最基本的项目，是其他的框架基础</p>
<ul>
<li>Data Access：数据访问</li>
<li>Data Integration：数据集成</li>
</ul>
<ul>
<li>Web：web开发</li>
</ul>
<ul>
<li>AOP:面向切面编程</li>
<li>Aspects：AOP思想实现</li>
</ul>
<ul>
<li>Core Container：核心容器</li>
</ul>
<ul>
<li>Test:单元测试与集成测试</li>
</ul>
</blockquote>
<h4 id="3-Spring-Framework的核心概念"><a href="#3-Spring-Framework的核心概念" class="headerlink" title="3. Spring Framework的核心概念"></a>3. Spring Framework的核心概念</h4><blockquote>
<p><strong>IoC:控制反转</strong></p>
<ul>
<li>使用对象时，主动new产生对象转换为由外部提供对象，此过程中对象创建控制权由程序转移到外部</li>
</ul>
<p><strong>IoC容器</strong></p>
<ul>
<li>Spring提供了一个容器，称之为IoC容器，用来充当IoC思想中的“外部”</li>
</ul>
<p><strong>Bean</strong></p>
<ul>
<li>IoC容器负责对象的创建、初始化等一系列工作，被创建或被管理的对象在IoC容器中统称为Bean</li>
</ul>
</blockquote>
<h4 id="4-IoC的使用"><a href="#4-IoC的使用" class="headerlink" title="4. IoC的使用"></a>4. IoC的使用</h4><blockquote>
<ul>
<li><p>通过pom.xml导入Spring坐标</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">--Spring-context</span> 依赖坐标 <span class="attr">--</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE <span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>IoC容器通过配置得知需要管理的对象</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.BookDaoImpl"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.BookServiceImpl"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>被管理的对象交给IoC容器，通过接口获得IoC容器</p>
</li>
<li><p>IoC容器从接口方法获得Bean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">app2</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="comment">//获取Ioc容器</span></span><br><span class="line">       ApplicationContext ca = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">       <span class="comment">//获取Bean</span></span><br><span class="line">       BookService bookService = (BookService) ca.getBean(<span class="string">"bookService"</span>);</span><br><span class="line">       bookService.save();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>管理Service和Dao</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//业务层</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookServiceImpl</span>  <span class="keyword">implements</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao = <span class="keyword">new</span> BookDao();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"book serivce save.."</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//资源层</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title">BookDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"book Dao save.."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h4 id="5-DI的使用"><a href="#5-DI的使用" class="headerlink" title="5.DI的使用"></a>5.DI的使用</h4><blockquote>
<ul>
<li><p>基于IoC管理Bean</p>
</li>
<li><p>Service中不保留new形式创建的Dao对象</p>
</li>
<li><p>Service中的Dao通过提供的方法进入Service</p>
</li>
</ul>
<ul>
<li>配置Bean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.BookDaoImpl"</span> <span class="attr">init-method</span>=<span class="string">"init"</span> <span class="attr">destroy-method</span>=<span class="string">"destory"</span>/&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.BookServiceImpl"</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--配置Dao和Service的关系--&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- property 当前bean的属性</span></span><br><span class="line"><span class="comment">       name属性表示配置哪一个具体的属性</span></span><br><span class="line"><span class="comment">       ref表示参照哪一个bean--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"bookDao"</span> <span class="attr">ref</span>=<span class="string">"bookDao"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>管理Service和Dao</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt;&#x2F;&#x2F;业务层</span><br><span class="line">&gt;public class BookServiceImpl  implements BookService &#123;</span><br><span class="line">   &#x2F;&#x2F;删除业务层使用new的方式创建对象</span><br><span class="line">   private BookDao bookDao ;</span><br><span class="line"></span><br><span class="line">   @Override</span><br><span class="line">   public void save() &#123;</span><br><span class="line">       System.out.println(&quot;book serivce save..&quot;);</span><br><span class="line">       bookDao.save();</span><br><span class="line">   &#125;</span><br><span class="line">   &#x2F;&#x2F;提供对应的set方法</span><br><span class="line">   public void setBookDao(BookDao bookDao)&#123;</span><br><span class="line">       this.bookDao &#x3D; bookDao;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&gt;&#x2F;&#x2F;资源层</span><br><span class="line">&gt;public class BookDaoImpl implements BookDao &#123;</span><br><span class="line"></span><br><span class="line">   @Override</span><br><span class="line">   public void save() &#123;</span><br><span class="line">       System.out.println(&quot;book Dao save..&quot;);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>



<p>Bean的作用范围：默认是单例     </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;scope="prototype"  通过属性scope   prtotype 非单例   singleton单例</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">--name</span> 给<span class="attr">id</span>取别名   <span class="attr">name</span>里可以取多个 中间可以用 空格  逗号 分隔 <span class="attr">--</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.BookServiceImpl"</span> <span class="attr">name</span>=<span class="string">"bookService2 bookService3 bookService4"</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li>适合交给容器进行管理的bean<ul>
<li>表现层</li>
<li>业务层</li>
<li>数据层</li>
<li>工具对象</li>
</ul>
</li>
<li>不适合交给容器管理的bean<ul>
<li>实体类</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="6-静态工厂实例化Bean"><a href="#6-静态工厂实例化Bean" class="headerlink" title="6. 静态工厂实例化Bean"></a>6. 静态工厂实例化Bean</h4><blockquote>
<ul>
<li><p>创建一个工厂类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderDaoFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> OrderDao <span class="title">getOrderDao</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"order Dao Factory 。。。"</span>);</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> OrderDaoImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置Bean</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"orderDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.factory.OrderDaoFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getOrderDao"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h4 id="7-实例化工厂实例化Bean"><a href="#7-实例化工厂实例化Bean" class="headerlink" title="7. 实例化工厂实例化Bean"></a>7. 实例化工厂实例化Bean</h4><blockquote>
<ul>
<li>创建一个工厂类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoFactory</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span>  UserDao <span class="title">getUserDao</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span>  <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置Bean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDaoFactory"</span> <span class="attr">class</span>=<span class="string">"com.ff.factory.UserDaoFactory"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">--factory-method</span> 实现<span class="attr">Bean</span>的工厂方法    <span class="attr">factory-bean</span>的<span class="attr">id</span>名称 <span class="attr">--</span> &gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDao"</span> <span class="attr">factory-method</span>=<span class="string">"getUserDao"</span> <span class="attr">factory-bean</span>=<span class="string">"userDaoFactory"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="8-使用FactoryBean实例化"><a href="#8-使用FactoryBean实例化" class="headerlink" title="8. 使用FactoryBean实例化"></a>8. 使用FactoryBean实例化</h4><blockquote>
<ul>
<li>创建一个工厂类实现FactoryBean接口，重写方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoFactoryBean</span> <span class="keyword">implements</span> <span class="title">FactoryBean</span>&lt;<span class="title">UserDao</span>&gt; </span>&#123;</span><br><span class="line">   <span class="comment">//代替原始实例工厂中创建对象的方法</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> UserDao <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//传递需要实现类的字节码对象</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">       <span class="keyword">return</span> UserDao<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 选择是否是单例对象</span></span><br><span class="line"><span class="comment">    * true 单例  false 非单例</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置Bean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDaoFactoryBean"</span> <span class="attr">class</span>=<span class="string">"com.ff.factory.UserDaoFactoryBean"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

</blockquote>
<h4 id="9-Bean的生命周期"><a href="#9-Bean的生命周期" class="headerlink" title="9. Bean的生命周期"></a>9. Bean的生命周期</h4><blockquote>
<ul>
<li>初始化容器</li>
</ul>
<ol>
<li>创建对象（内存分配）</li>
<li>执行构造方法</li>
<li>执行属性注入（set操作）</li>
<li>执行bean初始化方法</li>
</ol>
<ul>
<li>使用bean</li>
</ul>
<ol>
<li>执行业务操作</li>
</ol>
<ul>
<li>关闭/销毁容器</li>
</ul>
<ol>
<li>执行bean销毁方法</li>
</ol>
<h4 id="方式一："><a href="#方式一：" class="headerlink" title="方式一："></a><strong>方式一：</strong></h4><p><strong>创建开始\销毁：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Bean创建后</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"init...."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//Bean销毁前</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"destory..."</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>配置bean：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.BookDaoImpl"</span> <span class="attr">init-method</span>=<span class="string">"init"</span> <span class="attr">destroy-method</span>=<span class="string">"destory"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>设置结束：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  ClassPathXmlApplicationContext ioc = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line"><span class="comment">//暴力销毁，只能放在最后</span></span><br><span class="line">ioc.close();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置结束标记 ,位置没有关系</span></span><br><span class="line">ioc.registerShutdownHook();</span><br></pre></td></tr></table></figure>

<h4 id="方式二："><a href="#方式二：" class="headerlink" title="方式二："></a><strong>方式二：</strong></h4><p><strong>实现Service实现InitializingBean, DisposableBean接口</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookServiceImpl</span>  <span class="keyword">implements</span> <span class="title">BookService</span>, <span class="title">InitializingBean</span>, <span class="title">DisposableBean</span> </span>&#123;</span><br><span class="line">   <span class="comment">//删除业务层使用new的方式创建对象</span></span><br><span class="line">   <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"book serivce save.."</span>);</span><br><span class="line">       bookDao.save();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//提供对应的set方法</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookDao</span><span class="params">(BookDao bookDao)</span></span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.bookDao = bookDao;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"service destroy"</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"service  init"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="10-依赖注入方式"><a href="#10-依赖注入方式" class="headerlink" title="10. 依赖注入方式"></a>10. 依赖注入方式</h4><blockquote>
<p><strong>注入方式：</strong></p>
<ul>
<li><p>普通方法(setter方法)</p>
<ol>
<li>简单类型</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.DIDaoImpl"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.DIServiceImpl"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--setter注入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"diDao"</span> <span class="attr">ref</span>=<span class="string">"diDao"</span>/&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>引用类型</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.DIDaoImpl"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--setter 引用注入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"num"</span> <span class="attr">value</span>=<span class="string">"100"</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"str.."</span> <span class="attr">value</span>=<span class="string">"setter引用"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.DIServiceImpl"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--setter注入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"diDao"</span> <span class="attr">ref</span>=<span class="string">"diDao"</span>/&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>      </span><br></pre></td></tr></table></figure>

<p><strong>Service 和Dao</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DIServiceImpl</span> <span class="keyword">implements</span> <span class="title">DIService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> DIDao diDao;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//提供setter方法 注入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDiDao</span><span class="params">(DIDao diDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.diDao = diDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        diDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DIDaoImpl</span> <span class="keyword">implements</span> <span class="title">DIDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">private</span> String str;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    setter 的set</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNum</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.num = num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStr</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"DI Dao save..."</span>);</span><br><span class="line">        System.out.println(<span class="string">"num = "</span> + num);</span><br><span class="line">        System.out.println(<span class="string">"str = "</span> + str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>构造方法</p>
<ol>
<li>简单类型</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.DIDaoImpl"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.DIServiceImpl"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--构造方法 简单注入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"diDao"</span> <span class="attr">ref</span>=<span class="string">"diDao"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<ol start="2">
<li><p>引用类型</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.DIDaoImpl"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--构造方法 引入注入--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       name 根据形参名称</span></span><br><span class="line"><span class="comment">       type 根据参数数据类型</span></span><br><span class="line"><span class="comment">       index 根据形参的排序</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"num"</span> <span class="attr">value</span>=<span class="string">"100"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"str"</span> <span class="attr">value</span>=<span class="string">"引入注入。。"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.DIServiceImpl"</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--构造方法 简单注入--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"diDao"</span> <span class="attr">ref</span>=<span class="string">"diDao"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p> <strong>Service 和Dao</strong></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DIDaoImpl</span> <span class="keyword">implements</span> <span class="title">DIDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">private</span> String str;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造方法的引入注入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DIDaoImpl</span><span class="params">(<span class="keyword">int</span> num, String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.num = num;</span><br><span class="line">        <span class="keyword">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"DI Dao save..."</span>);</span><br><span class="line">        System.out.println(<span class="string">"num = "</span> + num);</span><br><span class="line">        System.out.println(<span class="string">"str = "</span> + str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DIServiceImpl</span> <span class="keyword">implements</span> <span class="title">DIService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> DIDao diDao;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    <span class="comment">//构造方式注入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DIServiceImpl</span><span class="params">(DIDao diDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.diDao = diDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        diDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="11-依赖自动装配"><a href="#11-依赖自动装配" class="headerlink" title="11. 依赖自动装配"></a>11. 依赖自动装配</h4><blockquote>
<p>自动装配：根据bean所依赖的资源在容器中自动查找并注入到bean中的过程</p>
<p>方式： bean标签autowire配置</p>
<ul>
<li>按类型（常用） autowire=”byType”</li>
<li>按名称                 autowire=”byName”</li>
<li>按构造方法         autowire=”constructor”</li>
</ul>
<p>自动装配的注意</p>
<ol>
<li>强制依赖使用构造器进行，使用setter注入有概率不进行注入导致null对象出现</li>
<li>可选依赖使用setter注入进行，灵活性强</li>
<li>Spring框架倡导使用构造器，第三方框架内部大多数采用构造器注入的形式进行数据初始化，相对严谨</li>
<li>如果有必要可以两者同时使用，使用构造器注入完成强制依赖的注入，使用setter注入完成可选依赖的注入</li>
<li>实际开发过程中还要根据实际情况分析，如果受控对象没有提供setter方法就必须使用构造器注入</li>
<li><strong>==自己开发的模块推荐使用setter注入==</strong></li>
</ol>
</blockquote>
<h4 id="12-集合注入"><a href="#12-集合注入" class="headerlink" title="12. 集合注入"></a>12. 集合注入</h4><blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--数组--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"array"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--集合--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--集合--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"a"</span> <span class="attr">value</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"b"</span> <span class="attr">value</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"c"</span> <span class="attr">value</span>=<span class="string">"3"</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--配置文件--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"properties"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"a"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"b"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"c"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>


</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/11/06/day01_Spring/" data-id="ckvno4lio0011ggue9re9g3wn"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Day10_JSP" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/31/Day10_JSP/"
    >JSP</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/31/Day10_JSP/" class="article-date">
  <time datetime="2021-10-31T14:41:19.000Z" itemprop="datePublished">2021-10-31</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-JSP"><a href="#1-JSP" class="headerlink" title="1. JSP"></a>1. JSP</h3><h4 id="1-1-JSP概述"><a href="#1-1-JSP概述" class="headerlink" title="1.1 JSP概述"></a>1.1 JSP概述</h4><blockquote>
<p>概念：Java页面</p>
<p>JSP = HTML + Java</p>
<p>==JSP本质上是一个Servlet==</p>
</blockquote>
<h4 id="1-2-JSP-脚本"><a href="#1-2-JSP-脚本" class="headerlink" title="1.2 JSP 脚本"></a>1.2 JSP 脚本</h4><blockquote>
<p>JSP脚本用于在 JSP页面内定义 Java代码。在之前的入门案例中我们就在 JSP 页面定义的 Java 代码就是 JSP 脚本。</p>
<p>分类：</p>
<p>JSP 脚本有如下三个分类：</p>
<ul>
<li>&lt;%…%&gt;：内容会直接放到_jspService()方法之中</li>
<li>&lt;%=…%&gt;：内容会放到out.print()中，作为out.print()的参数</li>
<li>&lt;%!…%&gt;：内容会放到_jspService()方法之外，被类直接包含</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;%</span><br><span class="line">  System.out.println(<span class="string">"hello,jsp~"</span>);</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">3</span>;</span><br><span class="line">&gt;%&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="1-3-JSP-缺点"><a href="#1-3-JSP-缺点" class="headerlink" title="1.3 JSP 缺点"></a>1.3 JSP 缺点</h5><blockquote>
<p>由于 JSP页面内，既可以定义 HTML 标签，又可以定义 Java代码，造成了以下问题：</p>
<ul>
<li>书写麻烦：特别是复杂的页面</li>
</ul>
<p>既要写 HTML 标签，还要写 Java 代码</p>
<ul>
<li>阅读麻烦</li>
</ul>
<p>上面案例的代码，相信你后期再看这段代码时还需要花费很长的时间去梳理</p>
<ul>
<li><p>复杂度高：运行需要依赖于各种环境，JRE，JSP容器，JavaEE…</p>
</li>
<li><p>占内存和磁盘：JSP会自动生成.java和.class文件占磁盘，运行的是.class文件占内存</p>
</li>
<li><p>调试困难：出错后，需要找到自动生成的.java文件进行调试</p>
</li>
<li><p>不利于团队协作：前端人员不会 Java，后端人员不精 HTML</p>
</li>
</ul>
<p>如果页面布局发生变化，前端工程师对静态页面进行修改，然后再交给后端工程师，由后端工程师再将该页面改为 JSP 页面</p>
<p>由于上述的问题， ==JSP 已逐渐退出历史舞台，==以后开发更多的是使用 ==HTML +  Ajax== 来替代。</p>
</blockquote>
<h3 id="2-EL表达式"><a href="#2-EL表达式" class="headerlink" title="2. EL表达式"></a>2. EL表达式</h3><blockquote>
<ul>
<li><p>用户简化jSP页面内的代码</p>
</li>
<li><p>主要功能:获取数据</p>
</li>
<li><p>语法：${expression}</p>
</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;expression&#125;:获取域中存储的key为brands的数据</span><br></pre></td></tr></table></figure>

<ul>
<li><p>四大域对象</p>
</li>
<li><p>paga:当前页面有效</p>
</li>
<li><p>request：当前请求有效</p>
</li>
<li><p>session：当前会话有效</p>
</li>
<li><p>appication：当前应用有效</p>
</li>
<li><p>el表达式获取数据，会依次从这四个域中寻找，直到找到为止</p>
</li>
</ul>
</blockquote>
<h4 id="3-JSTL标签"><a href="#3-JSTL标签" class="headerlink" title="3.  JSTL标签"></a>3.  JSTL标签</h4><blockquote>
<p>JSP标准标签库(Jsp Standarded Tag Library) ，使用标签取代JSP页面上的Java代码。如下代码就是JSTL标签</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;c:<span class="keyword">if</span> test=<span class="string">"$&#123;flag == 1&#125;"</span>&gt;</span><br><span class="line">&gt;男</span><br><span class="line">&gt;&lt;/c:if&gt;</span><br><span class="line">&gt;&lt;c:<span class="keyword">if</span> test=<span class="string">"$&#123;flag == 2&#125;"</span>&gt;</span><br><span class="line">&gt;女</span><br><span class="line">&gt;&lt;/c:if&gt;</span><br></pre></td></tr></table></figure>

<p>引用核心标签库的语法如下：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br></pre></td></tr></table></figure>

<p><strong>分类</strong></p>
<table>
<thead>
<tr>
<th>标签</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>&lt; c:out &gt;</td>
<td>用于在JSP中显示数据，就像&lt;%= … &gt;</td>
</tr>
<tr>
<td>&lt; c:set &gt;</td>
<td>用于保存数据</td>
</tr>
<tr>
<td>&lt; c:remove &gt;</td>
<td>用于删除数据</td>
</tr>
<tr>
<td>&lt; c:catch &gt;</td>
<td>用来处理产生错误的异常状况，并且将错误信息储存起来</td>
</tr>
<tr>
<td>&lt; c:if &gt;</td>
<td>与我们在一般程序中用的if一样</td>
</tr>
<tr>
<td>&lt; c:choose &gt;</td>
<td>本身只当做&lt;c:when&gt;和&lt;c:otherwise&gt;的父标签</td>
</tr>
<tr>
<td>&lt; c:when &gt;</td>
<td>&lt;c:choose&gt;的子标签，用来判断条件是否成立</td>
</tr>
<tr>
<td>&lt; c:otherwise &gt;</td>
<td>&lt;c:choose&gt;的子标签，接在&lt;c:when&gt;标签后，当&lt;c:when&gt;标签判断为false时被执行</td>
</tr>
<tr>
<td>&lt; c:import &gt;</td>
<td>检索一个绝对或相对 URL，然后将其内容暴露给页面</td>
</tr>
<tr>
<td>&lt; c:forEach &gt;</td>
<td>基础迭代标签，接受多种集合类型</td>
</tr>
<tr>
<td>&lt; c:forTokens &gt;</td>
<td>根据指定的分隔符来分隔内容并迭代输出</td>
</tr>
<tr>
<td>&lt; c:param &gt;</td>
<td>用来给包含或重定向的页面传递参数</td>
</tr>
<tr>
<td>&lt; c:redirect &gt;</td>
<td>重定向至一个新的URL.</td>
</tr>
<tr>
<td>&lt; c:url &gt;</td>
<td>使用可选的查询参数来创造一个URL</td>
</tr>
</tbody></table>
<p><strong>格式化标签</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;%@ taglib prefix=<span class="string">"fmt"</span> </span><br><span class="line">     uri=<span class="string">"http://java.sun.com/jsp/jstl/fmt"</span> %&gt;</span><br></pre></td></tr></table></figure>



<p><strong>&lt; c : if &gt; 标签</strong> ：相当于 if 判断</p>
<p>属性：test，用于定义条件表达式   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;c:if test&#x3D;&quot;$&#123;flag &#x3D;&#x3D; 1&#125;&quot;&gt;</span><br><span class="line">&gt;男</span><br><span class="line">&gt;&lt;&#x2F;c:if&gt;</span><br><span class="line">&gt;&lt;c:if test&#x3D;&quot;$&#123;flag &#x3D;&#x3D; 2&#125;&quot;&gt;</span><br><span class="line">&gt;女</span><br><span class="line">&gt;&lt;&#x2F;c:if&gt;</span><br></pre></td></tr></table></figure>

<p><strong>&lt; c : forEach &gt; 标签</strong> ：相当于 if 判断</p>
<p>相当于 for 循环。java中有增强for循环和普通for循环，JSTL 中的 <code>&lt;c:forEach&gt;</code> 也有两种用法</p>
<p>类似于 Java 中的增强for循环。涉及到的 <code>&lt;c:forEach&gt;</code> 中的属性如下</p>
<ul>
<li>items：被遍历的容器</li>
<li>var：遍历产生的临时变量</li>
<li>varStatus：遍历状态对象</li>
</ul>
<p>一：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;c:forEach items=<span class="string">"$&#123;brands&#125;"</span> <span class="keyword">var</span>=<span class="string">"brand"</span>&gt;   <span class="keyword">for</span>(Brand brand:brands)</span><br><span class="line">  &lt;tr align=<span class="string">"center"</span>&gt;</span><br><span class="line">      &lt;td&gt;$&#123;brand.id&#125;&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;$&#123;brand.brandName&#125;&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;$&#123;brand.companyName&#125;&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;$&#123;brand.description&#125;&lt;/td&gt;</span><br><span class="line">  &lt;/tr&gt;</span><br><span class="line">&gt;&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>

<p>二：</p>
<p>类似于 Java 中的普通for循环。涉及到的 <code>&lt;c:forEach&gt;</code> 中的属性如下</p>
<ul>
<li>begin：开始数</li>
<li>end：结束数</li>
<li>step：步长</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;c:forEach begin=<span class="string">"0"</span> end=<span class="string">"10"</span> step=<span class="string">"1"</span> <span class="keyword">var</span>=<span class="string">"i"</span>&gt;</span><br><span class="line">  $&#123;i&#125;</span><br><span class="line">&gt;&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="4-MVC模式和三层架构"><a href="#4-MVC模式和三层架构" class="headerlink" title="4. MVC模式和三层架构"></a>4. MVC模式和三层架构</h4><blockquote>
<p>MVC 是一种分层开发的模式，其中：</p>
<ul>
<li><p>M：Model，业务模型，处理业务</p>
</li>
<li><p>V：View，视图，界面展示</p>
</li>
<li><p>C：Controller，控制器，处理请求，调用模型和视图</p>
</li>
</ul>
<p><strong>MVC 好处：</strong></p>
<ul>
<li><p>职责单一，互不影响。每个角色做它自己的事，各司其职。</p>
</li>
<li><p>有利于分工协作。</p>
</li>
<li><p>有利于组件重用</p>
</li>
</ul>
</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/31/Day10_JSP/" data-id="ckvno4lik000tggueeza88tn1"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-Web/" rel="tag">Java Web</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Day05_MyBatis高级" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/28/Day05_MyBatis%E9%AB%98%E7%BA%A7/"
    >MyBatis高级</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/28/Day05_MyBatis%E9%AB%98%E7%BA%A7/" class="article-date">
  <time datetime="2021-10-28T01:13:19.000Z" itemprop="datePublished">2021-10-28</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-MyBatis高级"><a href="#1-MyBatis高级" class="headerlink" title="1. MyBatis高级"></a>1. MyBatis高级</h3><blockquote>
<p>注意点：</p>
<ul>
<li><p>数据库的字段列表 和 实体类的属性名称不一样  ，则不能自动封装数据</p>
<ul>
<li><p>其别名   </p>
<p><strong>as</strong>  :对不一样的列名起别名，让别名和实体类的属性名一致</p>
<p>每次查询都要定义一次别名</p>
<p><strong>sql片段</strong>：不灵活</p>
<p><strong>resultMap</strong>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"brandResultMap"</span> <span class="attr">type</span>=<span class="string">"Brand"</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        id：主键映射  名称</span></span><br><span class="line"><span class="comment">            * column  不一致的名称</span></span><br><span class="line"><span class="comment">            * roperty   需要映射的名称</span></span><br><span class="line"><span class="comment">        result：一般键 映射</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"brand_name"</span> <span class="attr">property</span>=<span class="string">"brandName"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"company_Name"</span> <span class="attr">property</span>=<span class="string">"companyName"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="1-1-查询"><a href="#1-1-查询" class="headerlink" title="1.1 查询"></a>1.1 查询</h4><blockquote>
<p><strong>全查询</strong>:注意数据库的字段列表 和 实体类的属性名称保持一致</p>
<p><strong>单条件查询</strong>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&gt;#&#123;&#125;： 防止SQL注入 - -参数传递    如果只有一个参数叫什么都可以，多个参数遵循字段列名</span></span><br><span class="line"><span class="comment">&gt;$&#123;&#125;: 拼SQL，存在诸如问题  -  - 表面或者列名不固定的时候</span></span><br><span class="line"><span class="comment">&gt;参数类型：parameterType 指定参数的数据类型 可以省略</span></span><br><span class="line"><span class="comment">&gt;特殊字符： 转义字符       CDATA区  &lt;![CDATA[ 比较字符 ]]&gt; </span></span><br><span class="line"><span class="comment">&gt;--&gt;</span></span><br><span class="line">&gt;<span class="comment">&lt;!--单条件查询--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectID"</span> <span class="attr">resultMap</span>=<span class="string">"brandResultMap"</span>&gt;</span></span><br><span class="line">  select * from $&#123;tb_brand&#125; where id = #&#123;id&#125;;</span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>多条件查询</strong>：</p>
<p>接口设置三种方式：</p>
<ul>
<li>@param注解          使用比较麻烦</li>
<li>实体类封装          多个相关联数据</li>
<li>map封装         多个不相关联数据</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//    多条件查询</span></span><br><span class="line">&gt;<span class="comment">//	@Param("SQL参数占位符名称")  </span></span><br><span class="line">  <span class="function">List&lt;Brand&gt; <span class="title">selectBymulti</span><span class="params">(@Param(<span class="string">"status"</span>)</span> <span class="keyword">int</span> status,</span></span><br><span class="line"><span class="function">                            @<span class="title">Param</span><span class="params">(<span class="string">"companyName"</span>)</span> String companyName,</span></span><br><span class="line"><span class="function">                            @<span class="title">Param</span><span class="params">(<span class="string">"brandName"</span>)</span> String brandName)</span>;</span><br><span class="line">  <span class="function">List&lt;Brand&gt; <span class="title">selectBymulti</span> <span class="params">(Brand brand)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function">List&lt;Brand&gt; <span class="title">selectBymulti</span> <span class="params">(Map map)</span></span>;</span><br><span class="line">&lt;!-- 测试类map添加--&gt;</span><br><span class="line">  &lt;!--保证SQL参数和map参数的键的名称对应上 --&gt;</span><br><span class="line">   Map map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">   map.put(<span class="string">"status"</span>, status);    </span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectBymulti"</span> <span class="attr">resultMap</span>=<span class="string">"brandResultMap"</span>&gt;</span></span><br><span class="line">        select * from</span><br><span class="line">        tb_brand</span><br><span class="line">        where status = #&#123;status&#125;  <span class="comment">&lt;!-- 参数占位符和字段列表名一致--&gt;</span></span><br><span class="line">        and company_name like #&#123;companyName&#125;</span><br><span class="line">        and brand_name like #&#123;brandName&#125;;</span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>动态多条件查询</strong>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--动态多条件查询</span></span><br><span class="line"><span class="comment">       * if ：条件判断</span></span><br><span class="line"><span class="comment">           test :逻辑表达语句</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectBymulti"</span> <span class="attr">resultMap</span>=<span class="string">"brandResultMap"</span>&gt;</span></span><br><span class="line">      select * from</span><br><span class="line">      tb_brand</span><br><span class="line">     <span class="comment">&lt;!--where 1 = 1 恒等式  第一个不存在条件--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">where</span>&gt;</span>-- Mybatis的包装Where和sql的where语句一致，会自动等判断 是否有 and</span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"status != null"</span>&gt;</span></span><br><span class="line">              and status = #&#123;status&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"companyName != null and companyName != '' "</span>&gt;</span></span><br><span class="line">              and company_name like #&#123;companyName&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"brandName != null and brandName != '' "</span>&gt;</span></span><br><span class="line">              and brand_name like #&#123;brandName&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>动态单条件查询</strong>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectBySingle"</span> <span class="attr">resultMap</span>=<span class="string">"brandResultMap"</span>&gt;</span></span><br><span class="line">       select * from tb_brand</span><br><span class="line">       <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"status != null"</span>&gt;</span></span><br><span class="line">                   status = #&#123;status&#125;</span><br><span class="line">               <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"companyName != null and companyName != '' "</span>&gt;</span></span><br><span class="line">                   company_name like #&#123;companyName&#125;</span><br><span class="line">               <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"brandName != null and brandName != '' "</span>&gt;</span></span><br><span class="line">                   brand_name like #&#123;brandName&#125;</span><br><span class="line">               <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="1-2-添加"><a href="#1-2-添加" class="headerlink" title="1.2 添加"></a>1.2 添加</h4><blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--可以返回主键</span></span><br><span class="line"><span class="comment">实现新增功能 ，需要添加   useGeneratedKeys="true" keyProperty="id"</span></span><br><span class="line"><span class="comment">&gt;--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"add"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">     insert into tb_brand (brand_name, company_name, ordered, description, status)</span><br><span class="line">     values (#&#123;brandName&#125;,#&#123;companyName&#125;,#&#123;ordered&#125;,#&#123;description&#125;,#&#123;status&#125;)</span><br><span class="line">   <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="1-3-修改"><a href="#1-3-修改" class="headerlink" title="1.3 修改"></a>1.3 修改</h4><blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--动态修改--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updata"</span>&gt;</span></span><br><span class="line">       update tb_brand</span><br><span class="line">       <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"status != null"</span>&gt;</span></span><br><span class="line">               brand_name = #&#123;brandName&#125;,</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"companyName != null and companyName != '' "</span>&gt;</span></span><br><span class="line">               company_name = #&#123;companyName&#125;,</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"brandName != null and brandName != '' "</span>&gt;</span></span><br><span class="line">               brand_name = #&#123;brandName&#125;,</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"ordered != null "</span>&gt;</span></span><br><span class="line">               ordered = #&#123;ordered&#125;,</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"description != null and description != '' "</span>&gt;</span></span><br><span class="line">               description = #&#123;description&#125;,</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"status != null and status != '' "</span>&gt;</span></span><br><span class="line">               status = #&#123;status&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">       where id = #&#123;id&#125;;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="1-4-删除"><a href="#1-4-删除" class="headerlink" title="1.4 删除"></a>1.4 删除</h4><blockquote>
<p><strong>单个删除：</strong>添加单个参数即可</p>
<p><strong>批量删除：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!-- 批量删除 --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deletByIds"</span>&gt;</span></span><br><span class="line">       delete from tb_brand where id in</span><br><span class="line">       <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"ids"</span> <span class="attr">item</span>=<span class="string">"id"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">close</span>=<span class="string">")"</span>&gt;</span></span><br><span class="line">           #&#123;id&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">           </span><br><span class="line">&gt;<span class="comment">&lt;!-- 接口 --&gt;</span></span><br><span class="line">//  批量删除</span><br><span class="line">   //  可以是数组也可以是集合</span><br><span class="line">   void deletByIds(@Param("ids")int[] ids);</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="1-5-注解开发"><a href="#1-5-注解开发" class="headerlink" title="1.5 注解开发"></a>1.5 注解开发</h4><blockquote>
<ul>
<li>查询：@Select</li>
<li>添加：@Insert</li>
<li>修改：@Updata</li>
<li>删除：@Delete</li>
</ul>
<p>注解完成简单功能</p>
<p>配置文件复杂功能</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Select</span>(value = <span class="string">"select * from tb_user where id = #&#123;id&#125;"</span>)</span><br><span class="line">&gt;<span class="function"><span class="keyword">public</span> User <span class="title">select</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>

</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/28/Day05_MyBatis%E9%AB%98%E7%BA%A7/" data-id="ckvno4lie000mggue91wnb4i3"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-Web/" rel="tag">Java Web</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Day04_Maven和MyBatis" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/20/Day04_Maven%E5%92%8CMyBatis/"
    >Maven和MyBatis</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/20/Day04_Maven%E5%92%8CMyBatis/" class="article-date">
  <time datetime="2021-10-20T10:16:49.000Z" itemprop="datePublished">2021-10-20</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-Maven"><a href="#1-Maven" class="headerlink" title="1. Maven"></a>1. Maven</h3><h4 id="1-1-Maven概述"><a href="#1-1-Maven概述" class="headerlink" title="1.1 Maven概述"></a>1.1 Maven概述</h4><blockquote>
<p>Maven是专门用于管理好构建Java的项目的工具</p>
<p>管理依赖</p>
<p>主要功能：</p>
<ul>
<li>提供了一套标准haul的项目机构</li>
<li>提供了一套标准化的构建流程（编译、测试、打包、发布。。）</li>
<li>提供了一套依赖管理机制</li>
</ul>
<p>界面详情：</p>
<p><img src="E:%5CHEIMA%5CNOTE/MySQL/image/Maven-%E7%95%8C%E9%9D%A2.png" alt=""></p>
<p>仓库分类：</p>
<ul>
<li>本地仓库：自己计算机上的目录</li>
<li>中央仓库：Maven团队维护的全球唯一仓库  <a href="https://repo1.maven.org/maven2/" target="_blank" rel="noopener">https://repo1.maven.org/maven2/</a></li>
<li>远程仓库（私服）：公司团队搭建的私有仓库</li>
</ul>
<p>本地项目导入驱动jar包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--pom.xml--&gt;</span></span><br><span class="line">&gt;<span class="comment">&lt;!--mysql服务--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.46<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="1-2-Maven的使用"><a href="#1-2-Maven的使用" class="headerlink" title="1.2 Maven的使用"></a>1.2 Maven的使用</h4><blockquote>
<p>maven生命周期</p>
<ul>
<li>Maven构建项目生命周期描述的是一次构建过程经历多少事件</li>
<li>Maven对项目构建的生命周期划分为3套</li>
<li>clean：清理工作</li>
<li>default：核心工作，例如编译、测试、打包、安装等</li>
<li>site：产生报告，发布站点</li>
</ul>
<p>==同一生命周期内，执行后边的命令，前面的所有命令会自动执行==</p>
<p>Maven坐标详解</p>
<p>坐标：</p>
<ul>
<li>Maven中的坐标是资源的唯一标识</li>
<li>使用坐标来定义项目或引用项目中需要的依赖</li>
</ul>
<p>坐标组成：</p>
<ul>
<li>grould：当前Maven项目隶属组织名称</li>
<li>artifactId：当前项目名称</li>
<li>version：定义当前项目版本号</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!-- 驱动名称 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!-- 驱动目录地址 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--驱动版本号  --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.46<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>


</blockquote>
<h3 id="2-Mybatis"><a href="#2-Mybatis" class="headerlink" title="2. Mybatis"></a>2. Mybatis</h3><h5 id="2-1-基本概述"><a href="#2-1-基本概述" class="headerlink" title="2.1 基本概述"></a>2.1 基本概述</h5><blockquote>
<ul>
<li>MyBatis是一款优秀的持久层框架，用于简化JDBC开发</li>
</ul>
<p><strong>持久层</strong></p>
<ul>
<li>负责将数据保存到数据库的那一层代码</li>
<li>JavaEE三层架构：表现层、业务层、持久层</li>
</ul>
<h5 id="JavaEE三层"><a href="#JavaEE三层" class="headerlink" title="JavaEE三层"></a>JavaEE三层</h5><ul>
<li>表现层</li>
<li>业务层</li>
<li>持久层</li>
</ul>
<h5 id="框架："><a href="#框架：" class="headerlink" title="框架："></a>框架：</h5><ul>
<li>框架是一个半成品软件，是一套可重用，通用的、软件基础代码模型</li>
<li>在框架的基础之上构建软件编写更加高效、规范、通用、可拓展</li>
</ul>
<h5 id="MyBatis简化"><a href="#MyBatis简化" class="headerlink" title="MyBatis简化"></a>MyBatis简化</h5><ul>
<li><p>硬编码</p>
<ul>
<li>注册驱动，获取连接</li>
<li>SQL语句</li>
</ul>
</li>
<li><p>操作繁琐</p>
<ul>
<li>手动设置参数</li>
<li>手动封装对象</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="2-1-MyBatis的使用"><a href="#2-1-MyBatis的使用" class="headerlink" title="2.1 MyBatis的使用"></a>2.1 MyBatis的使用</h5><blockquote>
<h4 id="1-创建数据表，导入驱动jar包，定义POJO类"><a href="#1-创建数据表，导入驱动jar包，定义POJO类" class="headerlink" title="1. 创建数据表，导入驱动jar包，定义POJO类"></a>1. 创建数据表，导入驱动jar包，定义POJO类</h4><h4 id="2-配置MyBatis的配置文件"><a href="#2-配置MyBatis的配置文件" class="headerlink" title="2. 配置MyBatis的配置文件"></a>2. 配置MyBatis的配置文件</h4><ul>
<li><strong>第一步</strong> ： 创建 mybatis-config.xml 核心配置文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--mybatis-config.xml --&gt;</span></span><br><span class="line">&gt;<span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line">&gt;<span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">       <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">       <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!--连接信息--&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">               <span class="comment">&lt;!--数据库地址--&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql:///day04_mybatis?useSSL = false"</span>/&gt;</span></span><br><span class="line">               <span class="comment">&lt;!--用户名密码--&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--加载sql的映射文件--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"UserMapper.xml"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>第二步</strong>   创建 UserMapper.xml 映射文件  命名：表名+Mapper</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--UserMapper.xml  映射文件 --&gt;</span> </span><br><span class="line">&gt;<span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line">&gt;<span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">       <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">       <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&gt;namepace:名称空间</span></span><br><span class="line"><span class="comment">&gt;--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectAll"</span> <span class="attr">resultType</span>=<span class="string">"pojo.User"</span>&gt;</span></span><br><span class="line">   select * from tb_user ;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>第三部   创建 logback.xml   日志配置文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       CONSOLE ：表示当前的日志信息是可以输出到控制台的。</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"Console"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>[%level] %blue(%d&#123;HH:mm:ss.SSS&#125;) %cyan([%thread]) %boldGreen(%logger&#123;15&#125;) - %msg %n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.itheima"</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     level:用来设置打印级别，大小写无关：TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF</span></span><br><span class="line"><span class="comment">    ， 默认debug</span></span><br><span class="line"><span class="comment">     &lt;root&gt;可以包含零个或多个&lt;appender-ref&gt;元素，标识这个输出位置将会被本日志级别控制。</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-测试代码-配置文件导入"><a href="#3-测试代码-配置文件导入" class="headerlink" title="3. 测试代码- 配置文件导入"></a>3. 测试代码- 配置文件导入</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">&gt;<span class="comment">//      构建 SqlSessionFactory  Mybatis实现配置好的，直接复制即可</span></span><br><span class="line">    <span class="comment">//  导入配置文件 创建对象</span></span><br><span class="line">       String resource = <span class="string">"mybatis-config.xml"</span>;</span><br><span class="line">       InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">       SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">    </span><br><span class="line">&gt;<span class="comment">//        获取SqlSession对象 执行sql</span></span><br><span class="line">       SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">&gt;<span class="comment">//        执行sql  SQL映射文件的名称空间地址</span></span><br><span class="line">       List&lt;User&gt; users = sqlSession.selectList(<span class="string">"test.selectAll"</span>);</span><br><span class="line">       </span><br><span class="line">       System.out.println(users);</span><br><span class="line">       </span><br><span class="line">       sqlSession.close();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

</blockquote>
<h3 id="3-Mapper"><a href="#3-Mapper" class="headerlink" title="3. Mapper"></a>3. Mapper</h3><blockquote>
<p>简化JDBC的框架</p>
<p>使用步骤：</p>
<ul>
<li>创建映射文件同名的接口，创建抽象方法，返回值和方法名保持一致</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">     <span class="function">List&lt;User&gt;  <span class="title">selectAll</span><span class="params">()</span></span>;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>接口文件和映射文件在编译后保证在同一文件夹，在resources文件下，创建==接口文件同层级的文件夹==将映像文件存入</p>
</li>
<li><p>修改核心配置文件mybatis-config.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--加载sql的映射文件--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/mapper/UserMapper.xml"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改映射文件UserMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">namepace:名称空间</span></span><br><span class="line"><span class="comment">注意点：namepace 必须 UserMapper全路径一致</span></span><br><span class="line"><span class="comment">注意点：接口中的方法名必须和id标识一致</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.mapper.UserMapper"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    select 执行的查询</span></span><br><span class="line"><span class="comment">    id  唯一标识</span></span><br><span class="line"><span class="comment">    namepace+id = sql 的绝对路径</span></span><br><span class="line"><span class="comment">    resultType 返回值的数据</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectAll"</span> <span class="attr">resultType</span>=<span class="string">"com.pojo.User"</span>&gt;</span></span><br><span class="line">       select * from tb_user ;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>测试文件执行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"><span class="comment">//      构建 SqlSessionFactory</span></span><br><span class="line">        String resource = <span class="string">"mybatis-config.xml"</span>;</span><br><span class="line">        InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">        SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line"><span class="comment">//        获取SqlSession对象 执行sql</span></span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">//        执行sql  SQL映射文件的名称空间地址</span></span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        List&lt;User&gt; users = mapper.selectAll();</span><br><span class="line">        </span><br><span class="line">        System.out.println(users);</span><br><span class="line"></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/20/Day04_Maven%E5%92%8CMyBatis/" data-id="ckvno4lig000oggue04eqfl9e"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-day03_JDBC" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/19/day03_JDBC/"
    >JDBC和连接池DUird</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/19/day03_JDBC/" class="article-date">
  <time datetime="2021-10-19T09:16:49.000Z" itemprop="datePublished">2021-10-19</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-JDBC"><a href="#1-JDBC" class="headerlink" title="1. JDBC"></a>1. JDBC</h3><h4 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a>1.1 概述</h4><blockquote>
<ul>
<li>JDBC就是使用Java语言操作关系型数据库的一套API</li>
</ul>
<p>好处：</p>
<ul>
<li>各数据库厂商使用相同的接口，Java代码不需要针对不数据库分别开发</li>
<li>可随时替代底层数据库，访问数据库的Java代码基本不变</li>
</ul>
</blockquote>
<h5 id="1-2-基本使用"><a href="#1-2-基本使用" class="headerlink" title="1.2 基本使用"></a>1.2 基本使用</h5><blockquote>
<p>DML的使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        注册驱动</span></span><br><span class="line">       Class.forName(<span class="string">"mysql.JDBC"</span>);</span><br><span class="line">&gt;<span class="comment">//        获取连接</span></span><br><span class="line"> <span class="built_in">String</span> url = <span class="string">"jdbc:mysql://127.0.0.1:3306/demotest"</span>;</span><br><span class="line">       <span class="built_in">String</span> username = <span class="string">"root"</span>;</span><br><span class="line">       <span class="built_in">String</span> passwored = <span class="string">"root"</span>;</span><br><span class="line">       Connection conn = DriverManager.getConnection(url, username, passwored);</span><br><span class="line">&gt;<span class="comment">//        定义SQL语句</span></span><br><span class="line"> <span class="built_in">String</span> sql = <span class="string">"UPDATE stu set age = 22 WHERE id =1 "</span>;</span><br><span class="line">&gt;<span class="comment">//        获取执行SQL对象</span></span><br><span class="line">       Statement stmt = conn.createStatement();</span><br><span class="line">&gt;<span class="comment">//        执行SQL</span></span><br><span class="line">       int count = stmt.executeUpdate(sql);</span><br><span class="line">&gt;<span class="comment">//        返回结果</span></span><br><span class="line">       System.out.println(count);</span><br><span class="line">&gt;<span class="comment">//        结束资源</span></span><br><span class="line">       stmt.close();</span><br><span class="line">       conn.close();</span><br></pre></td></tr></table></figure>

<p>DQL的使用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//        注册驱动</span></span><br><span class="line">       Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">&gt;<span class="comment">//        获取连接  </span></span><br><span class="line">&gt;<span class="comment">// 		默认本机端口 可以省略jdbc:mysql:///demotest</span></span><br><span class="line">       String url = <span class="string">"jdbc:mysql://127.0.0.1:3306/demotest"</span>;</span><br><span class="line">       String username = <span class="string">"root"</span>;</span><br><span class="line">       String password = <span class="string">"root"</span>;</span><br><span class="line">       Connection conn = DriverManager.getConnection(url, username, password);</span><br><span class="line">&gt;<span class="comment">//        定义SQL语句  DML</span></span><br><span class="line">       String sql = <span class="string">"UPDATE stu set age = 44 WHERE id =1 "</span>;</span><br><span class="line">&gt;<span class="comment">//        DQL</span></span><br><span class="line">       String sql1 = <span class="string">"SELECT * FROM stu"</span>;</span><br><span class="line">&gt;<span class="comment">//        创建对象</span></span><br><span class="line">       Statement stmt = conn.createStatement();</span><br><span class="line">&gt;<span class="comment">//        执行语句</span></span><br><span class="line">       <span class="keyword">int</span> i = stmt.executeUpdate(sql);</span><br><span class="line">       ResultSet resultSet = stmt.executeQuery(sql1);</span><br><span class="line">&gt;<span class="comment">//        处理结果</span></span><br><span class="line">       <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">&gt;<span class="comment">//            设置参数</span></span><br><span class="line">           String id = resultSet.getString(<span class="number">1</span>);</span><br><span class="line">           String name = resultSet.getString(<span class="number">2</span>);</span><br><span class="line">           String age = resultSet.getString(<span class="number">3</span>);</span><br><span class="line">           String sex = resultSet.getString(<span class="number">4</span>);</span><br><span class="line">           String address = resultSet.getString(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">           System.out.println(id);</span><br><span class="line">           System.out.println(name);</span><br><span class="line">           System.out.println(age);</span><br><span class="line">           System.out.println(sex);</span><br><span class="line">           System.out.println(address);</span><br><span class="line"></span><br><span class="line">     System.out.println(<span class="string">"------------------------"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       System.out.println(i);</span><br><span class="line">&gt;<span class="comment">//        关闭资源</span></span><br><span class="line">       resultSet.close();</span><br><span class="line">       stmt.close();</span><br><span class="line">       conn.close();</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="1-3-JDBC-API"><a href="#1-3-JDBC-API" class="headerlink" title="1.3 JDBC API"></a>1.3 JDBC API</h4><blockquote>
<p>（1）DriverManager（驱动管理类）作用</p>
<ul>
<li><p>注册驱动</p>
</li>
<li><p>获取数据库连接</p>
<ul>
<li><pre><code class="java">jdbc:mysql:<span class="comment">//ip:端口/数据库名？自定义参数</span>
&lt;!--￼<span class="number">2</span>--&gt;</code></pre>
</li>
<li><p>预编译SQL的执行SQL对象：防止SQL注入</p>
</li>
<li><pre><code class="java"><span class="function">PrepareStatement <span class="title">prepareStatement</span><span class="params">(sql)</span> </span>
<span class="function"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 执行存储过程对象</span><br><span class="line"></span><br><span class="line">- &#96;&#96;&#96;java</span><br><span class="line">  CallableStatement prepareCall(sql)</span><br></pre></td></tr></table></figure></span></code></pre>
</li>
</ul>
</li>
<li><p>事务管理</p>
<ul>
<li><p>MySQL事务管理</p>
</li>
<li><p>JDBC事务管理</p>
</li>
<li><pre><code>// true  自动提交 false 手动提交
开启事务：   conn.setAutoCommit(bolean autoCommit);
提交事务：    commit()
回滚事务：    rollback()
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#96;&#96;&#96;java</span><br><span class="line">        try &#123;</span><br><span class="line">&#x2F;&#x2F;            开启事务  手动开启</span><br><span class="line">            conn.setAutoCommit(false);</span><br><span class="line">&#x2F;&#x2F;        执行SQL</span><br><span class="line">            int count &#x3D; stmt.executeUpdate(sql);</span><br><span class="line">&#x2F;&#x2F;        返回结果</span><br><span class="line">            System.out.println(count &gt; 0);</span><br><span class="line">&#x2F;&#x2F;            提交事务</span><br><span class="line">            conn.commit();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">&#x2F;&#x2F;            回滚事务</span><br><span class="line">            conn.rollback();</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
</code></pre></li>
</ul>
</li>
</ul>
<p>（3）Statement</p>
<ul>
<li><p>执行DDL、DML</p>
<ul>
<li><pre><code class="java"><span class="function"><span class="keyword">int</span> <span class="title">executeUpdate</span><span class="params">(sql)</span></span>
<span class="function"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 执行DQL</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;java</span><br><span class="line">    ResultSet  stmt.executeQuery(sql)</span><br></pre></td></tr></table></figure></span>
<span class="function"></span></code></pre>
</li>
</ul>
</li>
</ul>
<p>（4）ResultSet(结果集对象)</p>
<ul>
<li><p>ResultSet作用</p>
</li>
<li><p>获取查询结果</p>
<ul>
<li><pre><code class="javascript">boolean next():（<span class="number">1</span>）光标从当前位置向前移动一行 （<span class="number">2</span>）判断当前行是否为有效行
    返回值：
     - <span class="literal">true</span>：有效行，当前行有数据
     - <span class="literal">false</span>：无效行，当前没有数据
&lt;!--￼<span class="number">6</span>--&gt;
</code></pre>
</li>
</ul>
</li>
</ul>
<p>（5）PreparedStatement</p>
<p>sql注入：==’ ‘ or ‘1’ =  ‘ 1==</p>
<ul>
<li>PreparedStatament 作用<ul>
<li>预编译SQL并执行SQL</li>
<li>防止SQL注入：将铭感字符进行转义</li>
</ul>
</li>
<li>PreparedStatament  预编译功能开启：useServerPrepStmts = true；</li>
<li>PreparedStatament原理<ul>
<li>在获取PreparedStatament对象时，将sql语句发送给mysql服务器进行检查，编译（这些步骤耗时）</li>
<li>执行时就不用再进行步骤了，速度更快</li>
<li>如果sql模块一样，则只需要进行一次检查、编译</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="2-数据库连接池"><a href="#2-数据库连接池" class="headerlink" title="2.数据库连接池"></a>2.数据库连接池</h3><h5 id="2-1-数据库概述"><a href="#2-1-数据库概述" class="headerlink" title="2.1 数据库概述"></a>2.1 数据库概述</h5><blockquote>
<p>简介;</p>
<ul>
<li>数据库连接池是个容器，负责分配，管理数据库连接</li>
<li>她允许应用程序重复使用一个现有的数据库连接，而不是再重新建立一个</li>
<li>释放空间时间超过最大空闲时间的数据连接来避免因为没有释放数据库连接而引起的数据库连接遗漏</li>
</ul>
<p>好处：</p>
<ul>
<li>资源再用</li>
<li>提升系统响应速度</li>
<li>避免数据库连接遗漏</li>
</ul>
</blockquote>
<h5 id="2-2-数据库实现"><a href="#2-2-数据库实现" class="headerlink" title="2.2 数据库实现"></a>2.2 数据库实现</h5><blockquote>
<p>标准接口：DataSource</p>
<ul>
<li><p>官方（SUN）提供的数据库连接池标准接口，由第三方组织实现此接口</p>
</li>
<li><p>功能：获取连接</p>
<ul>
<li><pre><code class="java">Connection getDConnection
&lt;!--￼<span class="number">7</span>--&gt;
</code></pre>
</li>
</ul>
</li>
</ul>
</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/19/day03_JDBC/" data-id="ckvno4lir0018ggueb3s45i0x"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Day02_MySQL高级" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/17/Day02_MySQL%E9%AB%98%E7%BA%A7/"
    >MySQL高级</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/17/Day02_MySQL%E9%AB%98%E7%BA%A7/" class="article-date">
  <time datetime="2021-10-17T14:19:19.000Z" itemprop="datePublished">2021-10-17</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-MySQL高级"><a href="#1-MySQL高级" class="headerlink" title="1. MySQL高级"></a>1. MySQL高级</h3><h4 id="1-1约束"><a href="#1-1约束" class="headerlink" title="1.1约束"></a>1.1约束</h4><h5 id="1-1-1-基础概念"><a href="#1-1-1-基础概念" class="headerlink" title="1.1.1 基础概念"></a>1.1.1 基础概念</h5><blockquote>
<p>约束：</p>
<ul>
<li>约束是作用于表中列上的规则，用于限定加入表的数据</li>
<li>约束的存在保存数据库中数据的正确性、有效性和完整性</li>
</ul>
<p>约束的分类：</p>
<table>
<thead>
<tr>
<th>约束名称</th>
<th>描述</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>非空约束</td>
<td>保证列中所有数据不能有null值</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>唯一约束</td>
<td>保证列中所有数据各不相同</td>
<td>UNIQUE</td>
</tr>
<tr>
<td>主键约束</td>
<td>主键是一行数据的唯一表示，要求非空白且唯一</td>
<td>PRIMARY KEY</td>
</tr>
<tr>
<td>检查约束</td>
<td>保障列中的值满足某一条件</td>
<td>CHECK</td>
</tr>
<tr>
<td>默认约束</td>
<td>保存数据时，未指定值则采用默认值</td>
<td>DEFAULT</td>
</tr>
<tr>
<td>外键约束</td>
<td>外键用来让两个表的数据之间建立连接，保证数据的一致性和完整性</td>
<td>FOREIGN KEY</td>
</tr>
</tbody></table>
<p>Tips：MySQL不支持检查约束</p>
</blockquote>
<h5 id="1-2-外键约束"><a href="#1-2-外键约束" class="headerlink" title="1.2 外键约束"></a>1.2 外键约束</h5><blockquote>
<p>概念：</p>
<ul>
<li>外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性</li>
</ul>
<p>语法：</p>
<p>（1）添加外键约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;CREATE TABLE 表名（</span><br><span class="line">列名 数据类型；</span><br><span class="line">..</span><br><span class="line">##小括号不要忘记</span><br><span class="line">[CONSTRAINT] [外键名称] FOREIGN KEY (外键列名) REFERENCES 主表（主表列名）</span><br><span class="line">&gt;）</span><br></pre></td></tr></table></figure>

<p>（2）建表后添加外键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;ALTER TABLE 表名 ADD CONSTRAINT 外键名 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主列表名称);</span><br></pre></td></tr></table></figure>

<p>（3）删除约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;alter table 表名 drop FOREIGN key 外键名;</span><br></pre></td></tr></table></figure>



<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;-- 删除表</span><br><span class="line">&gt;DROP TABLE IF EXISTS emp;</span><br><span class="line">&gt;DROP TABLE IF EXISTS dept;</span><br><span class="line"></span><br><span class="line">&gt;-- 部门表</span><br><span class="line">&gt;CREATE TABLE dept(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">dep_name varchar(20),</span><br><span class="line">addr varchar(20)</span><br><span class="line">&gt;);</span><br><span class="line">&gt;-- 员工表 </span><br><span class="line">&gt;CREATE TABLE emp(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(20),</span><br><span class="line">age int,</span><br><span class="line">dep_id int,</span><br><span class="line"></span><br><span class="line">-- 添加外键 dep_id,关联 dept 表的id主键</span><br><span class="line">	CONSTRAINT fk_emp_dept FOREIGN KEY (dep_id) REFERENCES dept(id)</span><br><span class="line">&gt;);</span><br><span class="line"></span><br><span class="line">&gt;-- 添加 2 个部门</span><br><span class="line">&gt;insert into dept(dep_name,addr) values</span><br><span class="line">&gt;(&#39;研发部&#39;,&#39;广州&#39;),(&#39;销售部&#39;, &#39;深圳&#39;);</span><br><span class="line"></span><br><span class="line">&gt;-- 添加员工,dep_id 表示员工所在的部门</span><br><span class="line">&gt;INSERT INTO emp (NAME, age, dep_id) VALUES </span><br><span class="line">&gt;(&#39;张三&#39;, 20, 1),</span><br><span class="line">&gt;(&#39;李四&#39;, 20, 1),</span><br><span class="line">&gt;(&#39;王五&#39;, 20, 1),</span><br><span class="line">&gt;(&#39;赵六&#39;, 20, 2),</span><br><span class="line">&gt;(&#39;孙七&#39;, 22, 2),</span><br><span class="line">&gt;(&#39;周八&#39;, 18, 2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;-- 删除外键</span><br><span class="line">&gt;alter table emp drop FOREIGN key fk_emp_dept;</span><br><span class="line"></span><br><span class="line">&gt;-- 添加外键</span><br><span class="line">&gt;ALTER TABLE emp ADD CONSTRAINT fk_emp_dept FOREIGN KEY (dep_id) REFERENCES dept(id);</span><br></pre></td></tr></table></figure>


</blockquote>
<h5 id="1-2-数据库设计"><a href="#1-2-数据库设计" class="headerlink" title="1.2 数据库设计"></a>1.2 数据库设计</h5><blockquote>
<p>概念：</p>
<ul>
<li>数据库设计就是根据业务系统的具体需求，结合我们所选的DBMS，为这个业务系统构造出最优的数据存储模型</li>
<li>建立数据库中的表结构以及表于表之间的关联关系的过程</li>
</ul>
<p>设计步骤：</p>
<ul>
<li><p>需求分析 ：数据是什么？数据具有哪些属性，属性和数据的特点是什么</p>
</li>
<li><p>逻辑分析：通过ER图对数据库进行裸机建模，不需要考虑所有选用的数据管理系统</p>
</li>
<li><p>物理设计：根据数据库自身的特点把裸机设计转换成物理设计</p>
</li>
<li><p>维护设计：对新的需求进行建模，表优化</p>
</li>
</ul>
<h5 id="表关系"><a href="#表关系" class="headerlink" title="表关系"></a><strong>表关系</strong></h5><ul>
<li>一对一<ul>
<li>用户和用户</li>
<li>一对一关系多用于表拆分</li>
<li>实现方式：在任意一方建立外键，关联对方主键，并设置外键唯一</li>
</ul>
</li>
<li>一对多（多对一）<ul>
<li>部门 和 员工</li>
<li>一个部门对应多个员工，一个员工对应一个部门</li>
<li>实现方式：在多的一方建立外键关联一的一方主键</li>
</ul>
</li>
<li>多对多<ul>
<li>商品 和 订单</li>
<li>一个商品对应多个订单，一个订单包含多个商品</li>
<li>实现方式：建立第三张中间表，中间表至少包含2个外键，分别关联双方主键</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="1-3-多表查询"><a href="#1-3-多表查询" class="headerlink" title="1.3 多表查询"></a>1.3 多表查询</h5><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;SELECT * FROM emp,dept;</span><br><span class="line">&gt;-- 笛卡尔积：有A、B两个集合，取A、B所有的组合情况</span><br></pre></td></tr></table></figure>



<p><strong>连接查询：</strong></p>
<ul>
<li>内连接：相当于查询AB交集数据</li>
<li>外连接<ul>
<li>左外连接：相当于查询A表所有数据和交际部分数据</li>
<li>右外连接：相当于查询B表所有数据和交际部分数据</li>
</ul>
</li>
</ul>
<p><strong>子查询：</strong></p>
</blockquote>
<h6 id="1-3-1-连接查询"><a href="#1-3-1-连接查询" class="headerlink" title="1.3.1 连接查询"></a>1.3.1 连接查询</h6><blockquote>
<p>内连接：</p>
<ul>
<li><p>格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 隐式内连接</span><br><span class="line">SELECT 字段列表 FROM 表1,表2… WHERE 条件;</span><br><span class="line"></span><br><span class="line">-- 显示内连接</span><br><span class="line">SELECT 字段列表 FROM 表1 [INNER] JOIN 表2 ON 条件;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>外连接：</p>
<ul>
<li><p>格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 左外连接</span><br><span class="line">SELECT 字段列表 FROM 表1 LEFT [OUTER] JOIN 表2 ON 条件;</span><br><span class="line"></span><br><span class="line">-- 右外连接</span><br><span class="line">SELECT 字段列表 FROM 表1 RIGHT [OUTER] JOIN 表2 ON 条件;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;&#x2F;*</span><br><span class="line"></span><br><span class="line">&gt;-- 连接查询</span><br><span class="line">内连接</span><br><span class="line">外连接</span><br><span class="line">&gt;-- 	子查询</span><br><span class="line"></span><br><span class="line">&gt;*&#x2F;</span><br><span class="line"></span><br><span class="line">&gt;-- 内连接 隐式</span><br><span class="line"></span><br><span class="line">&gt;SELECT * FROM dept,emp WHERE emp.dep_id &#x3D; dept.id;</span><br><span class="line"></span><br><span class="line">&gt;-- 内连接 显式</span><br><span class="line"></span><br><span class="line">&gt;SELECT * FROM emp INNER JOIN dept on emp.dep_id &#x3D; dept.id;</span><br><span class="line"></span><br><span class="line">&gt;-- 外连接  左  查询左边的所有 以及交集</span><br><span class="line">&gt;SELECT *FROM emp LEFT JOIN dept ON emp.dep_id &#x3D; dept.id;</span><br><span class="line"></span><br><span class="line">&gt;-- 外连接  右		查询右边边的所有 以及交集</span><br><span class="line">&gt;SELECT *FROM emp RIGHT JOIN dept ON emp.dep_id &#x3D; dept.id;</span><br></pre></td></tr></table></figure>
</blockquote>
<h6 id="1-3-2-子查询"><a href="#1-3-2-子查询" class="headerlink" title="1.3.2 子查询"></a>1.3.2 子查询</h6><blockquote>
<p>概念： 查询中嵌套查询</p>
<p>根据查询结果不同，作用不同：</p>
<ul>
<li>单行单列 ：作为条件值，使用= != &gt; &lt; 等进行条件判断</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;SELECT 字段列表 FROM 表 WHERE 字段名 &#x3D; (子查询)；</span><br></pre></td></tr></table></figure>

<ul>
<li>多行单列 ：作为条件值，使用in等关键字进行条件判断</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;SELECT 字段列表 FROM 表 WHERE 字段名 in (子查询)；</span><br></pre></td></tr></table></figure>

<ul>
<li>多行多列 ：作为虚拟表</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;SELECT 字段列表 FROM (子查询) WHERE 条件；</span><br></pre></td></tr></table></figure>
</blockquote>
<p>1.4 事务</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/17/Day02_MySQL%E9%AB%98%E7%BA%A7/" data-id="ckvno4lij000rggue7yvx06h8"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Day01_MySQL和Navicat" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/16/Day01_MySQL%E5%92%8CNavicat/"
    >MySQL基础</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/16/Day01_MySQL%E5%92%8CNavicat/" class="article-date">
  <time datetime="2021-10-16T13:19:19.000Z" itemprop="datePublished">2021-10-16</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-数据库"><a href="#1-数据库" class="headerlink" title="1. 数据库"></a>1. 数据库</h3><h4 id="1-1-数据库相关概念"><a href="#1-1-数据库相关概念" class="headerlink" title="1.1 数据库相关概念"></a>1.1 数据库相关概念</h4><blockquote>
<p>数据库：</p>
<ul>
<li>存储数据的仓库，数据是有组织的进行存储</li>
<li>英文：DataBase ，简称DB</li>
</ul>
<p>数据库管理系统：</p>
<ul>
<li>管理数据库的大型软件</li>
<li>英文：DataBase Management System，简称 DBMS</li>
</ul>
<p>SQL：</p>
<ul>
<li>英文：Structured Query Language，简称 SQL，结构化查询语言</li>
<li>操作关系型数据库的编程语言</li>
<li>定义操作所有关系型数据库的统一标准</li>
</ul>
</blockquote>
<h4 id="1-2-SQ分类"><a href="#1-2-SQ分类" class="headerlink" title="1.2 SQ分类"></a>1.2 SQ分类</h4><blockquote>
<p>DDL:操作数据库、表</p>
<p>DML:操作表中数据的增删改</p>
<p>DQL:操作表中数据进行查询</p>
<p>DCL:对数据库中进行权限控制</p>
<p>基本语句：</p>
<p><strong>进入数据库</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;#mysql -u 用户名 -p 密码</span><br><span class="line">&gt;mysql -u root -p root</span><br></pre></td></tr></table></figure>

<p><strong>展示所有数据库</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;show databases;</span><br></pre></td></tr></table></figure>

<p><strong>进入使用数据库</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;use 数据库名；</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="1-3-DDL的语句"><a href="#1-3-DDL的语句" class="headerlink" title="1.3 DDL的语句:"></a>1.3 DDL的语句:</h4><blockquote>
<p><strong>查看表结构</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;desc 表名;</span><br></pre></td></tr></table></figure>

<p><strong>更换表名</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;ALTER TABLE 表名 RENAME TO 新的表名</span><br></pre></td></tr></table></figure>

<p><strong>添加一列</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;ALTER TABLE 表名 ADD 列名  数据类型；</span><br></pre></td></tr></table></figure>

<p><strong>修改数据类型</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 MODIFY 列名 新数据类型；</span><br></pre></td></tr></table></figure>

<p><strong>修改列名和数据类型</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 CHANGE 列名 新列名 新数据类型；</span><br></pre></td></tr></table></figure>

<p><strong>删除列</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 DROP 列名</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="1-4-DML的语句"><a href="#1-4-DML的语句" class="headerlink" title="1.4 DML的语句"></a>1.4 DML的语句</h4><blockquote>
<p><strong>查看所有数据</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 查看所有数据</span><br><span class="line">&gt;SELECT * from stu;</span><br></pre></td></tr></table></figure>



<p><strong>添加指定列数据</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 添加指定列数据 表名（列名1，列名2） VALUES (值1，值2。。)</span><br><span class="line">&gt;INSERT INTO stu(id,&#96;name&#96;,age,sex) VALUES (11,&#39;张三&#39;,10,&#39;男&#39;);</span><br></pre></td></tr></table></figure>

<p><strong>给全部列添加数据</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 给全部列添加数据</span><br><span class="line">&gt;-- 给所有列添加数据，列名的列表可以省略的</span><br><span class="line">&gt;INSERT INTO tb_user (id,&#96;name&#96;,sex,birthday,sroce,emile,tell,state) VALUES (2,&#39;李四&#39;,&#39;男&#39;,&#39;1999-11-11&#39;,88.88,&#39;lisi@itcast.cn&#39;,&#39;13888888888&#39;,1);</span><br><span class="line"></span><br><span class="line">&gt;INSERT INTO tb_user VALUES (2,&#39;李四&#39;,&#39;男&#39;,&#39;1999-11-11&#39;,88.88,&#39;lisi@itcast.cn&#39;,&#39;13888888888&#39;,1);</span><br></pre></td></tr></table></figure>

<p><strong>批量添加数据</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 批量添加数据</span><br><span class="line">&gt;INSERT INTO tb_user VALUES </span><br><span class="line">(4,&#39;李四&#39;,&#39;男&#39;,&#39;1999-11-11&#39;,88.88,&#39;lisi@itcast.cn&#39;,&#39;13888888888&#39;,1),</span><br><span class="line">(5,&#39;李四&#39;,&#39;男&#39;,&#39;1999-11-11&#39;,88.88,&#39;lisi@itcast.cn&#39;,&#39;13888888888&#39;,1),</span><br><span class="line">(6,&#39;李四&#39;,&#39;男&#39;,&#39;1999-11-11&#39;,88.88,&#39;lisi@itcast.cn&#39;,&#39;13888888888&#39;,1);</span><br></pre></td></tr></table></figure>

<p><strong>删除数据</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 	删除表内数据</span><br><span class="line">&gt;DELETE FROM tb_user WHERE (条件)id &#x3D; 1;</span><br></pre></td></tr></table></figure>

<p><strong>删除表中所有的数据</strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;delete from 表名;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="1-5-DQL的语句"><a href="#1-5-DQL的语句" class="headerlink" title="1.5 DQL的语句"></a>1.5 DQL的语句</h4><blockquote>
<p>基础语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;SELECT </span><br><span class="line">   字段列表</span><br><span class="line">&gt;FROM </span><br><span class="line">   表名列表 </span><br><span class="line">&gt;WHERE </span><br><span class="line">   条件列表</span><br><span class="line">&gt;GROUP BY</span><br><span class="line">   分组字段</span><br><span class="line">&gt;HAVING</span><br><span class="line">   分组后条件</span><br><span class="line">&gt;ORDER BY</span><br><span class="line">   排序字段</span><br><span class="line">&gt;LIMIT</span><br><span class="line">   分页限定</span><br></pre></td></tr></table></figure>


</blockquote>
<h5 id="1-5-1-分组查询"><a href="#1-5-1-分组查询" class="headerlink" title="1.5.1 分组查询"></a>1.5.1 分组查询</h5><blockquote>
<p><strong>查询多个字段：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 查询多个字段</span><br><span class="line">&gt;SELECT * FROM tb_user;</span><br></pre></td></tr></table></figure>

<p> <strong>去除重复记录：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 去除重复记录</span><br><span class="line">&gt;SELECT DISTINCT &#96;name&#96; FROM tb_user;</span><br></pre></td></tr></table></figure>

<p><strong>起别名  as可以省略：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 起别名  as可以省略</span><br><span class="line">&gt;SELECT id as 学号,&#96;name&#96; as 姓名,sex AS 性别,birthday 出生月份 FROM tb_user;</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="1-5-2-条件查询"><a href="#1-5-2-条件查询" class="headerlink" title="1.5.2 条件查询"></a>1.5.2 条件查询</h5><blockquote>
<p>基本格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;SELECT 字段列表 FROM 表名 WHERE 条件列表;</span><br></pre></td></tr></table></figure>

<p><strong>条件</strong>：</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
</tr>
<tr>
<td>&lt;=</td>
<td>大于等于</td>
</tr>
<tr>
<td>=</td>
<td>等于</td>
</tr>
<tr>
<td>&lt;&gt; 或!=</td>
<td>不等于</td>
</tr>
<tr>
<td>BETWEEN..AND..</td>
<td>在某个范围之内</td>
</tr>
<tr>
<td>IN(..)</td>
<td>多选一</td>
</tr>
<tr>
<td>LIKE 占位符</td>
<td>模糊查询 %是多个任意字符</td>
</tr>
<tr>
<td>IS NULL</td>
<td>是null</td>
</tr>
<tr>
<td>IS NOT NULL</td>
<td>不是null</td>
</tr>
<tr>
<td>AND 或 &amp;&amp;</td>
<td>并且</td>
</tr>
<tr>
<td>OR 或 ||</td>
<td>或者</td>
</tr>
<tr>
<td>NOT或！</td>
<td>非，不是</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 条件查询</span><br><span class="line"></span><br><span class="line">&gt;-- 1. 查询年龄大于20岁的学院信息</span><br><span class="line">&gt;select id,name,age,sex,address,math,english,hire_date from stu where age &gt; 20;</span><br><span class="line"></span><br><span class="line">&gt;-- 2. 查询年龄大于等于20岁的学院信息</span><br><span class="line">&gt;select id,name,age,sex,address,math,english,hire_date from stu where age &gt;&#x3D; 20;</span><br><span class="line"></span><br><span class="line">&gt;-- 3. 查询年龄大于等于30 并且 年龄小于等于30的学员信息</span><br><span class="line">&gt;select id,name,age,sex,address,math,english,hire_date from stu where age &gt;&#x3D; 20 and age &lt;&#x3D; 30;</span><br><span class="line"></span><br><span class="line">&gt;-- 4. 查询入学日期</span><br><span class="line">&gt;select id,name,age,sex,address,math,english,hire_date from stu where hire_date between &#39;1998-09-01&#39; and &#39;1999-09-01&#39;;</span><br><span class="line"></span><br><span class="line">&gt;-- 5. 查询年龄等于20岁的学员信息</span><br><span class="line">&gt;select * from stu where age &#x3D; 20;</span><br><span class="line"></span><br><span class="line">&gt;-- 6. 查询年龄不等于20岁的学员信息</span><br><span class="line">&gt;select * from stu where age !&#x3D; 20;</span><br><span class="line">&gt;select * from stu where age &lt;&gt; 20;</span><br><span class="line"></span><br><span class="line">&gt;-- 7. 查询20岁，45岁，55岁的学员信息</span><br><span class="line">&gt;select * from stu where age &#x3D; 20 or age &#x3D; 45 or age &#x3D; 55;</span><br><span class="line">&gt;select * from stu where age in (20,45,55);</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="1-5-3-糊查询"><a href="#1-5-3-糊查询" class="headerlink" title="1.5.3 糊查询"></a>1.5.3 糊查询</h5><blockquote>
<p>使用LIKE关键字，使用通配符进行占位</p>
<ul>
<li>_：表示单个字符</li>
<li>%：表示任意字符</li>
</ul>
<ul>
<li>查询姓’马’的学员信息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 查询姓&#39;马&#39;的学员信息</span><br><span class="line">&gt;select * from stu where name like &#39;马%&#39;</span><br></pre></td></tr></table></figure>

<ul>
<li>查询姓第二个字是’化’的学员信息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 查询姓第二个字是&#39;化&#39;的学员信息</span><br><span class="line">&gt;select * from stu where name like &#39;_化%&#39;</span><br></pre></td></tr></table></figure>

<ul>
<li>查询名字中包含’徳’的学员信息</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 查询名字中包含&#39;徳&#39;的学员信息</span><br><span class="line">&gt;select * from stu where name like &#39;%德%&#39;</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="1-5-4-排序查询"><a href="#1-5-4-排序查询" class="headerlink" title="1.5.4 排序查询"></a>1.5.4 排序查询</h5><blockquote>
<p>排序方式：</p>
<ul>
<li>ASC 升序排列</li>
<li>DESC 降序排列</li>
</ul>
<p><strong>按照升序排列:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 1. 年龄按照升序排列</span><br><span class="line">&gt;select * from stu order by age ASC;</span><br></pre></td></tr></table></figure>

<p><strong>数学成绩按照降序排列：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 2. 数学成绩按照降序排列</span><br><span class="line">&gt;select * from stu order by math DEsc;</span><br></pre></td></tr></table></figure>

<p><strong>数学成绩按照降排列,如果数学成绩一样 英语成绩按照降序排列</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;-- 4. 数学成绩按照降排列,如果数学成绩一样 英语成绩按照降序排列</span><br><span class="line">&gt;SELECT * FROM stu ORDER BY math DESC , english DESC;</span><br></pre></td></tr></table></figure>

<p>注意：如果第一个条件一样，执行第二个条件</p>
</blockquote>
<h5 id="1-5-5-聚合查询"><a href="#1-5-5-聚合查询" class="headerlink" title="1.5.5 聚合查询"></a>1.5.5 聚合查询</h5><blockquote>
<p>函数分类：</p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>count(列名)</td>
<td>统计数量（一般选用不为null的列）</td>
</tr>
<tr>
<td>max(列名)</td>
<td>最大值</td>
</tr>
<tr>
<td>min(列名)</td>
<td>最小值</td>
</tr>
<tr>
<td>sum(列名)</td>
<td>求和</td>
</tr>
<tr>
<td>avg(列名)</td>
<td>平均值</td>
</tr>
</tbody></table>
<p>格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;SELECT 聚合函数名（列名） FROM 表名；</span><br></pre></td></tr></table></figure>

<p>​    ==null值不参与所有聚合函数运算==</p>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt;&#x2F;*</span><br><span class="line">&gt;取值：</span><br><span class="line">主键</span><br><span class="line">*</span><br><span class="line">&gt;*&#x2F;</span><br><span class="line"></span><br><span class="line">&gt;-- 1. 统计班级一共有多少学生</span><br><span class="line">&gt;select count(*) from stu;</span><br><span class="line"></span><br><span class="line">&gt;-- 2. 查询数学成绩的最高分</span><br><span class="line">&gt;select max(math) from stu;</span><br><span class="line"></span><br><span class="line">&gt;-- 3. 查询数学成绩的最低分</span><br><span class="line">&gt;select min(math) from stu;</span><br><span class="line"></span><br><span class="line">&gt;-- 4. 查询数学成绩的总分</span><br><span class="line">&gt;select sum(math) from stu;</span><br><span class="line"></span><br><span class="line">&gt;-- 5. 查询数学成绩的平均分</span><br><span class="line">&gt;select avg(math) from stu;</span><br><span class="line"></span><br><span class="line">&gt;-- 6. 查询英语成绩的最低分</span><br><span class="line">&gt;select min(english) from stu;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/16/Day01_MySQL%E5%92%8CNavicat/" data-id="ckvno4li5000cgguedaf18cqx"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-DAY24_配置文件和枚举" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/15/DAY24_%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8C%E6%9E%9A%E4%B8%BE/"
    >配置文件和枚举、注解</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/15/DAY24_%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8C%E6%9E%9A%E4%B8%BE/" class="article-date">
  <time datetime="2021-10-15T05:45:22.000Z" itemprop="datePublished">2021-10-15</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="45-XML"><a href="#45-XML" class="headerlink" title="45. XML"></a>45. XML</h3><h4 id="45-1-XML的概述"><a href="#45-1-XML的概述" class="headerlink" title="45.1 XML的概述"></a>45.1 XML的概述</h4><blockquote>
<p><strong>1.xml作为配置文件的优势</strong></p>
<ul>
<li>可读性好</li>
<li>可维护性高</li>
</ul>
<p><strong>2.什么是XML?</strong></p>
<p>XML的全称为(Extensible Markup Language)，是一种可扩展的标记语言<br>标记语言: 通过标签来描述数据的一门语言(标签有时我们也将其称之为元素)<br>可扩展：标签的名字是可以自定义的</p>
<p>XML文件是由很多标签组成的,而标签名是可以自定义的</p>
<p>3.作用</p>
<ul>
<li>​    用于进行数据存储和数据交换</li>
<li>​    作为软件的配置文件</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//格式抬头</span></span><br><span class="line">&gt;&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line"></span><br><span class="line">&gt;&lt;web-app &gt; <span class="comment">//首尾不能缺</span></span><br><span class="line"> &lt;welcome-file-list&gt;</span><br><span class="line">   &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;</span><br><span class="line">   &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;</span><br><span class="line">   &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;</span><br><span class="line">   &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;</span><br><span class="line">   &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;</span><br><span class="line">   &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;</span><br><span class="line"> &lt;/welcome-file-list&gt;</span><br><span class="line">&gt;&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="45-2-XMl的定义规则"><a href="#45-2-XMl的定义规则" class="headerlink" title="45.2 XMl的定义规则"></a>45.2 XMl的定义规则</h4><blockquote>
<ul>
<li>标签必须有关闭标签</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;student&gt; &lt;/student&gt;</span><br><span class="line"> 前边的是开始标签，后边的是结束标签</span><br><span class="line">&gt;&lt;address/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>XML标签对大小写敏感</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;Student&gt;这是错误的&lt;/student&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>标签中可以定义属性,属性和标签名空格隔开,属性值必须用引号引起来</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;student id="1"&gt; &lt;/student&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>标签需要正确的嵌套</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;这是正确的: &lt;student id="1"&gt; &lt;name&gt;张三&lt;/name&gt; &lt;/student&gt;</span><br><span class="line">&gt;这是错误的: &lt;student id="1"&gt;&lt;name&gt;张三&lt;/student&gt;&lt;/name&gt;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="45-3-xml语法规则"><a href="#45-3-xml语法规则" class="headerlink" title="45.3 xml语法规则"></a>45.3 xml语法规则</h4><blockquote>
<p>XML文件中可以存在以下特殊字符</p>
<ul>
<li><pre><code class="java">&amp;lt; &lt; 小于
&amp;gt; &gt; 大于
&amp;amp; &amp; 和号
&amp;apos; <span class="string">' 单引号</span>
<span class="string">&amp;quot; " 引号</span>
<span class="string"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></span>
<span class="string"></span></code></pre>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;XML文件中可以存在CDATA区</span><br><span class="line"></span><br><span class="line">&gt;- &#96;&#96;&#96;java</span><br><span class="line"> &#x2F;&#x2F;中括号里可以输入任意内容</span><br><span class="line"> &lt;![CDATA[ …内容… ]]&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;文档声明必须是第一行第一列</span><br><span class="line"></span><br><span class="line">&gt;- &#96;&#96;&#96;java</span><br><span class="line">&gt;&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; standalone&#x3D;&quot;yes”?&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;- version：该属性是必须存在的</span><br><span class="line">&gt;encoding：该属性不是必须的</span><br><span class="line"></span><br><span class="line">&gt;​	打开当前xml文件的时候应该是使用什么字符编码表(一般取值都是UTF-8)</span><br><span class="line"></span><br><span class="line">&gt;standalone: 该属性不是必须的，描述XML文件是否依赖其他的xml文件，取值为yes&#x2F;no</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="45-4-xml解析"><a href="#45-4-xml解析" class="headerlink" title="45.4 xml解析"></a>45.4 xml解析</h4><blockquote>
<p>XML解析:从xml中获取到数据</p>
<p>数据结构：</p>
<p>Node对象：Dom结构中最基本的对象，代表每一个标签节点</p>
<ul>
<li>Element对象：所有的标签</li>
<li>Attrubute对象：所有的属性</li>
<li>Text对象：所有的文本内容</li>
</ul>
</blockquote>
<h4 id="45-5-XML的使用"><a href="#45-5-XML的使用" class="headerlink" title="45.5 XML的使用"></a>45.5 XML的使用</h4><blockquote>
<p>需求</p>
<ul>
<li>解析提供好的xml文件</li>
<li>将解析到的数据封装到学生对象中</li>
<li>并将学生对象存储到ArrayList集合中</li>
<li>遍历集合</li>
</ul>
<p>代码示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> ?&gt;</span><br><span class="line">&gt;&lt;!--注释的内容--&gt;</span><br><span class="line">&gt;&lt;!--本xml文件用来描述多个学生信息--&gt;</span><br><span class="line">&gt;&lt;students&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!--第一个学生信息--&gt;</span><br><span class="line">   &lt;student id=<span class="string">"1"</span>&gt;</span><br><span class="line">       &lt;name&gt;张三&lt;/name&gt;</span><br><span class="line">       &lt;age&gt;23&lt;/age&gt;</span><br><span class="line">   &lt;/student&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!--第二个学生信息--&gt;</span><br><span class="line">   &lt;student id=<span class="string">"2"</span>&gt;</span><br><span class="line">       &lt;name&gt;李四&lt;/name&gt;</span><br><span class="line">       &lt;age&gt;24&lt;/age&gt;</span><br><span class="line">   &lt;/student&gt;</span><br><span class="line"></span><br><span class="line">&gt;&lt;/students&gt;</span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">// 上边是已经准备好的student.xml文件</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String id;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String id, String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.id = id;</span><br><span class="line">       <span class="keyword">this</span>.name = name;</span><br><span class="line">       <span class="keyword">this</span>.age = age;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> id;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.id = id;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.name = name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> age;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.age = age;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">"Student&#123;"</span> +</span><br><span class="line">               <span class="string">"id='"</span> + id + <span class="string">'\''</span> +</span><br><span class="line">               <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">               <span class="string">", age="</span> + age +</span><br><span class="line">               <span class="string">'&#125;'</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment">* 利用dom4j解析xml文件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XmlParse</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> DocumentException </span>&#123;</span><br><span class="line">       <span class="comment">//1.获取一个解析器对象</span></span><br><span class="line">       SAXReader saxReader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">       <span class="comment">//2.利用解析器把xml文件加载到内存中,并返回一个文档对象</span></span><br><span class="line">       Document document = saxReader.read(<span class="keyword">new</span> File(<span class="string">"myxml\\xml\\student.xml"</span>));</span><br><span class="line">       <span class="comment">//3.获取到根标签</span></span><br><span class="line">       Element rootElement = document.getRootElement();</span><br><span class="line">       <span class="comment">//4.通过根标签来获取student标签</span></span><br><span class="line">       <span class="comment">//elements():可以获取调用者所有的子标签.会把这些子标签放到一个集合中返回.</span></span><br><span class="line">       <span class="comment">//elements("标签名"):可以获取调用者所有的指定的子标签,会把这些子标签放到一个集合中并返回</span></span><br><span class="line">       <span class="comment">//List list = rootElement.elements();</span></span><br><span class="line">       List&lt;Element&gt; studentElements = rootElement.elements(<span class="string">"student"</span>);</span><br><span class="line">       <span class="comment">//System.out.println(list.size());</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//用来装学生对象</span></span><br><span class="line">       ArrayList&lt;Student&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//5.遍历集合,得到每一个student标签</span></span><br><span class="line">       <span class="keyword">for</span> (Element element : studentElements) &#123;</span><br><span class="line">           <span class="comment">//element依次表示每一个student标签</span></span><br><span class="line"> </span><br><span class="line">           <span class="comment">//获取id这个属性</span></span><br><span class="line">           Attribute attribute = element.attribute(<span class="string">"id"</span>);</span><br><span class="line">           <span class="comment">//获取id的属性值</span></span><br><span class="line">           String id = attribute.getValue();</span><br><span class="line"></span><br><span class="line">           <span class="comment">//获取name标签</span></span><br><span class="line">           <span class="comment">//element("标签名"):获取调用者指定的子标签</span></span><br><span class="line">           Element nameElement = element.element(<span class="string">"name"</span>);</span><br><span class="line">           <span class="comment">//获取这个标签的标签体内容</span></span><br><span class="line">           String name = nameElement.getText();</span><br><span class="line"></span><br><span class="line">           <span class="comment">//获取age标签</span></span><br><span class="line">           Element ageElement = element.element(<span class="string">"age"</span>);</span><br><span class="line">           <span class="comment">//获取age标签的标签体内容</span></span><br><span class="line">           String age = ageElement.getText();</span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">//            System.out.println(id);</span></span><br><span class="line">&gt;<span class="comment">//            System.out.println(name);</span></span><br><span class="line">&gt;<span class="comment">//            System.out.println(age);</span></span><br><span class="line"></span><br><span class="line">           Student s = <span class="keyword">new</span> Student(id,name,Integer.parseInt(age));</span><br><span class="line">           list.add(s);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//遍历操作</span></span><br><span class="line">       <span class="keyword">for</span> (Student student : list) &#123;</span><br><span class="line">           System.out.println(student);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="45-6-DTD是XML约束"><a href="#45-6-DTD是XML约束" class="headerlink" title="45.6 DTD是XML约束"></a>45.6 DTD是XML约束</h4><blockquote>
<p>XML约束:限定xml文件中可使用的标签以及属性</p>
<p>约束的分类:</p>
<ul>
<li>DTD</li>
<li>schema</li>
</ul>
<p>简单元素：没有子元素。<br>复杂元素：有子元素的元素</p>
<p>DTD的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--&lt;!ELEMENT&gt; 可以定义元素--&gt;</span><br><span class="line"> &lt;!<span class="function">ELEMENT <span class="title">persong</span> <span class="params">(person)</span>&gt;</span></span><br><span class="line"><span class="function"> &lt;!--限制person标签下只能有name和age--&gt;</span></span><br><span class="line"><span class="function"> &lt;!ELEMENT <span class="title">person</span> <span class="params">(name,age)</span>&gt;</span></span><br><span class="line"><span class="function"> &lt;!ELEMENT <span class="title">name</span> <span class="params">(#PCDATA)</span>&gt;</span></span><br><span class="line"><span class="function"> &lt;!ELEMENT <span class="title">age</span> <span class="params">(#PCDATA)</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在xml中导入：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> ?&gt;</span><br><span class="line">&gt;&lt;!--导入本地dtd文件--&gt;</span><br><span class="line">&gt;&lt;!--！DOCTYPE 根元素名称 SYSTEM <span class="string">'dtd文件路径'</span>--&gt;</span><br><span class="line">&gt;&lt;!--！DOCTYPE 根元素名称 dtd文件名字 <span class="string">'dtd的url'</span>--&gt;</span><br><span class="line">&gt;&lt;!DOCTYPE persong SYSTEM <span class="string">'aa.dtd'</span>&gt;</span><br><span class="line">&gt;&lt;persong&gt;</span><br><span class="line">   &lt;person&gt;</span><br><span class="line">       &lt;name&gt;张三&lt;/name&gt;</span><br><span class="line">       &lt;age&gt;19&lt;/age&gt;</span><br><span class="line">   &lt;/person&gt;</span><br><span class="line">&gt;&lt;/persong&gt;</span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment">* 利用dom4j解析xml文件</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XmlParse</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> DocumentException </span>&#123;</span><br><span class="line">       <span class="comment">//1.获取一个解析器对象</span></span><br><span class="line">       SAXReader saxReader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">       <span class="comment">//2.利用解析器把xml文件加载到内存中,并返回一个文档对象</span></span><br><span class="line">       Document document = saxReader.read(<span class="keyword">new</span> File(<span class="string">"myxml\\xml\\student.xml"</span>));</span><br><span class="line">       <span class="comment">//3.获取到根标签</span></span><br><span class="line">       Element rootElement = document.getRootElement();</span><br><span class="line">       <span class="comment">//4.通过根标签来获取student标签</span></span><br><span class="line">       <span class="comment">//elements():可以获取调用者所有的子标签.会把这些子标签放到一个集合中返回.</span></span><br><span class="line">       <span class="comment">//elements("标签名"):可以获取调用者所有的指定的子标签,会把这些子标签放到一个集合中并返回</span></span><br><span class="line">       <span class="comment">//List list = rootElement.elements();</span></span><br><span class="line">       List&lt;Element&gt; studentElements = rootElement.elements(<span class="string">"student"</span>);</span><br><span class="line">       <span class="comment">//System.out.println(list.size());</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">//用来装学生对象</span></span><br><span class="line">       ArrayList&lt;Student&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//5.遍历集合,得到每一个student标签</span></span><br><span class="line">       <span class="keyword">for</span> (Element element : studentElements) &#123;</span><br><span class="line">           <span class="comment">//element依次表示每一个student标签</span></span><br><span class="line"> </span><br><span class="line">           <span class="comment">//获取id这个属性</span></span><br><span class="line">           Attribute attribute = element.attribute(<span class="string">"id"</span>);</span><br><span class="line">           <span class="comment">//获取id的属性值</span></span><br><span class="line">           String id = attribute.getValue();</span><br><span class="line"></span><br><span class="line">           <span class="comment">//获取name标签</span></span><br><span class="line">           <span class="comment">//element("标签名"):获取调用者指定的子标签</span></span><br><span class="line">           Element nameElement = element.element(<span class="string">"name"</span>);</span><br><span class="line">           <span class="comment">//获取这个标签的标签体内容</span></span><br><span class="line">           String name = nameElement.getText();</span><br><span class="line"></span><br><span class="line">           <span class="comment">//获取age标签</span></span><br><span class="line">           Element ageElement = element.element(<span class="string">"age"</span>);</span><br><span class="line">           <span class="comment">//获取age标签的标签体内容</span></span><br><span class="line">           String age = ageElement.getText();</span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">//            System.out.println(id);</span></span><br><span class="line">&gt;<span class="comment">//            System.out.println(name);</span></span><br><span class="line">&gt;<span class="comment">//            System.out.println(age);</span></span><br><span class="line"></span><br><span class="line">           Student s = <span class="keyword">new</span> Student(id,name,Integer.parseInt(age));</span><br><span class="line">           list.add(s);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//遍历操作</span></span><br><span class="line">       <span class="keyword">for</span> (Student student : list) &#123;</span><br><span class="line">           System.out.println(student);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="45-7-DTD的语法规则"><a href="#45-7-DTD的语法规则" class="headerlink" title="45.7 DTD的语法规则"></a>45.7 DTD的语法规则</h4><blockquote>
<p>简单元素：</p>
<ul>
<li><p>EMPTY: 表示标签体为空</p>
</li>
<li><p>ANY: 表示标签体可以为空也可以不为空</p>
</li>
<li><p>PCDATA: 表示该元素的内容部分为字符串</p>
</li>
</ul>
<p>复杂元素：</p>
<ul>
<li>直接写子元素名称. 多个子元素可以使用”,”或者”|”隔开</li>
<li>“,”表示定义子元素的顺序 ; “|”: 表示子元素只能出现任意一个</li>
<li>“?”零次或一次, “+”一次或多次, “*”零次或多次;如果不写则表示出现一次</li>
</ul>
</blockquote>
<h4 id="45-8-schema的概述"><a href="#45-8-schema的概述" class="headerlink" title="45.8 schema的概述"></a>45.8 schema的概述</h4><blockquote>
<ul>
<li><p>步骤</p>
<p>1，在根标签上定义属性xmlns=”<a href="http://www.w3.org/2001/XMLSchema-instance&quot;" target="_blank" rel="noopener">http://www.w3.org/2001/XMLSchema-instance&quot;</a><br>2，通过xmlns引入约束文件的名称空间<br>3，给某一个xmlns属性添加一个标识，用于区分不同的名称空间<br>​    格式为: xmlns:标识=“名称空间地址” ,标识可以是任意的，但是一般取值都是xsi<br>4，通过xsi:schemaLocation指定名称空间所对应的约束文件路径<br>​    格式为：xsi:schemaLocation = “名称空间url 文件路径“</p>
</li>
<li><p>代码实现</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> ?&gt;</span><br><span class="line">&gt;&lt;persons</span><br><span class="line">   xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">   xmlns=<span class="string">"http://www.itheima.cn/javase"</span></span><br><span class="line">   xsi:schemaLocation=<span class="string">"http://www.itheima.cn/javase person.xsd"</span></span><br><span class="line">&gt;&gt;</span><br><span class="line">   &lt;person id=<span class="string">"001"</span>&gt;</span><br><span class="line">       &lt;name&gt;张三&lt;/name&gt;</span><br><span class="line">       &lt;age&gt;23&lt;/age&gt;</span><br><span class="line">   &lt;/person&gt;</span><br><span class="line">&gt;&lt;/persons&gt;</span><br></pre></td></tr></table></figure>


</blockquote>
<h3 id="46-枚举"><a href="#46-枚举" class="headerlink" title="46.枚举"></a>46.枚举</h3><blockquote>
<p>枚举：限制元素的范围</p>
<p>格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="keyword">enum</span> s &#123;   </span><br><span class="line">枚举项<span class="number">1</span>,枚举项<span class="number">2</span>,枚举项<span class="number">3</span>;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<p>特点：</p>
<ul>
<li><p>所有枚举类都是Enum的子类</p>
</li>
<li><p>我们可以通过”枚举类名.枚举项名称”去访问指定的枚举项</p>
</li>
<li><p>每一个枚举项其实就是该枚举的一个对象</p>
</li>
<li><p>枚举也是一个类，也可以去定义成员变量</p>
</li>
<li><p>枚举类的第一行上必须是枚举项，最后一个枚举项后的分号是可以省略的，但是如果枚举类有其他的东西，这个分号就不能省略。建议不要省略</p>
</li>
<li><p>枚举类可以有构造器，但必须是private的，它默认的也是private的。</p>
<p>枚举项的用法比较特殊：枚举(“”);</p>
</li>
<li><p>枚举类也可以有抽象方法，但是枚举项必须重写该方法</p>
</li>
</ul>
</blockquote>
<h4 id="46-1-枚举的方法"><a href="#46-1-枚举的方法" class="headerlink" title="46.1 枚举的方法"></a>46.1 枚举的方法</h4><blockquote>
<p>枚举中的常见方法</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>String name()</td>
<td>获取枚举项的名称</td>
</tr>
<tr>
<td>int ordinal()</td>
<td>返回枚举项在枚举类中的索引值</td>
</tr>
<tr>
<td>int compareTo(E  o)</td>
<td>比较两个枚举项，返回的是索引值的差值</td>
</tr>
<tr>
<td>String toString()</td>
<td>返回枚举常量的名称</td>
</tr>
<tr>
<td>static <T> T  valueOf(Class<T> type,String  name)</td>
<td>获取指定枚举类中的指定名称的枚举值</td>
</tr>
<tr>
<td>values()</td>
<td>获得所有的枚举项</td>
</tr>
</tbody></table>
<p>枚举的应用场景是什么？</p>
<p>  在java中，通常使用枚举表示一组有限的值，实现对输入的约束(例如Month，DayofWeek等)</p>
<p>3.使用枚举有什么好处？</p>
<ul>
<li>枚举可认使代码更易于维护，有助于确保为变量指定合法的值，期望的值</li>
<li>枚举更易于输入，使用枚举赋值，只需要输入枚举名，然后输入.就能将所有值显示出来</li>
<li>枚举使代码更清晰，允许用描述性的名称表示数据，使用时直观方便</li>
</ul>
</blockquote>
<h3 id="47-注解"><a href="#47-注解" class="headerlink" title="47. 注解"></a>47. 注解</h3><h4 id="47-1-注解的概念"><a href="#47-1-注解的概念" class="headerlink" title="47.1 注解的概念"></a>47.1 注解的概念</h4><blockquote>
<p>注解：</p>
<p>对我们的程序进行标注和解释</p>
<p>常见注解？</p>
<table>
<thead>
<tr>
<th>注解名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>@Override</td>
<td>描述子类重写父类的方法</td>
</tr>
<tr>
<td>@Deprecated</td>
<td>描述方法过时</td>
</tr>
<tr>
<td>@SuppressWarnings</td>
<td>压制警告</td>
</tr>
</tbody></table>
<p>注解和注释的区别</p>
<ul>
<li>注释: 给程序员看的</li>
<li>注解: 给JVM看的</li>
</ul>
</blockquote>
<h4 id="47-2-自定义注解"><a href="#47-2-自定义注解" class="headerlink" title="47.2 自定义注解"></a>47.2 自定义注解</h4><blockquote>
<p>定义注解的格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="meta">@interface</span> 注解名称 &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> 属性类型 属性名() <span class="keyword">default</span> 默认值 ;</span><br><span class="line"></span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>属性类型</p>
<ul>
<li>基本数据类型</li>
<li>String</li>
<li>Class</li>
<li>注解</li>
<li>枚举</li>
<li>以上类型的一维数组</li>
</ul>
<p>属性类型示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="meta">@interface</span> Anno1 &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//定义一个基本类型的属性</span></span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">a</span> <span class="params">()</span> <span class="keyword">default</span> 23</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//定义一个String类型的属性</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> "itheima"</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//定义一个Class类型的属性</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Class <span class="title">clazz</span><span class="params">()</span> <span class="keyword">default</span> Anno2.class</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//定义一个注解类型的属性</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Anno2 <span class="title">anno</span><span class="params">()</span> <span class="keyword">default</span> @Anno2</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//定义一个枚举类型的属性</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Season <span class="title">season</span><span class="params">()</span> <span class="keyword">default</span> Season.SPRING</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//以上类型的一维数组</span></span><br><span class="line">   <span class="comment">//int数组</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">int</span>[] arr() <span class="keyword">default</span> &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//枚举数组</span></span><br><span class="line">   <span class="keyword">public</span> Season[] seasons() <span class="keyword">default</span> &#123;Season.SPRING,Season.SUMMER&#125;;</span><br><span class="line"></span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>



<p>自定义注解示例：</p>
<p>使用反射：</p>
<p>注解使用条件：</p>
<ul>
<li>是public</li>
<li>不能有返回值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//表示Test这个注解的存活时间</span></span><br><span class="line">&gt;<span class="meta">@Retention</span>(value = RetentionPolicy.RUNTIME)</span><br><span class="line">&gt;<span class="keyword">public</span> <span class="meta">@interface</span> Test &#123;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br><span class="line">&gt;<span class="keyword">package</span> com.itheima.myanno3;</span><br><span class="line"></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UseTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//没有使用Test注解</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"UseTest....show...."</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//使用Test注解</span></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"UseTest....method...."</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">//没有使用Test注解</span></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">     System.out.println(<span class="string">"UseTest....function...."</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnoDemo</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException, InvocationTargetException </span>&#123;</span><br><span class="line">       <span class="comment">//1.通过反射获取UseTest类的字节码文件对象</span></span><br><span class="line">       Class&lt;?&gt; clazz = Class.forName(<span class="string">"com.itheima.myanno3.UseTest"</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//创建对象</span></span><br><span class="line">       UseTest useTest = (UseTest) clazz.newInstance();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="comment">//2.通过反射获取这个类里面所有的方法对象</span></span><br><span class="line">       Method[] methods = clazz.getDeclaredMethods();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="comment">//3.遍历数组，得到每一个方法对象</span></span><br><span class="line">       <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">           <span class="comment">//method依次表示每一个方法对象。</span></span><br><span class="line">           <span class="comment">//isAnnotationPresent​(Class&lt;? extends Annotation&gt; annotationClass)</span></span><br><span class="line">           <span class="comment">//判断当前方法上是否有指定的注解。</span></span><br><span class="line">           <span class="comment">//参数：注解的字节码文件对象</span></span><br><span class="line">           <span class="comment">//返回值：布尔结果。  true 存在  false 不存在</span></span><br><span class="line">           <span class="keyword">if</span>(method.isAnnotationPresent(Test<span class="class">.<span class="keyword">class</span>))</span>&#123;</span><br><span class="line">               method.invoke(useTest);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="47-3-元注解"><a href="#47-3-元注解" class="headerlink" title="47.3 元注解"></a>47.3 元注解</h4><blockquote>
<p>什么是元注解？</p>
<p>元注解就是描述注解的注解</p>
<p>2.常用的元注解介绍</p>
<table>
<thead>
<tr>
<th>元注解名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>@Target</td>
<td>指定了注解能在哪里使用</td>
</tr>
<tr>
<td>@Retention</td>
<td>可以理解为保留时间(生命周期)</td>
</tr>
<tr>
<td>@Inherited</td>
<td>表示修饰的自定义注解可以被子类继承</td>
</tr>
<tr>
<td>@Documented</td>
<td>表示该自定义注解，会出现在API文档里面。</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//表示Test这个注解的存活时间</span></span><br><span class="line">&gt;<span class="comment">//注解括号里面的注释是元注解</span></span><br><span class="line">&gt;<span class="meta">@Retention</span>(value = RetentionPolicy.RUNTIME)</span><br><span class="line">&gt;<span class="keyword">public</span> <span class="meta">@interface</span> Test &#123;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br><span class="line">&gt;<span class="keyword">package</span> com.itheima.myanno3;</span><br><span class="line"></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UseTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/15/DAY24_%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8C%E6%9E%9A%E4%B8%BE/" data-id="ckvno4lia000kggue96l8eo11"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/" rel="tag">后端学习</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-DAY25_单元测试" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/15/DAY25_%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"
    >单元测试和日志</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/15/DAY25_%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" class="article-date">
  <time datetime="2021-10-15T05:44:19.000Z" itemprop="datePublished">2021-10-15</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="48-单元测试"><a href="#48-单元测试" class="headerlink" title="48. 单元测试"></a>48. 单元测试</h3><h4 id="48-1-单元测试的概念"><a href="#48-1-单元测试的概念" class="headerlink" title="48.1 单元测试的概念"></a>48.1 单元测试的概念</h4><blockquote>
<p>单元测试:对软件最小单元的测试</p>
<p>步骤：</p>
<p>1.将junit4J添加项目中</p>
<p>2.编写测试类</p>
<p>3.编写测试方法</p>
<p>@Test  :表示一个方法为测试方法</p>
<p>@Before: 表示一个测试方法执行前要执行的方法</p>
<p>@After: 表示一个测试方法执行之后要执行的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UseAnno</span> </span>&#123;</span><br><span class="line"><span class="comment">//测试执行之前执行</span></span><br><span class="line">  <span class="meta">@Before</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"method"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="comment">//Before 和After一定会执行</span></span><br><span class="line"><span class="comment">//可以单独运行  </span></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fountion</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"fountion"</span>);</span><br><span class="line">   &#125;</span><br><span class="line"><span class="comment">//可以单独运行</span></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fountion1</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"HELLO"</span>);</span><br><span class="line">   &#125;</span><br><span class="line"><span class="comment">//测试执行之后执行</span></span><br><span class="line">  <span class="meta">@After</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">aethod01</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="number">2</span> / <span class="number">1</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</blockquote>
<h3 id="49-日志"><a href="#49-日志" class="headerlink" title="49. 日志"></a>49. 日志</h3><blockquote>
<p>日志：对方法执行过程的记录</p>
<p>步骤：</p>
<p>1.将log4j-1.2.17.jar、slf4j-log4j12-1.7.26.jar、slf4j-api-1.7.30.jar添加项目中</p>
<p>2.导入log4j.properties配置文件到src目录下</p>
<p>3.配置测试文件</p>
<p>4.在代码中获取日志的对象</p>
<p>5.按照级别设置记录日志信息</p>
<p>日志类别分类</p>
<ul>
<li>debug</li>
<li>info</li>
<li>warn</li>
<li>error</li>
</ul>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Log4jDemo</span> </span>&#123;</span><br><span class="line">   <span class="comment">//必须先导入Logger对象 </span></span><br><span class="line">   <span class="comment">//参数写本类字节码文件</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(Log4jDemo<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">       log.debug(<span class="string">"debug日志"</span>);</span><br><span class="line">       log.info(<span class="string">"info日志"</span>);</span><br><span class="line">       log.warn(<span class="string">"warn日志"</span>);</span><br><span class="line">       log.error(<span class="string">"error日志"</span>);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>


<p>配置文件：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&gt;#debug日志需要修改debug,my,fileAppender</span></span><br><span class="line"><span class="attr">&gt;#通常使用info,my,fileAppender</span></span><br><span class="line"><span class="meta">&gt;log4j.rootLogger</span>=<span class="string">debug,my,fileAppender</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;###</span> <span class="string">direct log messages to my ###</span></span><br><span class="line"><span class="attr">&gt;#输出到控制台</span></span><br><span class="line"><span class="meta">&gt;log4j.appender.my</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">&gt;##表示所有的消息都会被立刻输出</span></span><br><span class="line"><span class="meta">&gt;log4j.appender.my.ImmediateFlush</span> = <span class="string">true</span></span><br><span class="line"><span class="attr">&gt;#使用System.out方式输出</span></span><br><span class="line"><span class="meta">&gt;log4j.appender.my.Target</span>=<span class="string">System.out</span></span><br><span class="line"><span class="attr">&gt;#使用pattenlayout布局输出日志</span></span><br><span class="line"><span class="meta">&gt;log4j.appender.my.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">&gt;log4j.appender.my.layout.ConversionPattern</span>=<span class="string">%d %t %5p %c&#123;1&#125;:%L - %m%n</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;#</span> <span class="string">fileAppender演示</span></span><br><span class="line"><span class="attr">&gt;#输出到地方文件夹</span></span><br><span class="line"><span class="meta">&gt;log4j.appender.fileAppender</span>=<span class="string">org.apache.log4j.FileAppender</span></span><br><span class="line"><span class="attr">&gt;#表示所有的消息都会被立刻输出</span></span><br><span class="line"><span class="meta">&gt;log4j.appender.fileAppender.ImmediateFlush</span> = <span class="string">true</span></span><br><span class="line"><span class="attr">&gt;#表示输出的内容，会从结尾输出，不会重置</span></span><br><span class="line"><span class="meta">&gt;log4j.appender.fileAppender.Append</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">&gt;#输出文件，存储地址</span></span><br><span class="line"><span class="meta">&gt;log4j.appender.fileAppender.File</span>=<span class="string">./log4j-log.log</span></span><br><span class="line"><span class="attr">&gt;#输出文件指定格式</span></span><br><span class="line"><span class="meta">&gt;#</span> <span class="string">灵活使用指定布局</span></span><br><span class="line"><span class="meta">&gt;log4j.appender.fileAppender.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">&gt;log4j.appender.fileAppender.layout.ConversionPattern</span>=<span class="string">%d %5p %c&#123;1&#125;:%L - %m%n</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="49-1-日志技术-三个核心"><a href="#49-1-日志技术-三个核心" class="headerlink" title="49.1 日志技术-三个核心"></a>49.1 日志技术-三个核心</h4><blockquote>
<p>三个核心</p>
<ul>
<li><p>Loggers(记录器)       日志的级别</p>
<p>Loggers组件在此系统中常见的五个级别：DEBUG、INFO、WARN、ERROR 和 FATAL。</p>
<p>==DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL。==</p>
<p>==Log4j有一个规则：只输出级别不低于设定级别的日志信息。==</p>
</li>
<li><p>Appenders(输出源)   日志要输出的地方</p>
<p>把日志输出到不同的地方，如控制台==（Console）、文件（Files）==等。</p>
<ul>
<li>org.apache.log4j.ConsoleAppender（控制台）</li>
<li>org.apache.log4j.FileAppender（文件）</li>
</ul>
</li>
<li><p>Layouts(布局)             日志输出的格式</p>
<p>可以根据自己的喜好规定日志输出的格式</p>
<p>常用的布局管理器：</p>
<p>==org.apache.log4j.PatternLayout（可以灵活地指定布局模式）==</p>
<p>org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串）</p>
<p>org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等信息）  </p>
</li>
</ul>
</blockquote>
<h4 id="49-2-配置文件的详细配置"><a href="#49-2-配置文件的详细配置" class="headerlink" title="49.2 配置文件的详细配置"></a>49.2 配置文件的详细配置</h4><blockquote>
<p>1.配置根Logger</p>
<ul>
<li><p>格式</p>
<p>==log4j.rootLogger=日志级别，appenderName1，appenderName2，…==</p>
<p>日志级别</p>
<p>OFF、FATAL、ERROR、WARN、INFO、DEBUG、ALL或者自定义的级别。</p>
</li>
<li><p>appenderName1</p>
<p>就是指定日志信息要输出到哪里。可以同时指定多个输出目的地，用逗号隔开。</p>
<p>例如：log4j.rootLogger＝INFO，ca，fa</p>
</li>
</ul>
<p>2.ConsoleAppender常用的选项</p>
<ul>
<li><p>ImmediateFlush=true</p>
<p>表示所有消息都会被立即输出，设为false则不输出，默认值是true。</p>
</li>
<li><p>Target=System.err</p>
<p>默认值是System.out。</p>
</li>
</ul>
<p>3.FileAppender常用的选项</p>
<ul>
<li><p>ImmediateFlush=true</p>
<p>表示所有消息都会被立即输出。设为false则不输出，默认值是true</p>
</li>
<li><p>Append=false</p>
<p>true表示将消息添加到指定文件中，原来的消息不覆盖。</p>
<p>false则将消息覆盖指定的文件内容，默认值是true。</p>
</li>
<li><p>File=D:/logs/logging.log4j</p>
<p>指定消息输出到logging.log4j文件中</p>
</li>
</ul>
<p>4.PatternLayout常用的选项</p>
<p>​    ConversionPattern=%m%n</p>
<p>​    设定以怎样的格式显示消息</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;#########</span> <span class="string">常见参数 #########</span></span><br><span class="line"><span class="attr">&gt;//</span></span><br><span class="line"><span class="meta">&gt;%c&#123;参数&#125;</span> <span class="string">或 %logger&#123;参数&#125;  ##输出日志名称</span></span><br><span class="line"><span class="meta">&gt;%C&#123;参数&#125;</span> <span class="string">或 %class&#123;参数    ##输出类型</span></span><br><span class="line"><span class="meta">&gt;%d&#123;参数&#125;&#123;时区te&#123;参数&#125;&#123;时区&#125;</span> <span class="string">##输出时间</span></span><br><span class="line"><span class="meta">&gt;%F|%file</span>                  <span class="string">##输出文件名</span></span><br><span class="line"><span class="meta">&gt;highlight&#123;pattern&#125;&#123;style&#125;</span> <span class="string">##高亮显示</span></span><br><span class="line"><span class="meta">&gt;%l</span>  <span class="string">##输出错误的完整位置</span></span><br><span class="line"><span class="meta">&gt;%L</span>  <span class="string">##输出错误行号</span></span><br><span class="line"><span class="meta">&gt;%m</span> <span class="string">或 %msg 或 %message ##输出错误信息</span></span><br><span class="line"><span class="meta">&gt;%M</span> <span class="string">或 %method ##输出方法名</span></span><br><span class="line"><span class="meta">&gt;%n</span>            <span class="string">##输出换行符</span></span><br><span class="line"><span class="meta">&gt;%level&#123;参数1&#125;&#123;参数2&#125;&#123;参数3&#125;</span> <span class="string">##输出日志的级别</span></span><br><span class="line"><span class="meta">&gt;%t</span> <span class="string">或 %thread              ##创建logging事件的线程名</span></span><br><span class="line"><span class="attr">&gt;*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;#########</span> <span class="string">特殊符号 ############</span></span><br><span class="line"><span class="attr">&gt;#有些特殊符号不能直接打印，需要使用实体名称或者编号</span></span><br><span class="line"><span class="attr">&gt;//</span></span><br><span class="line"><span class="meta">&gt;&amp;</span> <span class="string">—— &amp;amp; 或者 &amp;#38;</span></span><br><span class="line"><span class="meta">&gt;&lt;</span> <span class="string">—— &amp;lt;  或者 &amp;#60;</span></span><br><span class="line"><span class="meta">&gt;&gt;</span> <span class="string">—— &amp;gt;  或者 &amp;#62;</span></span><br><span class="line"><span class="meta">&gt;“</span> <span class="string">—— &amp;quot; 或者 &amp;#34;</span></span><br><span class="line"><span class="meta">&gt;‘</span> <span class="string">—— &amp;apos; 或者 &amp;#39;</span></span><br><span class="line"><span class="attr">&gt;*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;########</span> <span class="string">pattern对齐修饰 ##########</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;//</span> <span class="string">对齐修饰，可以指定信息的输出格式，如是否左对齐，是否留空格等。</span></span><br><span class="line"><span class="meta">&gt;##</span> <span class="string">编写格式为在任何pattern和%之间加入一个小数，可以是正数，也可以是负数。</span></span><br><span class="line"><span class="meta">&gt;##</span> <span class="string">整数表示右对齐，负数表示左对齐；</span></span><br><span class="line"><span class="meta">&gt;##</span> <span class="string">整数位表示输出信息的最小n个字符，如果输出信息不够n个字符，将用空格补齐；</span></span><br><span class="line"><span class="meta">&gt;##</span> <span class="string">小数位表示输出信息的最大字符数，如果超过n个字符，则只保留最后n个字符的信息</span></span><br><span class="line"><span class="meta">&gt;##</span> <span class="string">（注意：保留的是后20个字符，而不是前20个字符）</span></span><br><span class="line"><span class="attr">&gt;*/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">&gt;#示例如下</span></span><br><span class="line"><span class="attr">&gt;//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;%20</span> <span class="string">—— 右对齐，不足20个字符则在信息前面用空格补足，超过20个字符则保留原信息</span></span><br><span class="line"><span class="meta">&gt;%-20</span> <span class="string">—— 左对齐，不足20个字符则在信息后面用空格补足，超过20个字符则保留原信息</span></span><br><span class="line"><span class="meta">&gt;%.30</span> <span class="string">—— 如果信息超过30个字符，则只保留最后30个字符</span></span><br><span class="line"><span class="meta">&gt;%20.30</span> <span class="string">—— 右对齐，不足20个字符则在信息前面用空格补足，超过30个字符则只保留最后30个字符</span></span><br><span class="line"><span class="meta">&gt;%-20.30</span> <span class="string">—— 左对齐，不足20个字符则在信息后面用空格补足，超过30个字符则只保留最后30个字符</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/15/DAY25_%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" data-id="ckvno4li7000fggueexahfz9c"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/" rel="tag">后端学习</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2020-2021
        ff
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="ONE PEAC"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
      
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>




<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['面朝大海，春暖花开','愿你一生努力，一生被爱','想要的都拥有，得不到的都释怀'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>


<script src="/js/ayer.js"></script>


<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>