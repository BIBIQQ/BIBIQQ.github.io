<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     ONE PEAC
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/css/style.css">

  
<script src="/js/pace.min.js"></script>


  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/BIBIQQ/BIBIQQ.github.io"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">ONE PEAC</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
        <img
          src="/images/ayer.svg"
          class="cover-logo"
          alt="ONE PEAC"
        />
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-day04_SpringMVC" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/11/15/day04_SpringMVC/"
    >Spring_MVC</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/11/15/day04_SpringMVC/" class="article-date">
  <time datetime="2021-11-15T01:08:24.000Z" itemprop="datePublished">2021-11-15</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h3><h4 id="1-SpringMVC的简介"><a href="#1-SpringMVC的简介" class="headerlink" title="1.SpringMVC的简介"></a>1.SpringMVC的简介</h4><blockquote>
<ul>
<li><p>MVC模式</p>
</li>
<li><p>异步调用</p>
</li>
</ul>
<p>概述：</p>
<ul>
<li>Spring是一种基于Java实现MVC轻量级Web框架</li>
<li>优点：使用灵活，开发便利，灵活性强</li>
</ul>
</blockquote>
<h5 id="SpringMvc入门案例"><a href="#SpringMvc入门案例" class="headerlink" title="SpringMvc入门案例"></a>SpringMvc入门案例</h5><blockquote>
<p>Controller:管理控制层对象 （子容器）</p>
<p>Model：管理Model层对象（父容器）</p>
<p>Spring限制：子容器可以访问父容器的对象，父容器是不可以访问子容器的对象</p>
<p>SpringMvc实现流程</p>
<ul>
<li>添加依赖</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>配置前端控制器（DispatcherServlet）<ol>
<li>将对象创建并添加到tomcat容器中</li>
<li>配置Servlet的访问路径</li>
<li>配置Web层的容器，交给这个servlet</li>
<li>创建Model层的容器，交给这个servlet，实现父子关联</li>
</ol>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//初始化容器</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletContainersInitConggif</span>  <span class="keyword">extends</span> <span class="title">AbstractDispatcherServletInitializer</span> </span>&#123;</span><br><span class="line">   <span class="comment">//加载容器   创建web层的容器   子容器</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> WebApplicationContext <span class="title">createServletApplicationContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       AnnotationConfigWebApplicationContext ctx = <span class="keyword">new</span> AnnotationConfigWebApplicationContext();</span><br><span class="line">       <span class="comment">//所有请求都归属SpringMvc管理</span></span><br><span class="line">       ctx.register(SpringMvcConfig<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">       <span class="keyword">return</span> ctx;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//配置前端控制器DispatcherServlet拦截什么样的浏览器请求</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">       <span class="comment">//表示所有请求都归属Mvc管理   拦截所有</span></span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> String[]&#123;<span class="string">"/"</span>&#125;;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//创建model的容器   父容器</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> WebApplicationContext <span class="title">createRootApplicationContext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        AnnotationConfigWebApplicationContext modeIoc = <span class="keyword">new</span> AnnotationConfigWebApplicationContext();</span><br><span class="line">        modeIoc.register(SpringConfig<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">       <span class="keyword">return</span> modeIoc;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>



<h4 id="Spring设置bean的加载"><a href="#Spring设置bean的加载" class="headerlink" title="Spring设置bean的加载"></a><strong>Spring设置bean的加载</strong></h4><p>Spring不加载SpringMvc管理的bean</p>
<p>方法一：精确范围，精确到包名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Configuration</span></span><br><span class="line">&gt;<span class="meta">@ComponentScan</span>(&#123;<span class="string">"com.ff.service"</span>,<span class="string">"com.ff.dao"</span>&#125;)</span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfig</span> </span>&#123;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>方法二：搜索大范围，排除SpringMvc管理bean的包名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Configuration</span></span><br><span class="line">&gt;<span class="meta">@ComponentScan</span>(value = <span class="string">"com.ff"</span>,excludeFilters = <span class="meta">@ComponentScan</span>.Filter(</span><br><span class="line">       <span class="comment">/*过滤规则  注解过滤*/</span></span><br><span class="line">       type = FilterType.ANNOTATION,</span><br><span class="line">       <span class="comment">/*排除Controller注解*/</span></span><br><span class="line">       classes = Controller<span class="class">.<span class="keyword">class</span></span></span><br><span class="line"><span class="class">&gt;))</span></span><br><span class="line"><span class="class">&gt;<span class="title">public</span> <span class="title">class</span> <span class="title">SpringConfig</span> </span>&#123;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<p>注意：增加配置排除的过滤条件后，需要注意其他的配置类，不会再次加载</p>
<h4 id="简化开发：-等同于前端控制器（DispatcherServlet）"><a href="#简化开发：-等同于前端控制器（DispatcherServlet）" class="headerlink" title="简化开发：  等同于前端控制器（DispatcherServlet）"></a><strong>简化开发：</strong>  等同于前端控制器（DispatcherServlet）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletEasyConfig</span>  <span class="keyword">extends</span> <span class="title">AbstractAnnotationConfigDispatcherServletInitializer</span> </span>&#123;</span><br><span class="line">   <span class="comment">//Web容器</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> Class[]&#123;SpringMvcConfig<span class="class">.<span class="keyword">class</span>&#125;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//model容器</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> Class[]&#123;SpringConfig<span class="class">.<span class="keyword">class</span>&#125;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//拦截条件</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> String[]&#123;<span class="string">"/"</span>&#125;;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="2-请求与响应"><a href="#2-请求与响应" class="headerlink" title="2.请求与响应"></a>2.请求与响应</h4><blockquote>
<p>PostMan插件</p>
<p>作用：常用于进行接口测试</p>
<p>请求方式：</p>
<ul>
<li>Get请求</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;build&gt;</span><br><span class="line"> &lt;plugins&gt;</span><br><span class="line">   &lt;!-- tomcat插件的模板 --&gt;</span><br><span class="line">   &lt;plugin&gt;</span><br><span class="line">     &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;</span><br><span class="line">     &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">     &lt;version&gt;2.1&lt;/version&gt;</span><br><span class="line">     &lt;configuration&gt;</span><br><span class="line">       &lt;port&gt;80&lt;/port&gt;</span><br><span class="line">       &lt;path&gt;/&lt;/path&gt;</span><br><span class="line">  	<span class="comment">//请求解决中文乱码问题   只解决jdk8之前的  jdk8之后就自动处理了</span></span><br><span class="line">       &lt;uriEncoding&gt;UTF-8&lt;/uriEncoding&gt;</span><br><span class="line">     &lt;/configuration&gt;</span><br><span class="line">   &lt;/plugin&gt;</span><br><span class="line"> &lt;/plugins&gt;</span><br><span class="line">&gt;&lt;/build&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>Post请求</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改请求中文乱码问题  修改解码字符集为UTF-8</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">      CharacterEncodingFilter filter = <span class="keyword">new</span> CharacterEncodingFilter();</span><br><span class="line">      <span class="comment">//设置请求体的解码字符集，解决post请求中文乱码问题</span></span><br><span class="line">      filter.setEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> Filter[]&#123;filter&#125;;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<p>常见的传递参数的类型</p>
<ul>
<li>字符串     对象    数组    集合    </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置请求路径</span></span><br><span class="line">  <span class="meta">@RequestMapping</span>(<span class="string">"/commonParam"</span>)</span><br><span class="line">  <span class="comment">//设置返回结果是响应体的内容</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="comment">//@RequestParam("name") String username    将请求的name和username关联</span></span><br><span class="line">  <span class="comment">//集合  需要添加注解 ，避免被识别成对象</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String  <span class="title">commonParam</span><span class="params">(@RequestParam(<span class="string">"name"</span>)</span> String username, String[] age, @RequestParam List&lt;String&gt; list)</span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"name = "</span> + username);</span><br><span class="line">      System.out.println(<span class="string">"age = "</span> + Arrays.toString(age));</span><br><span class="line">      System.out.println(<span class="string">"list = "</span> + list);</span><br><span class="line">      <span class="comment">//默认返回的字符串会被作为资源路径</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">"&#123;'info':'springmvc'&#125;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置请求路径</span></span><br><span class="line">   <span class="meta">@RequestMapping</span>(<span class="string">"/param2"</span>)</span><br><span class="line">   <span class="comment">//设置返回结果是响应体的内容</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="comment">//默认SpringMvc中文支持江yyyy/MM/dd 格式的字符转换成Date对象</span></span><br><span class="line">   <span class="comment">//如果格式不对，需要添加@DateTimeFormat 修改格式</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String  <span class="title">param2</span><span class="params">(@DateTimeFormat(pattern = <span class="string">"yyyy-MM-dd "</span>)</span> Date date)</span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"date = "</span> + date);</span><br><span class="line">       <span class="comment">//默认返回的字符串会被作为资源路径</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">"&#123;'info':'json'&#125;"</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>发送Json的请求使用</li>
</ul>
<ol>
<li>导入依赖</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>配置类添加注解，开启Json转换</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringMvcConfig</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>添加@ResquestBoby注解   备注为Json对象</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置请求路径</span></span><br><span class="line">   <span class="meta">@RequestMapping</span>(<span class="string">"/json"</span>)</span><br><span class="line">   <span class="comment">//设置返回结果是响应体的内容</span></span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String  <span class="title">json</span><span class="params">(@RequestBody User user)</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"user = "</span> + user);</span><br><span class="line">       <span class="comment">//默认返回的字符串会被作为资源路径</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">"&#123;'info':'json'&#125;"</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>发送Json响应</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/toPage"</span>)</span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">如果返回值是String，将会把数据转成字符串的形式响应到客户端</span></span><br><span class="line"><span class="comment">如果返回值是一个实体类型，内部会利用jackSon将实体对象转成json格式字符串，响应到客户端</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Brand <span class="title">toPage</span><span class="params">()</span></span>&#123;</span><br><span class="line">      Brand brand = <span class="keyword">new</span> Brand();</span><br><span class="line">      brand.setBrandname(<span class="string">"你好"</span>);</span><br><span class="line">      <span class="keyword">return</span> brand;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="3-REST风格"><a href="#3-REST风格" class="headerlink" title="3.REST风格"></a>3.REST风格</h4><blockquote>
<p>REST，表现形式状态转换<br>通过使用==行为动作==区分资源进行了何种操作</p>
<p>注意：是约定方法，不是规范；描述模块的名称通常使用复数，加s的格式描述，表示此类资源，而不是单个</p>
<p>特点：</p>
<ul>
<li>请求参数的携带方式不同</li>
<li>通过请求方式来描述不同的行为</li>
<li>增：POST</li>
<li>删：DELETE</li>
<li>改：PUT</li>
<li>查：GET</li>
</ul>
<p>REST的使用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//REST风格</span></span><br><span class="line"><span class="comment">//post</span></span><br><span class="line">  <span class="comment">//设置请求路径</span></span><br><span class="line">  <span class="meta">@RequestMapping</span>(value = <span class="string">"/users"</span>,method = RequestMethod.POST)</span><br><span class="line">  <span class="comment">//设置返回结果是响应体的内容</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String  <span class="title">post</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"UserController   save..."</span>);</span><br><span class="line">      <span class="comment">//默认返回的字符串会被作为资源路径</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">"&#123;'info':'springmvc'&#125;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置请求路径</span></span><br><span class="line">  <span class="meta">@RequestMapping</span>(value = <span class="string">"/users/&#123;id&#125;"</span>,method =RequestMethod.DELETE)</span><br><span class="line">  <span class="comment">//设置返回结果是响应体的内容</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="comment">//有参数需要添加注解@PathVariable</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String  <span class="title">DELETE</span><span class="params">(@PathVariable Integer id)</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"id = "</span> + id);</span><br><span class="line">      <span class="comment">//默认返回的字符串会被作为资源路径</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">"&#123;'info':'springmvc'&#125;"</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<p><strong>简化开发</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//集合Countroller和value</span></span><br><span class="line">&gt;<span class="meta">@RestController</span></span><br><span class="line">&gt;<span class="meta">@RequestMapping</span>(<span class="string">"/brands"</span>)</span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController2</span> </span>&#123;</span><br><span class="line">  <span class="comment">//删除</span></span><br><span class="line">  <span class="meta">@DeleteMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</span><br><span class="line">  <span class="comment">//设置返回结果是响应体的内容</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="comment">//有参数需要添加注解@PathVariable</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String  <span class="title">DELETE</span><span class="params">(@PathVariable Integer id)</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"id = "</span> + id);</span><br><span class="line">      <span class="comment">//默认返回的字符串会被作为资源路径</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">"&#123;'delete':'springmvc'&#125;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//添加</span></span><br><span class="line">  <span class="meta">@PostMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</span><br><span class="line">  <span class="comment">//设置返回结果是响应体的内容</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="comment">//有参数需要添加注解@PathVariable</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String  <span class="title">post</span><span class="params">(@PathVariable Integer id)</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"id = "</span> + id);</span><br><span class="line">      <span class="comment">//默认返回的字符串会被作为资源路径</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">"&#123;'post':'springmvc'&#125;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//查询</span></span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</span><br><span class="line">  <span class="comment">//设置返回结果是响应体的内容</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="comment">//有参数需要添加注解@PathVariable</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String  <span class="title">get</span><span class="params">(@PathVariable Integer id)</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"id = "</span> + id);</span><br><span class="line">      <span class="comment">//默认返回的字符串会被作为资源路径</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">"&#123;'get':'springmvc'&#125;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//修改</span></span><br><span class="line">  <span class="meta">@PutMapping</span>(<span class="string">"/&#123;id&#125;"</span>)</span><br><span class="line">  <span class="comment">//设置返回结果是响应体的内容</span></span><br><span class="line">  <span class="meta">@ResponseBody</span></span><br><span class="line">  <span class="comment">//有参数需要添加注解@PathVariable</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String  <span class="title">put</span><span class="params">(@PathVariable Integer id)</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"id = "</span> + id);</span><br><span class="line">      <span class="comment">//默认返回的字符串会被作为资源路径</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">"&#123;'put':'springmvc'&#125;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>



<h4 id="页面交互"><a href="#页面交互" class="headerlink" title="页面交互"></a>页面交互</h4><ul>
<li>创建资源访问路径</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Configuration</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringMvcSupport</span>  <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//方式一</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//路径指向访问文件</span></span><br><span class="line">       registry.addResourceHandler(<span class="string">"/css/*"</span>).addResourceLocations(<span class="string">"/css/"</span>);</span><br><span class="line">       registry.addResourceHandler(<span class="string">"/pages/*"</span>).addResourceLocations(<span class="string">"/pages/"</span>);</span><br><span class="line">       registry.addResourceHandler(<span class="string">"/plugins/*"</span>).addResourceLocations(<span class="string">"/plugins/"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//方式二</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> </span>&#123;</span><br><span class="line">       configurer.enable();</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="4-SSM整合"><a href="#4-SSM整合" class="headerlink" title="4.SSM整合"></a>4.SSM整合</h4><blockquote>
<p>接口涵盖：请求路径、请求参数、共同、非共同、响应结果</p>
<p>方式一： 响应结果、结果code、响应语句</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">/**</span></span><br><span class="line"><span class="comment">* 字段不是固定 根据需求可自行加减</span></span><br><span class="line"><span class="comment">* 提供若干个方法 方便操作</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">/*</span></span><br><span class="line"><span class="comment">&gt;* 一个接口</span></span><br><span class="line"><span class="comment">&gt;* 请求的路径</span></span><br><span class="line"><span class="comment">&gt;* 请求的参数</span></span><br><span class="line"><span class="comment">&gt;* 共同</span></span><br><span class="line"><span class="comment">&gt;* 非共同</span></span><br><span class="line"><span class="comment">&gt;* 响应结果</span></span><br><span class="line"><span class="comment">&gt;* */</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Result</span> </span>&#123;</span><br><span class="line">   <span class="comment">// 描述统一格式中的数据</span></span><br><span class="line">   <span class="keyword">private</span> Object data;</span><br><span class="line">   <span class="comment">// 描述统一格式中的编码，用于区分操作，可以简化配置0或1表示成功失败</span></span><br><span class="line">   <span class="keyword">private</span> Integer code;</span><br><span class="line">   <span class="comment">// 描述统一格式中的响应消息</span></span><br><span class="line">   <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Result</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Result</span><span class="params">(Integer code,Object data)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.data = data;</span><br><span class="line">       <span class="keyword">this</span>.code = code;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Result</span><span class="params">(Integer code, Object data, String msg)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.data = data;</span><br><span class="line">       <span class="keyword">this</span>.code = code;</span><br><span class="line">       <span class="keyword">this</span>.msg = msg;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> data;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setData</span><span class="params">(Object data)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.data = data;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Integer <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> code;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCode</span><span class="params">(Integer code)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.code = code;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getMsg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> msg;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsg</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.msg = msg;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<p>Code:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Code</span> </span>&#123;</span><br><span class="line">   <span class="comment">//代表成功或者失败的标记</span></span><br><span class="line">   <span class="comment">//1  成功    0失败</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Integer SAVE_OK = <span class="number">20011</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Integer DELETE_OK = <span class="number">20021</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Integer UPDATE_OK = <span class="number">20031</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Integer GET_OK = <span class="number">20041</span>;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Integer SAVE_ERR = <span class="number">20010</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Integer DELETE_ERR = <span class="number">20020</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Integer UPDATE_ERR = <span class="number">20030</span>;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Integer GET_ERR = <span class="number">20040</span>;</span><br><span class="line"></span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<p>异常处理器：</p>
<ul>
<li>集中的同意的处理项目中出现的异常</li>
</ul>
<p>异常处理器的使用：</p>
<ul>
<li>添加@RestControllerAdvice 注解 ，声明异常处理类，包含了@ResponseBody注解与@Component注解功能</li>
<li>方法上添加@ExceptionHandler注解，设置指定异常的处理方案，功能</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//异常类</span></span><br><span class="line">&gt;<span class="comment">//声明成异常处理器类</span></span><br><span class="line">&gt;<span class="meta">@RestControllerAdvice</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProjectExceptionAdvice</span> </span>&#123;</span><br><span class="line">   <span class="comment">//声明处理哪一类异常</span></span><br><span class="line">   <span class="meta">@ExceptionHandler</span>(Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">   <span class="title">public</span> <span class="title">Result</span> <span class="title">doException</span>(<span class="title">Exception</span> <span class="title">ex</span>)</span>&#123;</span><br><span class="line">       <span class="keyword">return</span>  <span class="keyword">new</span> Result(<span class="keyword">null</span>,<span class="number">666</span>,<span class="string">"异常错误"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>



<h4 id="项目异常分类"><a href="#项目异常分类" class="headerlink" title="项目异常分类"></a><strong>项目异常分类</strong></h4><ul>
<li>业务异常<ul>
<li>规范的用户行为产生的异常</li>
<li>不规范的用户行为操作产生的异常</li>
</ul>
</li>
<li>系统异常<ul>
<li>项目运行过程中可预计且无法避免的异常</li>
</ul>
</li>
<li>其他异常<ul>
<li>编程人员未预期的异常</li>
</ul>
</li>
</ul>
<p><strong>项目处理方式</strong></p>
<ul>
<li>业务异常<ul>
<li>发送对应消息床底给用户，提醒规范操作</li>
</ul>
</li>
<li>系统异常<ul>
<li>发送固定消息传递给用户，安抚用户</li>
<li>*记录日志</li>
<li>发送给运维人员</li>
</ul>
</li>
<li>其他异常<ul>
<li>发送固定消息传递给用户，安抚用户</li>
<li>*记录日志</li>
<li>发送给编程人员</li>
</ul>
</li>
</ul>
<p><strong>项目分异常的处理：</strong></p>
<ul>
<li>创建异常响应码</li>
<li>创建异常类，制定三种异常响应情况</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;异常响应码</span><br><span class="line">   public static final Integer SYSTEM_ERR &#x3D; 50001;</span><br><span class="line">   public static final Integer SYSTEM_TIMEOUT_ERR &#x3D; 50002;</span><br><span class="line">   public static final Integer SYSTEM_UNKNOW_ERR &#x3D; 59999;</span><br><span class="line"></span><br><span class="line">   public static final Integer BUSINESS_ERR &#x3D; 60002;</span><br><span class="line">   &#x2F;&#x2F;声明成异常处理器类</span><br><span class="line">&gt;@RestControllerAdvice</span><br><span class="line">&gt;public class ProjectExceptionAdvice &#123;</span><br><span class="line">   &#x2F;&#x2F;声明处理哪一类异常</span><br><span class="line">   @ExceptionHandler(Exception.class)</span><br><span class="line">   public Result doException(Exception ex) &#123;</span><br><span class="line">       &#x2F;&#x2F;记录日志</span><br><span class="line">       &#x2F;&#x2F;发送消息给运维</span><br><span class="line">       &#x2F;&#x2F;发送邮件给开发人员,ex对象发送给开发人员</span><br><span class="line">       return new Result(Code.SYSTEM_UNKNOW_ERR, null, &quot;系统繁忙，请稍后再试！&quot;);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   @ExceptionHandler(SystemException.class)</span><br><span class="line">   public Result doSystemException(SystemException ex) &#123;</span><br><span class="line">       &#x2F;&#x2F;记录日志</span><br><span class="line">       &#x2F;&#x2F;发送消息给运维</span><br><span class="line">       &#x2F;&#x2F;发送邮件给开发人员</span><br><span class="line">       return new Result(ex.getCode(), null, ex.getMessage());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   @ExceptionHandler(BusinessException.class)</span><br><span class="line">   public Result doBusinessException(BusinessException ex) &#123;</span><br><span class="line">       return new Result(ex.getCode(), null, ex.getMessage());</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="5-拦截器"><a href="#5-拦截器" class="headerlink" title="5.拦截器"></a>5.拦截器</h4><blockquote>
<p>拦截器的概念：一种动态拦截方法调用的机制，在SpringMvc中动态拦截控制器方法的执行</p>
<p>作用：</p>
<ul>
<li>在指定的方法调用前后执行预先设定的代码</li>
<li>阻止原始方法的执行</li>
</ul>
<p>执行时机：在控制器的前或后执行</p>
<p>拦截器与过滤器区别</p>
<ul>
<li>归属不同：Filter属于Servlet技术，Interceptor属于SpringMvc技术</li>
<li>拦截内容：Filter对所有访问增强，Interceptor仅针对SpringMvc的访问进行增强  </li>
</ul>
<p>拦截器的使用：</p>
<ul>
<li>创建一个拦截器类，配置拦截</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//声明拦截器类</span></span><br><span class="line">&gt;<span class="meta">@Component</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Projectinterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 拦截之前</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"preHandle..."</span>);</span><br><span class="line">       <span class="comment">//可以终止原始操作的执行</span></span><br><span class="line">        <span class="comment">//相当于拦截器放行  true  放行  false  拦截</span></span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 控制器方法正常执行之后</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> modelAndView</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"postHandle..."</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * preHandle返回true 会执行</span></span><br><span class="line"><span class="comment">    * 拦截之后</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"afterCompletion..."</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置拦截器基本配置</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringMvcSupport</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> Projectinterceptor projectinterceptor;</span><br><span class="line">   <span class="comment">//拦截器配置</span></span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//添加需要拦截的内容</span></span><br><span class="line">       registry.addInterceptor(projectinterceptor).addPathPatterns(<span class="string">"/brands"</span>,<span class="string">"/brands/*"</span>);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在配置类扫描拦截器路径</li>
</ul>
<p>注意：可以将拦截器放在Controller目录下，SpringMvc配置类不需要添加扫描目录</p>
<h4 id="拦截器简化配置："><a href="#拦截器简化配置：" class="headerlink" title="拦截器简化配置："></a><strong>拦截器简化配置：</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;@Configuration</span><br><span class="line">&gt;@ComponentScan(&#123;&quot;com.ff.controller&quot;&#125;)</span><br><span class="line">&gt;&#x2F;&#x2F;开启Mvc容器</span><br><span class="line">&gt;@EnableWebMvc</span><br><span class="line">&gt;public class SpingMvcConfig  implements WebMvcConfigurer &#123;</span><br><span class="line"></span><br><span class="line">   @Autowired</span><br><span class="line">   private Projectinterceptor projectinterceptor;</span><br><span class="line">   &#x2F;&#x2F;拦截器配置</span><br><span class="line"></span><br><span class="line">   &#x2F;&#x2F;向前端控制器，注册拦截器对象</span><br><span class="line">   @Override</span><br><span class="line">   public void addInterceptors(InterceptorRegistry registry) &#123;</span><br><span class="line">       &#x2F;&#x2F;添加需要拦截的内容</span><br><span class="line">       registry.addInterceptor(projectinterceptor).addPathPatterns(&quot;&#x2F;brands&quot;,&quot;&#x2F;brands&#x2F;*&quot;);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/11/15/day04_SpringMVC/" data-id="ckvzyymig001k60ue8se69gbt"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-day03_Spring的Aop" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/11/15/day03_Spring%E7%9A%84Aop/"
    >Spring_AOP</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/11/15/day03_Spring%E7%9A%84Aop/" class="article-date">
  <time datetime="2021-11-15T01:06:19.000Z" itemprop="datePublished">2021-11-15</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="Spring的Aop"><a href="#Spring的Aop" class="headerlink" title="Spring的Aop"></a>Spring的Aop</h3><h4 id="1-Aop的简介"><a href="#1-Aop的简介" class="headerlink" title="1. Aop的简介"></a>1. Aop的简介</h4><blockquote>
<p>Aop:面向切面编程，一种编程范式，指导开发者如何组织程序结构</p>
<p>OOP：面向对象编程</p>
<p>作用：在==不惊动原始设计==的基础上为其进行功能增强。简单的说就是在不改变方法源代码的基础上对方法进行功能增强。</p>
<p>Spring：无侵入式/无入侵式</p>
</blockquote>
<h5 id="1-2-AOP的核心概念"><a href="#1-2-AOP的核心概念" class="headerlink" title="1.2. AOP的核心概念"></a>1.2. AOP的核心概念</h5><blockquote>
<p><strong>切入点</strong>：匹配连接点的式子</p>
<ul>
<li>一个切入点可以是一个连接点也可以是多个连接点</li>
</ul>
<p><strong>连接点</strong>：需要执行共性功能的程序</p>
<p><strong>切面</strong>：通知的共性功能和切入点的对应关系</p>
<p><strong>通知</strong>：程序中的共性的功能</p>
<p><strong>通知类</strong>：定义通知的类</p>
<p>切入点在连接点中；切入点范围小</p>
</blockquote>
<h4 id="2-AOP的使用"><a href="#2-AOP的使用" class="headerlink" title="2. AOP的使用"></a>2. AOP的使用</h4><blockquote>
<ul>
<li>导入坐标pom.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>制作连接点方法</li>
<li>制作共性功能</li>
<li>定义切入点</li>
<li>绑定切入点和通知点的关系（切面 绑定）</li>
</ul>
<p><strong>通知类配置</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Component</span></span><br><span class="line">&gt;<span class="comment">//通知类</span></span><br><span class="line">&gt;<span class="meta">@Aspect</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAdvice</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//定义切入点   参数    需要切入的方法</span></span><br><span class="line">  <span class="meta">@Pointcut</span>(<span class="string">"execution(void com.ff.dao.BookDao.updata())"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pt</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//绑定切入点和共性方法的关系</span></span><br><span class="line">  <span class="comment">//设置在执行之前</span></span><br><span class="line">  <span class="meta">@Before</span>(<span class="string">"pt()"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">mehtod</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(System.currentTimeMillis());</span><br><span class="line">  &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<p>说明：切入点定义依托一个不具有实际意义的方法进行，即无参数，无返回值，方法体无实际逻辑</p>
<p><strong>配置类配置：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//配置类</span></span><br><span class="line">&gt;<span class="meta">@Configuration</span></span><br><span class="line">&gt;<span class="comment">//扫描注解</span></span><br><span class="line">&gt;<span class="meta">@ComponentScan</span>(<span class="string">"com.ff"</span>)</span><br><span class="line">&gt;<span class="comment">//告知配置类有通知类</span></span><br><span class="line">&gt;<span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfig</span> </span>&#123;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>dao和实现类：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//数据层</span></span><br><span class="line">&gt;<span class="meta">@Repository</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title">BookDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(System.currentTimeMillis());</span><br><span class="line">      System.out.println(<span class="string">"book dao save ..."</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updata</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"book dao updata..."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>



</blockquote>
<h5 id="2-1-AOP的工作流程"><a href="#2-1-AOP的工作流程" class="headerlink" title="2.1 AOP的工作流程"></a><strong>2.1 AOP的工作流程</strong></h5><blockquote>
<ol>
<li><p>Spring容器启动</p>
</li>
<li><p>读取所有切面配置中的切入点</p>
</li>
<li><p>初始化Bean,判定对应的类中的方法是否匹配到任意切入点</p>
<ol>
<li><p>匹配失败，创建对象        </p>
</li>
<li><p>匹配成功，创建原始对象（目标对象）的代理对象</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//匹配失败</span></span><br><span class="line">com.ff.dao.Impl.BookDaoImpl@<span class="number">10f</span>eca44</span><br><span class="line"><span class="comment">//匹配成功</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">sun</span>.<span class="title">proxy</span>.$<span class="title">Proxy21</span>   </span></span><br></pre></td></tr></table></figure>
</li>
<li><p>获取bean执行方法</p>
<ol>
<li>获取bean，调用方法并执行，完成操作</li>
<li>获取的bean是代理对象时，根据代理对象的运行模式运行原始方法与增强的内容，完成操作</li>
</ol>
</li>
</ol>
</blockquote>
<h5 id="2-2-AOP的切入点表达式"><a href="#2-2-AOP的切入点表达式" class="headerlink" title="2.2 AOP的切入点表达式"></a><strong>2.2 AOP的切入点表达式</strong></h5><blockquote>
<p>切入点表达式：要进行增强的方法的描述方法</p>
<p>描述方法：</p>
<ul>
<li>到接口类  @Pointcut(“execution(void com.ff.dao.BookDao.Updata())”)</li>
<li>到接口实现类   @Pointcut(“execution(void com.ff.dao.Impl.BookDaoImpl.updata())”)</li>
</ul>
<p>切入点表达式标准格式：动作关键字（访问修饰符  返回值   全路径类名.方法名（参数）异常名）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut</span>(<span class="string">"execution(void com.ff.dao.BookDao.updata())"</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>动作关键字：描述切入点的行为动作 </li>
<li>访问修饰符: public ，private等  可以省略</li>
<li>返回值</li>
<li>包名</li>
<li>类/接口名</li>
<li>方法名</li>
<li>参数</li>
<li>异常名：方法定义中抛出指定异常，可以省略</li>
</ul>
<p>通配符：</p>
<ul>
<li><code>*</code>  表示任意一个的类名/包名/方法名/返回值 /任意一个参数</li>
<li><code>..</code>   表示任意数量的类名/包名/方法名/返回值 /任意参数</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//任意一个参数</span></span><br><span class="line">&gt;<span class="meta">@Pointcut</span>(<span class="string">"execution(void com.ff.dao.BookDao.updata(*))"</span>)</span><br><span class="line">&gt;<span class="comment">//任意包名/方法名/返回值</span></span><br><span class="line">&gt;<span class="meta">@Pointcut</span>(<span class="string">"execution(* com.ff.dao.*.*())"</span>)</span><br><span class="line">&gt;<span class="comment">//u开头的方法</span></span><br><span class="line">&gt;<span class="meta">@Pointcut</span>(<span class="string">"execution(void com.ff.dao.BookDao.u*())"</span>)</span><br><span class="line">&gt;<span class="comment">//a结尾的方法</span></span><br><span class="line">&gt;<span class="meta">@Pointcut</span>(<span class="string">"execution(void com.ff.dao.BookDao.*a())"</span>)</span><br><span class="line">&gt;<span class="comment">//任意数量参数</span></span><br><span class="line">&gt;<span class="meta">@Pointcut</span>(<span class="string">"execution(void com.ff.dao.BookDao.updata(..))"</span>)</span><br></pre></td></tr></table></figure>



</blockquote>
<h5 id="2-3-AOP的通知类型"><a href="#2-3-AOP的通知类型" class="headerlink" title="2.3 AOP的通知类型"></a><strong>2.3 AOP的通知类型</strong></h5><blockquote>
<p>AOP通知分为五种类型</p>
<ul>
<li>前置通知</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置在执行之前</span></span><br><span class="line">   <span class="meta">@Before</span>(<span class="string">"pt()"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">mehtod</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(System.currentTimeMillis());</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>后置通知</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置在执行之后</span></span><br><span class="line"><span class="meta">@After</span>(<span class="string">"pt()"</span>)</span><br><span class="line"> <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">     System.out.println(System.currentTimeMillis());</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>环绕通知</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">//环绕通知 前后都有</span></span><br><span class="line">   <span class="comment">//参数  代理的原始方法</span></span><br><span class="line">   <span class="comment">//切入点有返回值   通知需要同步返回</span></span><br><span class="line"><span class="comment">//不能确认方法时候会有异常，调用需要强制抛出</span></span><br><span class="line"><span class="comment">//如果有接收返回值，必须设定为Object类型</span></span><br><span class="line">   <span class="meta">@Around</span>(<span class="string">"pt()"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"around before.."</span>);</span><br><span class="line">       <span class="comment">//对原始方法的调用</span></span><br><span class="line">       pjp.proceed();</span><br><span class="line">       System.out.println(<span class="string">"around after..."</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>返回后通知</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//方法正常结束好后才会执行</span></span><br><span class="line">  <span class="meta">@AfterReturning</span>(<span class="string">"pt()"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"afterReturning....."</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>抛出异常后通知</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//抛出异常后执行</span></span><br><span class="line">   <span class="meta">@AfterThrowing</span>(<span class="string">"pt()"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterThrowing</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"afterThrowing...."</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h5 id="案例-测试业务层接口执行效率"><a href="#案例-测试业务层接口执行效率" class="headerlink" title="案例:测试业务层接口执行效率"></a>案例:测试业务层接口执行效率</h5><blockquote>
<p>需求：任意业务层接口执行均可以显示其执行效率（执行时长）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口执行效率</span></span><br><span class="line">   <span class="meta">@Around</span>(<span class="string">"pt()"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">timeResult</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">       <span class="comment">//一次执行的签名信息</span></span><br><span class="line">       Signature signature = pjp.getSignature();</span><br><span class="line">       <span class="comment">//类型名</span></span><br><span class="line">       String classname = signature.getDeclaringTypeName();</span><br><span class="line">       <span class="comment">//方法名</span></span><br><span class="line">       String name = signature.getName();</span><br><span class="line"></span><br><span class="line">       <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">           pjp.proceed();</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">long</span> endTime = System.currentTimeMillis();</span><br><span class="line">       <span class="keyword">long</span> resultTimme = endTime - startTime;</span><br><span class="line">       System.out.println(<span class="string">"执行时间："</span> + classname + <span class="string">"."</span> + name + <span class="string">"-----&gt;"</span> + resultTimme + <span class="string">"ms"</span>);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h5 id="2-4-AOP通知获取数据"><a href="#2-4-AOP通知获取数据" class="headerlink" title="2.4 AOP通知获取数据"></a>2.4 AOP通知获取数据</h5><blockquote>
<ul>
<li>获取参数<ul>
<li>JoinPoint：是和前置、后置、返回后、抛出异常后通知</li>
<li>ProceedJointPoint：适用于环绕通知</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@After</span>(<span class="string">"pt()"</span>)</span><br><span class="line"> <span class="meta">@Before</span>(<span class="string">"pt()"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mehtod</span><span class="params">(JoinPoint jp)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//获取参数</span></span><br><span class="line">       Object[] args = jp.getArgs();</span><br><span class="line">       System.out.println(System.currentTimeMillis());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Around</span>(<span class="string">"pt()"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">       <span class="comment">//获取参数	可以修改后再次回传</span></span><br><span class="line">       Object[] args = pjp.getArgs();</span><br><span class="line">       System.out.println(<span class="string">"around before.."</span>);</span><br><span class="line">       <span class="comment">//对原始方法的调用</span></span><br><span class="line">       pjp.proceed();</span><br><span class="line">       System.out.println(<span class="string">"around after..."</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>获取返回值<ul>
<li>返回后通知</li>
<li>环绕通知</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法正常结束好后才会执行</span></span><br><span class="line">   <span class="meta">@AfterReturning</span>(value = <span class="string">"pt()"</span>,returning = <span class="string">"ret"</span>)</span><br><span class="line"><span class="comment">//参数的顺序不可变</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(JoinPoint jp,String ret)</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"afterReturning....."</span>+ret);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>获取异常<ul>
<li>抛出异常后通知</li>
<li>环绕通知</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//抛出异常后执行</span></span><br><span class="line"><span class="meta">@AfterThrowing</span>(value = <span class="string">"pt()"</span>,throwing = <span class="string">"t"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterThrowing</span><span class="params">(Throwable t)</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"afterThrowing...."</span>+t);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h4 id="Around的五类通知整合格式"><a href="#Around的五类通知整合格式" class="headerlink" title="Around的五类通知整合格式"></a><strong>Around的五类通知整合格式</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Around</span>(<span class="string">"pt()"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">aroundAll</span><span class="params">(ProceedingJoinPoint pjp)</span> </span>&#123;</span><br><span class="line">       Object proceed = <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           System.out.println(<span class="string">"前置.."</span>);</span><br><span class="line">           <span class="comment">//对原始方法的调用</span></span><br><span class="line">           proceed = pjp.proceed();</span><br><span class="line">           System.out.println(<span class="string">"返回后..."</span>);</span><br><span class="line">       &#125;  <span class="keyword">catch</span> (Throwable throwable) &#123;</span><br><span class="line">           System.out.println(<span class="string">"异常通知..."</span>);</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           System.out.println(<span class="string">"后置通知..."</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> proceed;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="3-AOP的事务管理"><a href="#3-AOP的事务管理" class="headerlink" title="3. AOP的事务管理"></a>3. AOP的事务管理</h4><blockquote>
<p>事务作用：在数据层保障一系列的数据库操作同失败同成功</p>
<p>Spring事务作用：在数据层或业务层保障一系列的数据库操作</p>
<p>使用：</p>
<ul>
<li>添加依赖坐标pom.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在业务层的接口上添加注解：@Transient  开启事务</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transient</span></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">result</span><span class="params">(String url,String key)</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>在配置类添加第三方Bean，设置事务管理器：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Bean</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> PlatformTransactionManager <span class="title">platformTransactionManager</span><span class="params">(DataSource dataSource)</span></span>&#123;</span><br><span class="line">       DataSourceTransactionManager ptm = <span class="keyword">new</span> DataSourceTransactionManager();</span><br><span class="line">       ptm.setDataSource(dataSource);</span><br><span class="line">       <span class="keyword">return</span> ptm;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在配置类，添加 @EnableTransactionManagement   注解扫描事务注解</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@EnableTransactionManagement</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfig</span> </span>&#123;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h5 id="3-1-Spring-事务角色"><a href="#3-1-Spring-事务角色" class="headerlink" title="3.1 Spring 事务角色"></a>3.1 Spring 事务角色</h5><blockquote>
<p>事务角色：</p>
<ul>
<li>事务管理员：发起事务方，在Spring中通常指代业务层开启事务的方法</li>
<li>事务协调员：加入事务方，在Spring中指代数据层方法，也可以是业务层方法</li>
</ul>
</blockquote>
<h5 id="3-2-Spring-事务属性"><a href="#3-2-Spring-事务属性" class="headerlink" title="3.2 Spring 事务属性"></a>3.2 Spring 事务属性</h5><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&#x2F;&#x2F;运行时异常、编译时异常</span><br><span class="line">@Transactional(rollbackFor &#x3D; Exception.)</span><br><span class="line">  void result(String url,String key);</span><br></pre></td></tr></table></figure>


</blockquote>
<h5 id="3-3-Spring-事务传播行为"><a href="#3-3-Spring-事务传播行为" class="headerlink" title="3.3 Spring 事务传播行为"></a>3.3 Spring 事务传播行为</h5><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&#x2F;&#x2F; 表示会新建一个事务，不会受到其他事务的y</span><br><span class="line">&gt;@Transactional(rollbackFor &#x3D; Exception.class,propagation &#x3D; Propagation.REQUIRES_NEW)</span><br><span class="line">   int removeLog(Brand brand);	</span><br></pre></td></tr></table></figure>


</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/11/15/day03_Spring%E7%9A%84Aop/" data-id="ckvzyymie001f60ue81kw61ds"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Day12-Filter&amp;Listener&amp;AJAX" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/11/15/Day12-Filter&Listener&AJAX/"
    >Filter&amp;Listener&amp;AJAX</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/11/15/Day12-Filter&Listener&AJAX/" class="article-date">
  <time datetime="2021-11-15T01:05:19.000Z" itemprop="datePublished">2021-11-15</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-Filter"><a href="#1-Filter" class="headerlink" title="1. Filter"></a>1. Filter</h3><h4 id="1-1-Filter基本概念"><a href="#1-1-Filter基本概念" class="headerlink" title="1.1 Filter基本概念"></a>1.1 Filter基本概念</h4><blockquote>
<p>概念：Filter表示过滤器，是JavaWeb三大组件(Servlet、Filter、Listener)之一</p>
<ul>
<li>过滤器可以吧对资源的请求拦截下来，从而实现一些特殊的功能</li>
<li>过滤器一般完成一些通用的操作，比如：权限控制，统一编码处理、敏感字符处理等等</li>
</ul>
</blockquote>
<h4 id="1-2-Filter使用"><a href="#1-2-Filter使用" class="headerlink" title="1.2 Filter使用"></a>1.2 Filter使用</h4><blockquote>
<ol>
<li><p>写一个类，实现Filter接口</p>
</li>
<li><p>配置过滤器</p>
<ol>
<li>注解@WebFilter(自己写的)</li>
<li>web.xml配置 （别人写的）</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;filter&gt;</span><br><span class="line"> 		&lt;filter-name&gt;xx&lt;/filter-name&gt;</span><br><span class="line">		&lt;filter-<span class="class"><span class="keyword">class</span>&gt;&lt;/<span class="title">filter</span>-<span class="title">class</span>&gt;  //全限定名</span></span><br><span class="line"><span class="class"> 	&lt;/<span class="title">filter</span>&gt;</span></span><br><span class="line"><span class="class"> 	&lt;<span class="title">filter</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class"> 		&lt;<span class="title">filter</span>-<span class="title">name</span>&gt;<span class="title">xx</span>&lt;/<span class="title">filter</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class"> 		&lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/*&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;	 //需要拦截哪些资源 等同于@<span class="title">WebFilter</span></span></span><br><span class="line"><span class="class"> 	&lt;/<span class="title">filter</span>-<span class="title">mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>访问资源测试</p>
</li>
</ol>
</blockquote>
<h4 id="1-3-Filter执行流程"><a href="#1-3-Filter执行流程" class="headerlink" title="1.3 Filter执行流程"></a>1.3 Filter执行流程</h4><blockquote>
<ul>
<li>放行后访问对应资源，资源访问完成后，会继续回到Filter中</li>
<li>回到Filter中，执行放行后的逻辑</li>
</ul>
</blockquote>
<h4 id="1-4-Filter拦截路径配置"><a href="#1-4-Filter拦截路径配置" class="headerlink" title="1.4 Filter拦截路径配置"></a>1.4 Filter拦截路径配置</h4><blockquote>
<ul>
<li>具体资源：/index.jsp        访问这个index.jsp才会拦截</li>
<li>目录拦截：/user/*             访问目录/user下的资源</li>
<li>后缀名拦截：*.jsp             访问后缀名是jsp的资源</li>
<li>拦截所有：/*                      访问所有资源</li>
</ul>
</blockquote>
<h4 id="1-5-Filter过滤器链"><a href="#1-5-Filter过滤器链" class="headerlink" title="1.5 Filter过滤器链"></a>1.5 Filter过滤器链</h4><blockquote>
<ul>
<li><p>一个Web应用，可以配置多个过滤器，这样的过来称之为过滤器链</p>
</li>
<li><p>注解配置的过滤器，按照==类名的自然排序==进行执行</p>
</li>
<li><p>web.xml配置的过滤器，按照filter-mapper的编写顺序进行执行</p>
</li>
<li><p>如果注解和web.xml的混合过滤器/，web.xml优先顺序，后执行注解过滤器</p>
</li>
</ul>
</blockquote>
<h4 id="1-5-Filter使用细节"><a href="#1-5-Filter使用细节" class="headerlink" title="1.5 Filter使用细节"></a>1.5 Filter使用细节</h4><blockquote>
<ul>
<li>注意Filter的执行顺序</li>
<li>Filter执行后需要放行的资源，除需要拦截界面外的资源需要放行</li>
</ul>
</blockquote>
<h3 id="2-Listener"><a href="#2-Listener" class="headerlink" title="2. Listener"></a>2. Listener</h3><h4 id="2-1-Listener"><a href="#2-1-Listener" class="headerlink" title="2.1 Listener"></a>2.1 Listener</h4><blockquote>
<p>listenter：监听器</p>
<p>使用：</p>
<ul>
<li>实现ServletCountextListener接口</li>
<li>重写接口方法</li>
<li>在类上添加@WebListener注解</li>
</ul>
</blockquote>
<h3 id="3-AJAX"><a href="#3-AJAX" class="headerlink" title="3. AJAX"></a>3. AJAX</h3><blockquote>
<ul>
<li><p>概念：AJAX：异步的JavaScript和XML</p>
</li>
<li><p>作用：</p>
</li>
<li><p>与服务器进行数据交换：通过AJAX可以给服务器发送请求，并获取服务器响应的数据</p>
<p>使用AJAX和服务器通信，就可以使用HTML+AJAX替换JSP页面</p>
</li>
<li><p>异步交互：可以在不重新加载整个页面的情况下，与服务器交换数据并更新网页的技术：如：搜索联想，用户是否可用校验</p>
</li>
<li><p>同步异步区别：</p>
<ul>
<li>同步：浏览器发送请求需要等待服务器响应</li>
<li>异步：浏览器发送请求不需要等待服务器响应，可以同时进行</li>
</ul>
</li>
</ul>
<p>AJAX可以执行局部更新</p>
</blockquote>
<h4 id="3-1-异步框架Axios"><a href="#3-1-异步框架Axios" class="headerlink" title="3.1 异步框架Axios"></a>3.1 异步框架Axios</h4><blockquote>
<p>Axios 对原生的AJAX进行封装，简化书写。</p>
<p>Axios官网是：<code>https://www.axios-http.cn</code></p>
<p>导入：axios-0.18.0.js包</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">axios(&#123;</span><br><span class="line">           method:<span class="string">"post"</span>,  &lt;--post/get --&gt;</span><br><span class="line">           url:<span class="string">"http://localhost:8848/selectUserByIdServlet"</span>,</span><br><span class="line">           data:<span class="string">"username="</span>+username	</span><br><span class="line">               &lt;-- 全限定类名 get需要添加在后面参数,post可以使用data标签 --&gt;</span><br><span class="line">       &#125;).then(function (resp) &#123;</span><br><span class="line">          alert(resp.data);       </span><br><span class="line">       &#125;)</span><br></pre></td></tr></table></figure>

<p><code>axios()</code> 是用来发送异步请求的，小括号中使用 js 对象传递请求相关的参数：</p>
<ul>
<li><code>method</code> 属性：用来设置请求方式的。取值为 <code>get</code> 或者 <code>post</code>。</li>
<li><code>url</code> 属性：用来书写请求的资源路径。如果是 <code>get</code> 请求，需要将请求参数拼接到路径的后面，格式为： <code>url?参数名=参数值&amp;参数名2=参数值2</code>。</li>
<li><code>data</code> 属性：作为请求体被发送的数据。也就是说如果是 <code>post</code> 请求的话，数据需要作为 <code>data</code> 属性的值。</li>
</ul>
<p><code>then()</code> 需要传递一个匿名函数。我们将 <code>then()</code> 中传递的匿名函数称为 ==回调函数==，意思是该匿名函数在发送请求时不会被调用，而是在成功响应后调用的函数。而该回调函数中的 <code>resp</code> 参数是对响应的数据进行封装的对象，通过 <code>resp.data</code> 可以获取到响应的数据。</p>
<p><strong>别名</strong></p>
<p>了方便起见， Axios 已经为所有支持的请求方法提供了别名。如下：</p>
<ul>
<li><code>get</code> 请求 ： <code>axios.get(url[,config])</code></li>
<li><code>delete</code> 请求 ： <code>axios.delete(url[,config])</code></li>
<li><code>head</code> 请求 ： <code>axios.head(url[,config])</code></li>
<li><code>options</code> 请求 ： <code>axios.option(url[,config])</code></li>
<li><code>post</code> 请求：<code>axios.post(url[,data[,config])</code></li>
<li><code>put</code> 请求：<code>axios.put(url[,data[,config])</code></li>
<li><code>patch</code> 请求：<code>axios.patch(url[,data[,config])</code></li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;-- get --&gt;</span><br><span class="line">&gt;axios.get(<span class="string">"http://localhost:8080/ajax-demo/axiosServlet?username=zhangsan"</span>).then(function (resp) &#123;</span><br><span class="line">   alert(resp.data);</span><br><span class="line">&gt;&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;-- post --&gt;</span><br><span class="line">&gt;axios.post(<span class="string">"http://localhost:8080/ajax-demo/axiosServlet"</span>,<span class="string">"username=zhangsan"</span>).then(function (resp) &#123;</span><br><span class="line">   alert(resp.data);</span><br><span class="line">&gt;&#125;)</span><br></pre></td></tr></table></figure>


</blockquote>
<h3 id="4-JSON"><a href="#4-JSON" class="headerlink" title="4. JSON"></a>4. JSON</h3><blockquote>
<p>格式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;var 变量名 = '&#123;"key":value,"key":value,...&#125;';</span><br></pre></td></tr></table></figure>

<p><code>JSON</code> 串的键要求必须使用双引号括起来，而值根据要表示的类型确定。value 的数据类型分为如下</p>
<ul>
<li>数字（整数或浮点数）</li>
<li>字符串（使用双引号括起来）</li>
<li>逻辑值（true或者false）</li>
<li>数组（在方括号中）</li>
<li>对象（在花括号中）</li>
<li>null</li>
</ul>
<p>JSON和实体类的相互转换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> User user = <span class="keyword">new</span> User();</span><br><span class="line">      user.setId(<span class="number">1</span>);</span><br><span class="line">      user.setUsername(<span class="string">"李四"</span>);</span><br><span class="line">      user.setPassword(<span class="string">"123"</span>);</span><br><span class="line">      user.setTel(<span class="string">"111111"</span>);</span><br><span class="line"><span class="comment">//实体对象转换成JSON语句</span></span><br><span class="line">      String string = JSON.toJSONString(user);</span><br><span class="line">      System.out.println(<span class="string">"string = "</span> + string);</span><br><span class="line"><span class="comment">//JSON解析成实体对象</span></span><br><span class="line">      User user1 = JSON.parseObject(string, User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">      System.out.println(<span class="string">"user1 = "</span> + user1);</span><br></pre></td></tr></table></figure>

</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/11/15/Day12-Filter&Listener&AJAX/" data-id="ckvzyymi2000t60ue4o3l2ct1"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-Web/" rel="tag">Java Web</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-day02_注解开发" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/11/07/day02_%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/"
    >Spring注解开发</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/11/07/day02_%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/" class="article-date">
  <time datetime="2021-11-07T13:16:19.000Z" itemprop="datePublished">2021-11-07</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="Spring-注解开发"><a href="#Spring-注解开发" class="headerlink" title="Spring 注解开发"></a>Spring 注解开发</h3><h4 id="1-数据源对象管理"><a href="#1-数据源对象管理" class="headerlink" title="1.数据源对象管理"></a>1.数据源对象管理</h4><h5 id="1-1-管理第三方资源–druid"><a href="#1-1-管理第三方资源–druid" class="headerlink" title="1.1 管理第三方资源–druid"></a>1.1 管理第三方资源–druid</h5><blockquote>
<ul>
<li>导入依赖坐标</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>配置文件配置</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysq:///spring_dao"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>查找驱动依赖网站：<a href="https://mvnrepository.com/" target="_blank" rel="noopener">https://mvnrepository.com/</a></p>
</blockquote>
<h5 id="1-2-未知第三方资源–c3p0"><a href="#1-2-未知第三方资源–c3p0" class="headerlink" title="1.2 未知第三方资源–c3p0"></a>1.2 未知第三方资源–c3p0</h5><blockquote>
<ul>
<li>导入依赖坐标</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!-- https://mvnrepository.com/artifact/c3p0/c3p0 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>配置文件配置</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--导入路径 --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span>  <span class="attr">id</span>=<span class="string">"dataSoure"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span> &gt;</span></span><br><span class="line">   		<span class="comment">&lt;!--基本配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"dbc:mysq:///spring_dao"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="2-加载properties文件"><a href="#2-加载properties文件" class="headerlink" title="2. 加载properties文件"></a>2. 加载properties文件</h4><blockquote>
<ul>
<li>新建*.properties文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--对应那个资源，在命名前增加前缀，避免和系统属性名重复--&gt;</span></span><br><span class="line">&gt;jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">&gt;jdbc.url=jdbc:mysq:///spring_dao?useSSL = false<span class="symbol">&amp;amp;</span>characterEncoding=utf-8</span><br><span class="line">&gt;jdbc.username=root</span><br><span class="line">&gt;jdbc.password=root</span><br></pre></td></tr></table></figure>

<ul>
<li>开辟新的命名空间   （尽量使用自动生成的，不要自己修改）</li>
</ul>
<p><strong>命名空间</strong>：封装对应标签的包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line">      &lt;!--新增  复制xmlns 设置命名空间，beans修改成context--&gt; </span><br><span class="line">      xmlns:context="http://www.springframework.org/schema/context"</span><br><span class="line">      xsi:schemaLocation="</span><br><span class="line">       http://www.springframework.org/schema/beans</span><br><span class="line">       http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line"> 		<span class="comment">&lt;!--新增  复制上面两个 ，将beans修改成context--&gt;</span> </span><br><span class="line">       http://www.springframework.org/schema/context</span><br><span class="line">       http://www.springframework.org/schema/context/spring-context.xsd"&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>加载properties文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"jdbc.properties"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用属性占位符${}读取properties文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意事项：</strong></p>
<ul>
<li>系统属性大于properties参数等级</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--解决方法--&gt;</span></span><br><span class="line">&gt;<span class="comment">&lt;!--增加system-properties-mode 属性  定义properties文件为系统属性 --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"jdbc.properties"</span>  <span class="attr">system-properties-mode</span>=<span class="string">"NEVER"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>需要加载多个properties文件格式</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--加载指定properties文件--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"jdbc.properties,jdbc2.properties"</span>  <span class="attr">system-properties-mode</span>=<span class="string">"NEVER"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">&lt;!--加载properties文件格式--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"*.properties"</span>  <span class="attr">system-properties-mode</span>=<span class="string">"NEVER"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">&lt;!--classpath:   当前文件    classpath*:  当前文件和依赖的jar文件都可以读取--&gt;</span></span><br><span class="line">&gt;<span class="comment">&lt;!--加载properties标准格式--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:*.properties"</span>  <span class="attr">system-properties-mode</span>=<span class="string">"NEVER"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="3-容器"><a href="#3-容器" class="headerlink" title="3. 容器"></a>3. 容器</h4><h5 id="3-1-创建容器"><a href="#3-1-创建容器" class="headerlink" title="3.1  创建容器"></a>3.1  <strong>创建容器</strong></h5><blockquote>
<p>使用绝对路径获取配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ios = <span class="keyword">new</span> FileSystemXmlApplicationContext(<span class="string">"E:\\HEIMA\\Demo\\Spring\\Spring02_Other\\src\\main\\resources\\applicationContext.xml"</span>);</span><br></pre></td></tr></table></figure>

<p>相对路径获取配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext ios = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="3-2-获取bean"><a href="#3-2-获取bean" class="headerlink" title="3.2  获取bean"></a>3.2  获取bean</h5><blockquote>
<ul>
<li>使用bean名称</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;BookDao bookDao = (BookDao) ios.getBean(<span class="string">"bookDao"</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>使用bean名称并获取指定类型</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BookDao bookDao = (BookDao) ios.getBean(<span class="string">"bookDao"</span>,BookDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用bean类型获取</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;BookDao bookDao = (BookDao) ios.getBean(BookDao<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="3-3-容器类层次结构"><a href="#3-3-容器类层次结构" class="headerlink" title="3.3  容器类层次结构"></a>3.3  容器类层次结构</h5><h5 id="3-4-BeanFactory"><a href="#3-4-BeanFactory" class="headerlink" title="3.4  BeanFactory"></a>3.4  BeanFactory</h5><blockquote>
<ul>
<li>所有容器的顶层接口</li>
</ul>
</blockquote>
<h4 id="4-核心容器总结"><a href="#4-核心容器总结" class="headerlink" title="4. 核心容器总结"></a>4. 核心容器总结</h4><h4 id="5-注解开发"><a href="#5-注解开发" class="headerlink" title="5.注解开发"></a>5.注解开发</h4><h5 id="5-1-注解开发定义bean"><a href="#5-1-注解开发定义bean" class="headerlink" title="5.1 注解开发定义bean"></a>5.1 注解开发定义bean</h5><blockquote>
<ul>
<li>使用@Component定义Bean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;等同于 ： <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.Impl.BookDaoImpl"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>Dao和Service</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Component</span>(<span class="string">"userDao"</span>)</span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span>  <span class="keyword">implements</span> <span class="title">UDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"user dao compnent..."</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br><span class="line">&gt;<span class="meta">@Component</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> UDao userDao;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(UDao userDao)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"user service save ..."</span>);</span><br><span class="line">       userDao.save();</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>核心配置文件配置注解扫描</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启注解扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.ff"</span> /&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>@Component   Spring有三个衍生注解</strong></p>
<ul>
<li><strong><code>@Controller</code></strong>：用于表现层bean定义</li>
<li><strong><code>@Service</code></strong>：用于业务层bean定义</li>
<li><code>@Repository</code>：用于数据层bean定义</li>
</ul>
</blockquote>
<h5 id="5-2-纯注解开发"><a href="#5-2-纯注解开发" class="headerlink" title="5.2 纯注解开发"></a>5.2 纯注解开发</h5><blockquote>
<p>Java类代替Spring核心配置文件</p>
<p>@Configuration   用于设定当前类为配置类</p>
<p>@ComponentScan  用于设定扫描路径，此注解只能添加一次，多个数据用数组格式</p>
<ul>
<li><p>创建配置类 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//扫描    只能添加一次</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.ff"</span>)</span><br><span class="line"><span class="comment">//加载properties文件</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:mybatis.properties"</span>)</span><br><span class="line"><span class="meta">@Import</span>(&#123;JdbcConfig<span class="class">.<span class="keyword">class</span>,<span class="title">MybatisConfig</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SpringConfig</span> </span>&#123;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">app4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//使用AnnotationConfigApplicationContext 加载配置类的字节码文件</span></span><br><span class="line">        ApplicationContext ios = <span class="keyword">new</span> AnnotationConfigApplicationContext(SpringConfig<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        UDao userDao = (UDao) ios.getBean(<span class="string">"userDao"</span>);</span><br><span class="line">        System.out.println(userDao);</span><br><span class="line">        UserService userService = ios.getBean(UserService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        System.out.println(userService);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<p><strong>生命周期配置：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Scope</span>(<span class="string">"prototype"</span>)     <span class="comment">//多例</span></span><br><span class="line">&gt;<span class="meta">@Scope</span>(<span class="string">"singleton"</span>)		<span class="comment">//单例</span></span><br><span class="line">   </span><br><span class="line">&gt;<span class="meta">@PostConstruct</span>		<span class="comment">//创建后</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"init.."</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;<span class="meta">@PreDestroy</span>			<span class="comment">//销毁前</span></span><br><span class="line">&gt;<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destory</span><span class="params">()</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">" destory.."</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<p><strong>依赖注入：</strong></p>
<p>查找bean的策略</p>
<ol>
<li>先按照类型匹配，如果找到一个，直接匹配成功；</li>
<li>如果有多个，按照名称去匹配，去查找当前变量同名的bean对象</li>
<li>如果多个名称也无法匹配，需要使用@Qualifie指定具体要找的那个bean的名字</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Autowired</span>  <span class="comment">//自动装配   不需要setter  自动加载无参构造</span></span><br><span class="line">&gt;<span class="meta">@Qualifie</span>	<span class="comment">//无法单独使用，必须配合@Autowired注解使用   指定Bean名称和别名</span></span><br><span class="line">&gt;<span class="meta">@Value</span>		<span class="comment">//赋值</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="meta">@Service</span></span><br><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="meta">@Qualifier</span>(<span class="string">"userDao"</span>)</span><br><span class="line">   <span class="keyword">private</span> UDao userDao;</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"李四"</span>)</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="comment">/*  public void setUserDao(UDao userDao) &#123;</span></span><br><span class="line"><span class="comment">       this.userDao = userDao;</span></span><br><span class="line"><span class="comment">   &#125;*/</span></span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"name = "</span> + name);</span><br><span class="line">       System.out.println(<span class="string">"user service save ..."</span>);</span><br><span class="line">       userDao.save();</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>



<p><strong>加载properties文件：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@PropertySource</span>(<span class="string">"classpath:mybatis.properties"</span>)</span><br></pre></td></tr></table></figure>

<p>多个properties文件使用数组形式，不可以使用通配符，不识别</p>
<p><strong>第三方Bean资源注解管理：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//配置类</span></span><br><span class="line">&gt;<span class="meta">@Configuration</span></span><br><span class="line">&gt;<span class="comment">//扫描</span></span><br><span class="line">&gt;<span class="meta">@ComponentScan</span>(<span class="string">"com.ff"</span>)</span><br><span class="line">&gt;<span class="comment">//加载properties文件</span></span><br><span class="line">&gt;<span class="meta">@PropertySource</span>(<span class="string">"mybatis.properties"</span>)</span><br><span class="line">&gt;<span class="comment">//导入第三方配置类</span></span><br><span class="line">&gt;<span class="meta">@Import</span>(&#123;JdbcConfig<span class="class">.<span class="keyword">class</span>,<span class="title">MybatisConfig</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class">&gt;<span class="title">public</span> <span class="title">class</span> <span class="title">SpringConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<p>第三方bean：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcConfig</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.driver&#125;"</span>)</span><br><span class="line">   <span class="keyword">private</span> String driver;</span><br><span class="line">   <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.url&#125;"</span>)</span><br><span class="line">   <span class="keyword">private</span> String url;</span><br><span class="line">   <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.username&#125;"</span>)</span><br><span class="line">   <span class="keyword">private</span> String username;</span><br><span class="line">   <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.password&#125;"</span>)</span><br><span class="line">   <span class="keyword">private</span> String password;</span><br><span class="line">   <span class="comment">//定义一个方法获得需要管理的对象</span></span><br><span class="line">   <span class="comment">//添加@Bean,表示当前是一个Bean</span></span><br><span class="line">   <span class="comment">//参数是自动装配，在容器中寻找</span></span><br><span class="line">   <span class="meta">@Bean</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">(UDao userDao)</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"userDao = "</span> + userDao);</span><br><span class="line">       DruidDataSource ds = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">       ds.setDriverClassName(driver);</span><br><span class="line">       ds.setUrl(url);</span><br><span class="line">       ds.setUsername(username);</span><br><span class="line">       ds.setPassword(password);</span><br><span class="line">       <span class="keyword">return</span>  ds;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="6-整合Mybatis"><a href="#6-整合Mybatis" class="headerlink" title="6. 整合Mybatis"></a>6. 整合Mybatis</h4><blockquote>
<ol>
<li>创建项目<ol>
<li>引入依赖坐标</li>
<li>搭建项目结构</li>
</ol>
</li>
<li>将数据源对象交给Spring容器管理</li>
<li>将整合Mybatis对应两个对象交给Spring<ol>
<li>SqlSessionFactoryBean</li>
<li>MapperScannerConfigurer</li>
</ol>
</li>
<li>将Service交给Spring对象<ol>
<li>在内部注入dao对象</li>
</ol>
</li>
<li>编写配置类，导入所有配置的Bean</li>
<li>编写控制层，进行测试</li>
</ol>
<hr>
<ul>
<li>导入依赖</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">     <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建配置类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//扫描</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.ff"</span>)</span><br><span class="line"><span class="comment">//加载properties文件</span></span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:mybatis.properties"</span>)</span><br><span class="line"><span class="comment">//导入第三方配置类</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;JdbcConfig<span class="class">.<span class="keyword">class</span>,<span class="title">MybatisConfig</span>.<span class="title">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">SpringConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>JdbcConfig类：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.driver&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.url&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.username&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.password&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//定义一个方法获得需要管理的对象</span></span><br><span class="line">    <span class="comment">//添加@Bean,表示当前是一个Bean</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line">        DruidDataSource ds = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">        ds.setDriverClassName(driver);</span><br><span class="line">        ds.setUrl(url);</span><br><span class="line">        ds.setUsername(username);</span><br><span class="line">        ds.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span>  ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>MybatisConfig类：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SqlSessionFactoryBean <span class="title">sqlSessionFactory</span><span class="params">(DataSource dataSource)</span></span>&#123;</span><br><span class="line">        SqlSessionFactoryBean ssfb = <span class="keyword">new</span> SqlSessionFactoryBean();</span><br><span class="line">        ssfb.setTypeAliasesPackage(<span class="string">"com.ff.domain"</span>);</span><br><span class="line">        ssfb.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> ssfb;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MapperScannerConfigurer <span class="title">mapperScannerConfigurer</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MapperScannerConfigurer msc = <span class="keyword">new</span> MapperScannerConfigurer();</span><br><span class="line">        msc.setBasePackage(<span class="string">"com.ff.dao"</span>);</span><br><span class="line">        <span class="keyword">return</span> msc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>properties文件</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://127.0.0.1:3306/spring_dao?useSSL = false</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=root</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>整合junit：</strong></p>
<ul>
<li>导入依赖坐标</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--单元测试--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建测试类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置主运行</span></span><br><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">//导入配置类</span></span><br><span class="line"><span class="class">@<span class="title">ContextConfiguration</span>(<span class="title">classes</span> </span>= SpringConfig<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">AccountServiceTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span>  AccountService accountService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Acount acount = accountService.selectAcount(<span class="number">1</span>);</span><br><span class="line">        System.out.println(acount);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/11/07/day02_%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/" data-id="ckvzyymib001a60ue2ha87m7a"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-day01_Spring" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/11/06/day01_Spring/"
    >Spring入门</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/11/06/day01_Spring/" class="article-date">
  <time datetime="2021-11-06T10:32:19.000Z" itemprop="datePublished">2021-11-06</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h3><h4 id="1-初识Spring技术"><a href="#1-初识Spring技术" class="headerlink" title="1.初识Spring技术"></a>1.初识Spring技术</h4><blockquote>
<p>简化开发：降低企业级开发的复杂性</p>
<ul>
<li>IOC（反转控制）</li>
<li>AOP（面向切面编程）<ul>
<li>事务处理</li>
</ul>
</li>
</ul>
<p>框架整合：高效整合其他技术，提高企业级应用开发与运行效率</p>
<ul>
<li>MyBatis</li>
<li>MyBatis-plus</li>
<li>Struts</li>
<li>Struts2</li>
<li>Hibernate</li>
</ul>
<p>Spring Framework</p>
<p>Spring Boot</p>
<p>Spring Cloud</p>
</blockquote>
<h4 id="2-Spring-Framework技术"><a href="#2-Spring-Framework技术" class="headerlink" title="2. Spring Framework技术"></a>2. Spring Framework技术</h4><blockquote>
<p>Spring Framework的架构 ：是Spring生态的最基本的项目，是其他的框架基础</p>
<ul>
<li>Data Access：数据访问</li>
<li>Data Integration：数据集成</li>
</ul>
<ul>
<li>Web：web开发</li>
</ul>
<ul>
<li>AOP:面向切面编程</li>
<li>Aspects：AOP思想实现</li>
</ul>
<ul>
<li>Core Container：核心容器</li>
</ul>
<ul>
<li>Test:单元测试与集成测试</li>
</ul>
</blockquote>
<h4 id="3-Spring-Framework的核心概念"><a href="#3-Spring-Framework的核心概念" class="headerlink" title="3. Spring Framework的核心概念"></a>3. Spring Framework的核心概念</h4><blockquote>
<p><strong>IoC:控制反转</strong></p>
<ul>
<li>使用对象时，主动new产生对象转换为由外部提供对象，此过程中对象创建控制权由程序转移到外部</li>
</ul>
<p><strong>IoC容器</strong></p>
<ul>
<li>Spring提供了一个容器，称之为IoC容器，用来充当IoC思想中的“外部”</li>
</ul>
<p><strong>Bean</strong></p>
<ul>
<li>IoC容器负责对象的创建、初始化等一系列工作，被创建或被管理的对象在IoC容器中统称为Bean</li>
</ul>
</blockquote>
<h4 id="4-IoC的使用"><a href="#4-IoC的使用" class="headerlink" title="4. IoC的使用"></a>4. IoC的使用</h4><blockquote>
<ul>
<li><p>通过pom.xml导入Spring坐标</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">--Spring-context</span> 依赖坐标 <span class="attr">--</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE <span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>IoC容器通过配置得知需要管理的对象</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.BookDaoImpl"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.BookServiceImpl"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>被管理的对象交给IoC容器，通过接口获得IoC容器</p>
</li>
<li><p>IoC容器从接口方法获得Bean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">app2</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="comment">//获取Ioc容器</span></span><br><span class="line">       ApplicationContext ca = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">       <span class="comment">//获取Bean</span></span><br><span class="line">       BookService bookService = (BookService) ca.getBean(<span class="string">"bookService"</span>);</span><br><span class="line">       bookService.save();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>管理Service和Dao</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//业务层</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookServiceImpl</span>  <span class="keyword">implements</span> <span class="title">BookService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao = <span class="keyword">new</span> BookDao();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"book serivce save.."</span>);</span><br><span class="line">        bookDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//资源层</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookDaoImpl</span> <span class="keyword">implements</span> <span class="title">BookDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"book Dao save.."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h4 id="5-DI的使用"><a href="#5-DI的使用" class="headerlink" title="5.DI的使用"></a>5.DI的使用</h4><blockquote>
<ul>
<li><p>基于IoC管理Bean</p>
</li>
<li><p>Service中不保留new形式创建的Dao对象</p>
</li>
<li><p>Service中的Dao通过提供的方法进入Service</p>
</li>
</ul>
<ul>
<li>配置Bean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.BookDaoImpl"</span> <span class="attr">init-method</span>=<span class="string">"init"</span> <span class="attr">destroy-method</span>=<span class="string">"destory"</span>/&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.BookServiceImpl"</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--配置Dao和Service的关系--&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- property 当前bean的属性</span></span><br><span class="line"><span class="comment">       name属性表示配置哪一个具体的属性</span></span><br><span class="line"><span class="comment">       ref表示参照哪一个bean--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"bookDao"</span> <span class="attr">ref</span>=<span class="string">"bookDao"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>管理Service和Dao</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt;&#x2F;&#x2F;业务层</span><br><span class="line">&gt;public class BookServiceImpl  implements BookService &#123;</span><br><span class="line">   &#x2F;&#x2F;删除业务层使用new的方式创建对象</span><br><span class="line">   private BookDao bookDao ;</span><br><span class="line"></span><br><span class="line">   @Override</span><br><span class="line">   public void save() &#123;</span><br><span class="line">       System.out.println(&quot;book serivce save..&quot;);</span><br><span class="line">       bookDao.save();</span><br><span class="line">   &#125;</span><br><span class="line">   &#x2F;&#x2F;提供对应的set方法</span><br><span class="line">   public void setBookDao(BookDao bookDao)&#123;</span><br><span class="line">       this.bookDao &#x3D; bookDao;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&gt;&#x2F;&#x2F;资源层</span><br><span class="line">&gt;public class BookDaoImpl implements BookDao &#123;</span><br><span class="line"></span><br><span class="line">   @Override</span><br><span class="line">   public void save() &#123;</span><br><span class="line">       System.out.println(&quot;book Dao save..&quot;);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>



<p>Bean的作用范围：默认是单例     </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;scope="prototype"  通过属性scope   prtotype 非单例   singleton单例</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">--name</span> 给<span class="attr">id</span>取别名   <span class="attr">name</span>里可以取多个 中间可以用 空格  逗号 分隔 <span class="attr">--</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.BookServiceImpl"</span> <span class="attr">name</span>=<span class="string">"bookService2 bookService3 bookService4"</span>&gt;</span></span><br></pre></td></tr></table></figure>



<ul>
<li>适合交给容器进行管理的bean<ul>
<li>表现层</li>
<li>业务层</li>
<li>数据层</li>
<li>工具对象</li>
</ul>
</li>
<li>不适合交给容器管理的bean<ul>
<li>实体类</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="6-静态工厂实例化Bean"><a href="#6-静态工厂实例化Bean" class="headerlink" title="6. 静态工厂实例化Bean"></a>6. 静态工厂实例化Bean</h4><blockquote>
<ul>
<li><p>创建一个工厂类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderDaoFactory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> OrderDao <span class="title">getOrderDao</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"order Dao Factory 。。。"</span>);</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> OrderDaoImpl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置Bean</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"orderDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.factory.OrderDaoFactory"</span> <span class="attr">factory-method</span>=<span class="string">"getOrderDao"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h4 id="7-实例化工厂实例化Bean"><a href="#7-实例化工厂实例化Bean" class="headerlink" title="7. 实例化工厂实例化Bean"></a>7. 实例化工厂实例化Bean</h4><blockquote>
<ul>
<li>创建一个工厂类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoFactory</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span>  UserDao <span class="title">getUserDao</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span>  <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置Bean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDaoFactory"</span> <span class="attr">class</span>=<span class="string">"com.ff.factory.UserDaoFactory"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">--factory-method</span> 实现<span class="attr">Bean</span>的工厂方法    <span class="attr">factory-bean</span>的<span class="attr">id</span>名称 <span class="attr">--</span> &gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDao"</span> <span class="attr">factory-method</span>=<span class="string">"getUserDao"</span> <span class="attr">factory-bean</span>=<span class="string">"userDaoFactory"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="8-使用FactoryBean实例化"><a href="#8-使用FactoryBean实例化" class="headerlink" title="8. 使用FactoryBean实例化"></a>8. 使用FactoryBean实例化</h4><blockquote>
<ul>
<li>创建一个工厂类实现FactoryBean接口，重写方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoFactoryBean</span> <span class="keyword">implements</span> <span class="title">FactoryBean</span>&lt;<span class="title">UserDao</span>&gt; </span>&#123;</span><br><span class="line">   <span class="comment">//代替原始实例工厂中创建对象的方法</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> UserDao <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//传递需要实现类的字节码对象</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">       <span class="keyword">return</span> UserDao<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 选择是否是单例对象</span></span><br><span class="line"><span class="comment">    * true 单例  false 非单例</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置Bean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDaoFactoryBean"</span> <span class="attr">class</span>=<span class="string">"com.ff.factory.UserDaoFactoryBean"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

</blockquote>
<h4 id="9-Bean的生命周期"><a href="#9-Bean的生命周期" class="headerlink" title="9. Bean的生命周期"></a>9. Bean的生命周期</h4><blockquote>
<ul>
<li>初始化容器</li>
</ul>
<ol>
<li>创建对象（内存分配）</li>
<li>执行构造方法</li>
<li>执行属性注入（set操作）</li>
<li>执行bean初始化方法</li>
</ol>
<ul>
<li>使用bean</li>
</ul>
<ol>
<li>执行业务操作</li>
</ol>
<ul>
<li>关闭/销毁容器</li>
</ul>
<ol>
<li>执行bean销毁方法</li>
</ol>
<h4 id="方式一："><a href="#方式一：" class="headerlink" title="方式一："></a><strong>方式一：</strong></h4><p><strong>创建开始\销毁：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Bean创建后</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"init...."</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//Bean销毁前</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"destory..."</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p><strong>配置bean：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.BookDaoImpl"</span> <span class="attr">init-method</span>=<span class="string">"init"</span> <span class="attr">destroy-method</span>=<span class="string">"destory"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>设置结束：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  ClassPathXmlApplicationContext ioc = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line"><span class="comment">//暴力销毁，只能放在最后</span></span><br><span class="line">ioc.close();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置结束标记 ,位置没有关系</span></span><br><span class="line">ioc.registerShutdownHook();</span><br></pre></td></tr></table></figure>

<h4 id="方式二："><a href="#方式二：" class="headerlink" title="方式二："></a><strong>方式二：</strong></h4><p><strong>实现Service实现InitializingBean, DisposableBean接口</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookServiceImpl</span>  <span class="keyword">implements</span> <span class="title">BookService</span>, <span class="title">InitializingBean</span>, <span class="title">DisposableBean</span> </span>&#123;</span><br><span class="line">   <span class="comment">//删除业务层使用new的方式创建对象</span></span><br><span class="line">   <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"book serivce save.."</span>);</span><br><span class="line">       bookDao.save();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//提供对应的set方法</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBookDao</span><span class="params">(BookDao bookDao)</span></span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.bookDao = bookDao;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"service destroy"</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"service  init"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&gt;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="10-依赖注入方式"><a href="#10-依赖注入方式" class="headerlink" title="10. 依赖注入方式"></a>10. 依赖注入方式</h4><blockquote>
<p><strong>注入方式：</strong></p>
<ul>
<li><p>普通方法(setter方法)</p>
<ol>
<li>简单类型</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.DIDaoImpl"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.DIServiceImpl"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--setter注入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"diDao"</span> <span class="attr">ref</span>=<span class="string">"diDao"</span>/&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>引用类型</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.DIDaoImpl"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--setter 引用注入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"num"</span> <span class="attr">value</span>=<span class="string">"100"</span>/&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"str.."</span> <span class="attr">value</span>=<span class="string">"setter引用"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.DIServiceImpl"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--setter注入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"diDao"</span> <span class="attr">ref</span>=<span class="string">"diDao"</span>/&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>      </span><br></pre></td></tr></table></figure>

<p><strong>Service 和Dao</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DIServiceImpl</span> <span class="keyword">implements</span> <span class="title">DIService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> DIDao diDao;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//提供setter方法 注入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDiDao</span><span class="params">(DIDao diDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.diDao = diDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        diDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DIDaoImpl</span> <span class="keyword">implements</span> <span class="title">DIDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">private</span> String str;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    setter 的set</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNum</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.num = num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStr</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"DI Dao save..."</span>);</span><br><span class="line">        System.out.println(<span class="string">"num = "</span> + num);</span><br><span class="line">        System.out.println(<span class="string">"str = "</span> + str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>构造方法</p>
<ol>
<li>简单类型</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.DIDaoImpl"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.DIServiceImpl"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--构造方法 简单注入--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"diDao"</span> <span class="attr">ref</span>=<span class="string">"diDao"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<ol start="2">
<li><p>引用类型</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diDao"</span> <span class="attr">class</span>=<span class="string">"com.ff.dao.impl.DIDaoImpl"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--构造方法 引入注入--&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       name 根据形参名称</span></span><br><span class="line"><span class="comment">       type 根据参数数据类型</span></span><br><span class="line"><span class="comment">       index 根据形参的排序</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"num"</span> <span class="attr">value</span>=<span class="string">"100"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"str"</span> <span class="attr">value</span>=<span class="string">"引入注入。。"</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"diService"</span> <span class="attr">class</span>=<span class="string">"com.ff.Service.Impl.DIServiceImpl"</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--构造方法 简单注入--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"diDao"</span> <span class="attr">ref</span>=<span class="string">"diDao"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p> <strong>Service 和Dao</strong></p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DIDaoImpl</span> <span class="keyword">implements</span> <span class="title">DIDao</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">private</span> String str;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构造方法的引入注入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DIDaoImpl</span><span class="params">(<span class="keyword">int</span> num, String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.num = num;</span><br><span class="line">        <span class="keyword">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"DI Dao save..."</span>);</span><br><span class="line">        System.out.println(<span class="string">"num = "</span> + num);</span><br><span class="line">        System.out.println(<span class="string">"str = "</span> + str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DIServiceImpl</span> <span class="keyword">implements</span> <span class="title">DIService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> DIDao diDao;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    <span class="comment">//构造方式注入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DIServiceImpl</span><span class="params">(DIDao diDao)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.diDao = diDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        diDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="11-依赖自动装配"><a href="#11-依赖自动装配" class="headerlink" title="11. 依赖自动装配"></a>11. 依赖自动装配</h4><blockquote>
<p>自动装配：根据bean所依赖的资源在容器中自动查找并注入到bean中的过程</p>
<p>方式： bean标签autowire配置</p>
<ul>
<li>按类型（常用） autowire=”byType”</li>
<li>按名称                 autowire=”byName”</li>
<li>按构造方法         autowire=”constructor”</li>
</ul>
<p>自动装配的注意</p>
<ol>
<li>强制依赖使用构造器进行，使用setter注入有概率不进行注入导致null对象出现</li>
<li>可选依赖使用setter注入进行，灵活性强</li>
<li>Spring框架倡导使用构造器，第三方框架内部大多数采用构造器注入的形式进行数据初始化，相对严谨</li>
<li>如果有必要可以两者同时使用，使用构造器注入完成强制依赖的注入，使用setter注入完成可选依赖的注入</li>
<li>实际开发过程中还要根据实际情况分析，如果受控对象没有提供setter方法就必须使用构造器注入</li>
<li><strong>==自己开发的模块推荐使用setter注入==</strong></li>
</ol>
</blockquote>
<h4 id="12-集合注入"><a href="#12-集合注入" class="headerlink" title="12. 集合注入"></a>12. 集合注入</h4><blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--数组--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"array"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--集合--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--集合--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"a"</span> <span class="attr">value</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"b"</span> <span class="attr">value</span>=<span class="string">"2"</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"c"</span> <span class="attr">value</span>=<span class="string">"3"</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--配置文件--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"properties"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"a"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"b"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"c"</span>&gt;</span>3<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>


</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/11/06/day01_Spring/" data-id="ckvzyymi7001360ue2501dbez"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Day10_JSP" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/31/Day10_JSP/"
    >JSP</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/31/Day10_JSP/" class="article-date">
  <time datetime="2021-10-31T14:41:19.000Z" itemprop="datePublished">2021-10-31</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-JSP"><a href="#1-JSP" class="headerlink" title="1. JSP"></a>1. JSP</h3><h4 id="1-1-JSP概述"><a href="#1-1-JSP概述" class="headerlink" title="1.1 JSP概述"></a>1.1 JSP概述</h4><blockquote>
<p>概念：Java页面</p>
<p>JSP = HTML + Java</p>
<p>==JSP本质上是一个Servlet==</p>
</blockquote>
<h4 id="1-2-JSP-脚本"><a href="#1-2-JSP-脚本" class="headerlink" title="1.2 JSP 脚本"></a>1.2 JSP 脚本</h4><blockquote>
<p>JSP脚本用于在 JSP页面内定义 Java代码。在之前的入门案例中我们就在 JSP 页面定义的 Java 代码就是 JSP 脚本。</p>
<p>分类：</p>
<p>JSP 脚本有如下三个分类：</p>
<ul>
<li>&lt;%…%&gt;：内容会直接放到_jspService()方法之中</li>
<li>&lt;%=…%&gt;：内容会放到out.print()中，作为out.print()的参数</li>
<li>&lt;%!…%&gt;：内容会放到_jspService()方法之外，被类直接包含</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;%</span><br><span class="line">  System.out.println(<span class="string">"hello,jsp~"</span>);</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">3</span>;</span><br><span class="line">&gt;%&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="1-3-JSP-缺点"><a href="#1-3-JSP-缺点" class="headerlink" title="1.3 JSP 缺点"></a>1.3 JSP 缺点</h5><blockquote>
<p>由于 JSP页面内，既可以定义 HTML 标签，又可以定义 Java代码，造成了以下问题：</p>
<ul>
<li>书写麻烦：特别是复杂的页面</li>
</ul>
<p>既要写 HTML 标签，还要写 Java 代码</p>
<ul>
<li>阅读麻烦</li>
</ul>
<p>上面案例的代码，相信你后期再看这段代码时还需要花费很长的时间去梳理</p>
<ul>
<li><p>复杂度高：运行需要依赖于各种环境，JRE，JSP容器，JavaEE…</p>
</li>
<li><p>占内存和磁盘：JSP会自动生成.java和.class文件占磁盘，运行的是.class文件占内存</p>
</li>
<li><p>调试困难：出错后，需要找到自动生成的.java文件进行调试</p>
</li>
<li><p>不利于团队协作：前端人员不会 Java，后端人员不精 HTML</p>
</li>
</ul>
<p>如果页面布局发生变化，前端工程师对静态页面进行修改，然后再交给后端工程师，由后端工程师再将该页面改为 JSP 页面</p>
<p>由于上述的问题， ==JSP 已逐渐退出历史舞台，==以后开发更多的是使用 ==HTML +  Ajax== 来替代。</p>
</blockquote>
<h3 id="2-EL表达式"><a href="#2-EL表达式" class="headerlink" title="2. EL表达式"></a>2. EL表达式</h3><blockquote>
<ul>
<li><p>用户简化jSP页面内的代码</p>
</li>
<li><p>主要功能:获取数据</p>
</li>
<li><p>语法：${expression}</p>
</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;expression&#125;:获取域中存储的key为brands的数据</span><br></pre></td></tr></table></figure>

<ul>
<li><p>四大域对象</p>
</li>
<li><p>paga:当前页面有效</p>
</li>
<li><p>request：当前请求有效</p>
</li>
<li><p>session：当前会话有效</p>
</li>
<li><p>appication：当前应用有效</p>
</li>
<li><p>el表达式获取数据，会依次从这四个域中寻找，直到找到为止</p>
</li>
</ul>
</blockquote>
<h4 id="3-JSTL标签"><a href="#3-JSTL标签" class="headerlink" title="3.  JSTL标签"></a>3.  JSTL标签</h4><blockquote>
<p>JSP标准标签库(Jsp Standarded Tag Library) ，使用标签取代JSP页面上的Java代码。如下代码就是JSTL标签</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;c:<span class="keyword">if</span> test=<span class="string">"$&#123;flag == 1&#125;"</span>&gt;</span><br><span class="line">&gt;男</span><br><span class="line">&gt;&lt;/c:if&gt;</span><br><span class="line">&gt;&lt;c:<span class="keyword">if</span> test=<span class="string">"$&#123;flag == 2&#125;"</span>&gt;</span><br><span class="line">&gt;女</span><br><span class="line">&gt;&lt;/c:if&gt;</span><br></pre></td></tr></table></figure>

<p>引用核心标签库的语法如下：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> %&gt;</span><br></pre></td></tr></table></figure>

<p><strong>分类</strong></p>
<table>
<thead>
<tr>
<th>标签</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>&lt; c:out &gt;</td>
<td>用于在JSP中显示数据，就像&lt;%= … &gt;</td>
</tr>
<tr>
<td>&lt; c:set &gt;</td>
<td>用于保存数据</td>
</tr>
<tr>
<td>&lt; c:remove &gt;</td>
<td>用于删除数据</td>
</tr>
<tr>
<td>&lt; c:catch &gt;</td>
<td>用来处理产生错误的异常状况，并且将错误信息储存起来</td>
</tr>
<tr>
<td>&lt; c:if &gt;</td>
<td>与我们在一般程序中用的if一样</td>
</tr>
<tr>
<td>&lt; c:choose &gt;</td>
<td>本身只当做&lt;c:when&gt;和&lt;c:otherwise&gt;的父标签</td>
</tr>
<tr>
<td>&lt; c:when &gt;</td>
<td>&lt;c:choose&gt;的子标签，用来判断条件是否成立</td>
</tr>
<tr>
<td>&lt; c:otherwise &gt;</td>
<td>&lt;c:choose&gt;的子标签，接在&lt;c:when&gt;标签后，当&lt;c:when&gt;标签判断为false时被执行</td>
</tr>
<tr>
<td>&lt; c:import &gt;</td>
<td>检索一个绝对或相对 URL，然后将其内容暴露给页面</td>
</tr>
<tr>
<td>&lt; c:forEach &gt;</td>
<td>基础迭代标签，接受多种集合类型</td>
</tr>
<tr>
<td>&lt; c:forTokens &gt;</td>
<td>根据指定的分隔符来分隔内容并迭代输出</td>
</tr>
<tr>
<td>&lt; c:param &gt;</td>
<td>用来给包含或重定向的页面传递参数</td>
</tr>
<tr>
<td>&lt; c:redirect &gt;</td>
<td>重定向至一个新的URL.</td>
</tr>
<tr>
<td>&lt; c:url &gt;</td>
<td>使用可选的查询参数来创造一个URL</td>
</tr>
</tbody></table>
<p><strong>格式化标签</strong></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;%@ taglib prefix=<span class="string">"fmt"</span> </span><br><span class="line">     uri=<span class="string">"http://java.sun.com/jsp/jstl/fmt"</span> %&gt;</span><br></pre></td></tr></table></figure>



<p><strong>&lt; c : if &gt; 标签</strong> ：相当于 if 判断</p>
<p>属性：test，用于定义条件表达式   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;c:if test&#x3D;&quot;$&#123;flag &#x3D;&#x3D; 1&#125;&quot;&gt;</span><br><span class="line">&gt;男</span><br><span class="line">&gt;&lt;&#x2F;c:if&gt;</span><br><span class="line">&gt;&lt;c:if test&#x3D;&quot;$&#123;flag &#x3D;&#x3D; 2&#125;&quot;&gt;</span><br><span class="line">&gt;女</span><br><span class="line">&gt;&lt;&#x2F;c:if&gt;</span><br></pre></td></tr></table></figure>

<p><strong>&lt; c : forEach &gt; 标签</strong> ：相当于 if 判断</p>
<p>相当于 for 循环。java中有增强for循环和普通for循环，JSTL 中的 <code>&lt;c:forEach&gt;</code> 也有两种用法</p>
<p>类似于 Java 中的增强for循环。涉及到的 <code>&lt;c:forEach&gt;</code> 中的属性如下</p>
<ul>
<li>items：被遍历的容器</li>
<li>var：遍历产生的临时变量</li>
<li>varStatus：遍历状态对象</li>
</ul>
<p>一：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;c:forEach items=<span class="string">"$&#123;brands&#125;"</span> <span class="keyword">var</span>=<span class="string">"brand"</span>&gt;   <span class="keyword">for</span>(Brand brand:brands)</span><br><span class="line">  &lt;tr align=<span class="string">"center"</span>&gt;</span><br><span class="line">      &lt;td&gt;$&#123;brand.id&#125;&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;$&#123;brand.brandName&#125;&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;$&#123;brand.companyName&#125;&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;$&#123;brand.description&#125;&lt;/td&gt;</span><br><span class="line">  &lt;/tr&gt;</span><br><span class="line">&gt;&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>

<p>二：</p>
<p>类似于 Java 中的普通for循环。涉及到的 <code>&lt;c:forEach&gt;</code> 中的属性如下</p>
<ul>
<li>begin：开始数</li>
<li>end：结束数</li>
<li>step：步长</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&lt;c:forEach begin=<span class="string">"0"</span> end=<span class="string">"10"</span> step=<span class="string">"1"</span> <span class="keyword">var</span>=<span class="string">"i"</span>&gt;</span><br><span class="line">  $&#123;i&#125;</span><br><span class="line">&gt;&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="4-MVC模式和三层架构"><a href="#4-MVC模式和三层架构" class="headerlink" title="4. MVC模式和三层架构"></a>4. MVC模式和三层架构</h4><blockquote>
<p>MVC 是一种分层开发的模式，其中：</p>
<ul>
<li><p>M：Model，业务模型，处理业务</p>
</li>
<li><p>V：View，视图，界面展示</p>
</li>
<li><p>C：Controller，控制器，处理请求，调用模型和视图</p>
</li>
</ul>
<p><strong>MVC 好处：</strong></p>
<ul>
<li><p>职责单一，互不影响。每个角色做它自己的事，各司其职。</p>
</li>
<li><p>有利于分工协作。</p>
</li>
<li><p>有利于组件重用</p>
</li>
</ul>
</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/31/Day10_JSP/" data-id="ckvzyymi0000q60ue61ra80te"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-Web/" rel="tag">Java Web</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Day05_MyBatis高级" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/28/Day05_MyBatis%E9%AB%98%E7%BA%A7/"
    >MyBatis高级</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/28/Day05_MyBatis%E9%AB%98%E7%BA%A7/" class="article-date">
  <time datetime="2021-10-28T01:13:19.000Z" itemprop="datePublished">2021-10-28</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-MyBatis高级"><a href="#1-MyBatis高级" class="headerlink" title="1. MyBatis高级"></a>1. MyBatis高级</h3><blockquote>
<p>注意点：</p>
<ul>
<li><p>数据库的字段列表 和 实体类的属性名称不一样  ，则不能自动封装数据</p>
<ul>
<li><p>其别名   </p>
<p><strong>as</strong>  :对不一样的列名起别名，让别名和实体类的属性名一致</p>
<p>每次查询都要定义一次别名</p>
<p><strong>sql片段</strong>：不灵活</p>
<p><strong>resultMap</strong>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"brandResultMap"</span> <span class="attr">type</span>=<span class="string">"Brand"</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        id：主键映射  名称</span></span><br><span class="line"><span class="comment">            * column  不一致的名称</span></span><br><span class="line"><span class="comment">            * roperty   需要映射的名称</span></span><br><span class="line"><span class="comment">        result：一般键 映射</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"brand_name"</span> <span class="attr">property</span>=<span class="string">"brandName"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"company_Name"</span> <span class="attr">property</span>=<span class="string">"companyName"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="1-1-查询"><a href="#1-1-查询" class="headerlink" title="1.1 查询"></a>1.1 查询</h4><blockquote>
<p><strong>全查询</strong>:注意数据库的字段列表 和 实体类的属性名称保持一致</p>
<p><strong>单条件查询</strong>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&gt;#&#123;&#125;： 防止SQL注入 - -参数传递    如果只有一个参数叫什么都可以，多个参数遵循字段列名</span></span><br><span class="line"><span class="comment">&gt;$&#123;&#125;: 拼SQL，存在诸如问题  -  - 表面或者列名不固定的时候</span></span><br><span class="line"><span class="comment">&gt;参数类型：parameterType 指定参数的数据类型 可以省略</span></span><br><span class="line"><span class="comment">&gt;特殊字符： 转义字符       CDATA区  &lt;![CDATA[ 比较字符 ]]&gt; </span></span><br><span class="line"><span class="comment">&gt;--&gt;</span></span><br><span class="line">&gt;<span class="comment">&lt;!--单条件查询--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectID"</span> <span class="attr">resultMap</span>=<span class="string">"brandResultMap"</span>&gt;</span></span><br><span class="line">  select * from $&#123;tb_brand&#125; where id = #&#123;id&#125;;</span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>多条件查询</strong>：</p>
<p>接口设置三种方式：</p>
<ul>
<li>@param注解          使用比较麻烦</li>
<li>实体类封装          多个相关联数据</li>
<li>map封装         多个不相关联数据</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//    多条件查询</span></span><br><span class="line">&gt;<span class="comment">//	@Param("SQL参数占位符名称")  </span></span><br><span class="line">  <span class="function">List&lt;Brand&gt; <span class="title">selectBymulti</span><span class="params">(@Param(<span class="string">"status"</span>)</span> <span class="keyword">int</span> status,</span></span><br><span class="line"><span class="function">                            @<span class="title">Param</span><span class="params">(<span class="string">"companyName"</span>)</span> String companyName,</span></span><br><span class="line"><span class="function">                            @<span class="title">Param</span><span class="params">(<span class="string">"brandName"</span>)</span> String brandName)</span>;</span><br><span class="line">  <span class="function">List&lt;Brand&gt; <span class="title">selectBymulti</span> <span class="params">(Brand brand)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="function">List&lt;Brand&gt; <span class="title">selectBymulti</span> <span class="params">(Map map)</span></span>;</span><br><span class="line">&lt;!-- 测试类map添加--&gt;</span><br><span class="line">  &lt;!--保证SQL参数和map参数的键的名称对应上 --&gt;</span><br><span class="line">   Map map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">   map.put(<span class="string">"status"</span>, status);    </span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectBymulti"</span> <span class="attr">resultMap</span>=<span class="string">"brandResultMap"</span>&gt;</span></span><br><span class="line">        select * from</span><br><span class="line">        tb_brand</span><br><span class="line">        where status = #&#123;status&#125;  <span class="comment">&lt;!-- 参数占位符和字段列表名一致--&gt;</span></span><br><span class="line">        and company_name like #&#123;companyName&#125;</span><br><span class="line">        and brand_name like #&#123;brandName&#125;;</span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>动态多条件查询</strong>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--动态多条件查询</span></span><br><span class="line"><span class="comment">       * if ：条件判断</span></span><br><span class="line"><span class="comment">           test :逻辑表达语句</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectBymulti"</span> <span class="attr">resultMap</span>=<span class="string">"brandResultMap"</span>&gt;</span></span><br><span class="line">      select * from</span><br><span class="line">      tb_brand</span><br><span class="line">     <span class="comment">&lt;!--where 1 = 1 恒等式  第一个不存在条件--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">where</span>&gt;</span>-- Mybatis的包装Where和sql的where语句一致，会自动等判断 是否有 and</span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"status != null"</span>&gt;</span></span><br><span class="line">              and status = #&#123;status&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"companyName != null and companyName != '' "</span>&gt;</span></span><br><span class="line">              and company_name like #&#123;companyName&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"brandName != null and brandName != '' "</span>&gt;</span></span><br><span class="line">              and brand_name like #&#123;brandName&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>动态单条件查询</strong>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectBySingle"</span> <span class="attr">resultMap</span>=<span class="string">"brandResultMap"</span>&gt;</span></span><br><span class="line">       select * from tb_brand</span><br><span class="line">       <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"status != null"</span>&gt;</span></span><br><span class="line">                   status = #&#123;status&#125;</span><br><span class="line">               <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"companyName != null and companyName != '' "</span>&gt;</span></span><br><span class="line">                   company_name like #&#123;companyName&#125;</span><br><span class="line">               <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"brandName != null and brandName != '' "</span>&gt;</span></span><br><span class="line">                   brand_name like #&#123;brandName&#125;</span><br><span class="line">               <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="1-2-添加"><a href="#1-2-添加" class="headerlink" title="1.2 添加"></a>1.2 添加</h4><blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--可以返回主键</span></span><br><span class="line"><span class="comment">实现新增功能 ，需要添加   useGeneratedKeys="true" keyProperty="id"</span></span><br><span class="line"><span class="comment">&gt;--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"add"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">     insert into tb_brand (brand_name, company_name, ordered, description, status)</span><br><span class="line">     values (#&#123;brandName&#125;,#&#123;companyName&#125;,#&#123;ordered&#125;,#&#123;description&#125;,#&#123;status&#125;)</span><br><span class="line">   <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="1-3-修改"><a href="#1-3-修改" class="headerlink" title="1.3 修改"></a>1.3 修改</h4><blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--动态修改--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updata"</span>&gt;</span></span><br><span class="line">       update tb_brand</span><br><span class="line">       <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"status != null"</span>&gt;</span></span><br><span class="line">               brand_name = #&#123;brandName&#125;,</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"companyName != null and companyName != '' "</span>&gt;</span></span><br><span class="line">               company_name = #&#123;companyName&#125;,</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"brandName != null and brandName != '' "</span>&gt;</span></span><br><span class="line">               brand_name = #&#123;brandName&#125;,</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"ordered != null "</span>&gt;</span></span><br><span class="line">               ordered = #&#123;ordered&#125;,</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"description != null and description != '' "</span>&gt;</span></span><br><span class="line">               description = #&#123;description&#125;,</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"status != null and status != '' "</span>&gt;</span></span><br><span class="line">               status = #&#123;status&#125;</span><br><span class="line">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">       where id = #&#123;id&#125;;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="1-4-删除"><a href="#1-4-删除" class="headerlink" title="1.4 删除"></a>1.4 删除</h4><blockquote>
<p><strong>单个删除：</strong>添加单个参数即可</p>
<p><strong>批量删除：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!-- 批量删除 --&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deletByIds"</span>&gt;</span></span><br><span class="line">       delete from tb_brand where id in</span><br><span class="line">       <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"ids"</span> <span class="attr">item</span>=<span class="string">"id"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">close</span>=<span class="string">")"</span>&gt;</span></span><br><span class="line">           #&#123;id&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">           </span><br><span class="line">&gt;<span class="comment">&lt;!-- 接口 --&gt;</span></span><br><span class="line">//  批量删除</span><br><span class="line">   //  可以是数组也可以是集合</span><br><span class="line">   void deletByIds(@Param("ids")int[] ids);</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="1-5-注解开发"><a href="#1-5-注解开发" class="headerlink" title="1.5 注解开发"></a>1.5 注解开发</h4><blockquote>
<ul>
<li>查询：@Select</li>
<li>添加：@Insert</li>
<li>修改：@Updata</li>
<li>删除：@Delete</li>
</ul>
<p>注解完成简单功能</p>
<p>配置文件复杂功能</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">@Select</span>(value = <span class="string">"select * from tb_user where id = #&#123;id&#125;"</span>)</span><br><span class="line">&gt;<span class="function"><span class="keyword">public</span> User <span class="title">select</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>

</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/28/Day05_MyBatis%E9%AB%98%E7%BA%A7/" data-id="ckvzyymi3000v60ueh2li1vxa"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-Web/" rel="tag">Java Web</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Day04_Maven和MyBatis" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/20/Day04_Maven%E5%92%8CMyBatis/"
    >Maven和MyBatis</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/20/Day04_Maven%E5%92%8CMyBatis/" class="article-date">
  <time datetime="2021-10-20T10:16:49.000Z" itemprop="datePublished">2021-10-20</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-Maven"><a href="#1-Maven" class="headerlink" title="1. Maven"></a>1. Maven</h3><h4 id="1-1-Maven概述"><a href="#1-1-Maven概述" class="headerlink" title="1.1 Maven概述"></a>1.1 Maven概述</h4><blockquote>
<p>Maven是专门用于管理好构建Java的项目的工具</p>
<p>管理依赖</p>
<p>主要功能：</p>
<ul>
<li>提供了一套标准haul的项目机构</li>
<li>提供了一套标准化的构建流程（编译、测试、打包、发布。。）</li>
<li>提供了一套依赖管理机制</li>
</ul>
<p>界面详情：</p>
<p><img src="E:%5CHEIMA%5CNOTE/MySQL/image/Maven-%E7%95%8C%E9%9D%A2.png" alt=""></p>
<p>仓库分类：</p>
<ul>
<li>本地仓库：自己计算机上的目录</li>
<li>中央仓库：Maven团队维护的全球唯一仓库  <a href="https://repo1.maven.org/maven2/" target="_blank" rel="noopener">https://repo1.maven.org/maven2/</a></li>
<li>远程仓库（私服）：公司团队搭建的私有仓库</li>
</ul>
<p>本地项目导入驱动jar包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--pom.xml--&gt;</span></span><br><span class="line">&gt;<span class="comment">&lt;!--mysql服务--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.46<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="1-2-Maven的使用"><a href="#1-2-Maven的使用" class="headerlink" title="1.2 Maven的使用"></a>1.2 Maven的使用</h4><blockquote>
<p>maven生命周期</p>
<ul>
<li>Maven构建项目生命周期描述的是一次构建过程经历多少事件</li>
<li>Maven对项目构建的生命周期划分为3套</li>
<li>clean：清理工作</li>
<li>default：核心工作，例如编译、测试、打包、安装等</li>
<li>site：产生报告，发布站点</li>
</ul>
<p>==同一生命周期内，执行后边的命令，前面的所有命令会自动执行==</p>
<p>Maven坐标详解</p>
<p>坐标：</p>
<ul>
<li>Maven中的坐标是资源的唯一标识</li>
<li>使用坐标来定义项目或引用项目中需要的依赖</li>
</ul>
<p>坐标组成：</p>
<ul>
<li>grould：当前Maven项目隶属组织名称</li>
<li>artifactId：当前项目名称</li>
<li>version：定义当前项目版本号</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!-- 驱动名称 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!-- 驱动目录地址 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--驱动版本号  --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.46<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>


</blockquote>
<h3 id="2-Mybatis"><a href="#2-Mybatis" class="headerlink" title="2. Mybatis"></a>2. Mybatis</h3><h5 id="2-1-基本概述"><a href="#2-1-基本概述" class="headerlink" title="2.1 基本概述"></a>2.1 基本概述</h5><blockquote>
<ul>
<li>MyBatis是一款优秀的持久层框架，用于简化JDBC开发</li>
</ul>
<p><strong>持久层</strong></p>
<ul>
<li>负责将数据保存到数据库的那一层代码</li>
<li>JavaEE三层架构：表现层、业务层、持久层</li>
</ul>
<h5 id="JavaEE三层"><a href="#JavaEE三层" class="headerlink" title="JavaEE三层"></a>JavaEE三层</h5><ul>
<li>表现层</li>
<li>业务层</li>
<li>持久层</li>
</ul>
<h5 id="框架："><a href="#框架：" class="headerlink" title="框架："></a>框架：</h5><ul>
<li>框架是一个半成品软件，是一套可重用，通用的、软件基础代码模型</li>
<li>在框架的基础之上构建软件编写更加高效、规范、通用、可拓展</li>
</ul>
<h5 id="MyBatis简化"><a href="#MyBatis简化" class="headerlink" title="MyBatis简化"></a>MyBatis简化</h5><ul>
<li><p>硬编码</p>
<ul>
<li>注册驱动，获取连接</li>
<li>SQL语句</li>
</ul>
</li>
<li><p>操作繁琐</p>
<ul>
<li>手动设置参数</li>
<li>手动封装对象</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="2-1-MyBatis的使用"><a href="#2-1-MyBatis的使用" class="headerlink" title="2.1 MyBatis的使用"></a>2.1 MyBatis的使用</h5><blockquote>
<h4 id="1-创建数据表，导入驱动jar包，定义POJO类"><a href="#1-创建数据表，导入驱动jar包，定义POJO类" class="headerlink" title="1. 创建数据表，导入驱动jar包，定义POJO类"></a>1. 创建数据表，导入驱动jar包，定义POJO类</h4><h4 id="2-配置MyBatis的配置文件"><a href="#2-配置MyBatis的配置文件" class="headerlink" title="2. 配置MyBatis的配置文件"></a>2. 配置MyBatis的配置文件</h4><ul>
<li><strong>第一步</strong> ： 创建 mybatis-config.xml 核心配置文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--mybatis-config.xml --&gt;</span></span><br><span class="line">&gt;<span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line">&gt;<span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">       <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">       <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!--连接信息--&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">               <span class="comment">&lt;!--数据库地址--&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql:///day04_mybatis?useSSL = false"</span>/&gt;</span></span><br><span class="line">               <span class="comment">&lt;!--用户名密码--&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--加载sql的映射文件--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"UserMapper.xml"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>第二步</strong>   创建 UserMapper.xml 映射文件  命名：表名+Mapper</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">&lt;!--UserMapper.xml  映射文件 --&gt;</span> </span><br><span class="line">&gt;<span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line">&gt;<span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">       <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">       <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&gt;<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&gt;namepace:名称空间</span></span><br><span class="line"><span class="comment">&gt;--&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectAll"</span> <span class="attr">resultType</span>=<span class="string">"pojo.User"</span>&gt;</span></span><br><span class="line">   select * from tb_user ;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>第三部   创建 logback.xml   日志配置文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       CONSOLE ：表示当前的日志信息是可以输出到控制台的。</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"Console"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>[%level] %blue(%d&#123;HH:mm:ss.SSS&#125;) %cyan([%thread]) %boldGreen(%logger&#123;15&#125;) - %msg %n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.itheima"</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">     level:用来设置打印级别，大小写无关：TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF</span></span><br><span class="line"><span class="comment">    ， 默认debug</span></span><br><span class="line"><span class="comment">     &lt;root&gt;可以包含零个或多个&lt;appender-ref&gt;元素，标识这个输出位置将会被本日志级别控制。</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">&gt;<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-测试代码-配置文件导入"><a href="#3-测试代码-配置文件导入" class="headerlink" title="3. 测试代码- 配置文件导入"></a>3. 测试代码- 配置文件导入</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">&gt;<span class="comment">//      构建 SqlSessionFactory  Mybatis实现配置好的，直接复制即可</span></span><br><span class="line">    <span class="comment">//  导入配置文件 创建对象</span></span><br><span class="line">       String resource = <span class="string">"mybatis-config.xml"</span>;</span><br><span class="line">       InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">       SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">    </span><br><span class="line">&gt;<span class="comment">//        获取SqlSession对象 执行sql</span></span><br><span class="line">       SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">&gt;<span class="comment">//        执行sql  SQL映射文件的名称空间地址</span></span><br><span class="line">       List&lt;User&gt; users = sqlSession.selectList(<span class="string">"test.selectAll"</span>);</span><br><span class="line">       </span><br><span class="line">       System.out.println(users);</span><br><span class="line">       </span><br><span class="line">       sqlSession.close();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

</blockquote>
<h3 id="3-Mapper"><a href="#3-Mapper" class="headerlink" title="3. Mapper"></a>3. Mapper</h3><blockquote>
<p>简化JDBC的框架</p>
<p>使用步骤：</p>
<ul>
<li>创建映射文件同名的接口，创建抽象方法，返回值和方法名保持一致</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">     <span class="function">List&lt;User&gt;  <span class="title">selectAll</span><span class="params">()</span></span>;</span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>接口文件和映射文件在编译后保证在同一文件夹，在resources文件下，创建==接口文件同层级的文件夹==将映像文件存入</p>
</li>
<li><p>修改核心配置文件mybatis-config.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--加载sql的映射文件--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/mapper/UserMapper.xml"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改映射文件UserMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">namepace:名称空间</span></span><br><span class="line"><span class="comment">注意点：namepace 必须 UserMapper全路径一致</span></span><br><span class="line"><span class="comment">注意点：接口中的方法名必须和id标识一致</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.mapper.UserMapper"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    select 执行的查询</span></span><br><span class="line"><span class="comment">    id  唯一标识</span></span><br><span class="line"><span class="comment">    namepace+id = sql 的绝对路径</span></span><br><span class="line"><span class="comment">    resultType 返回值的数据</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectAll"</span> <span class="attr">resultType</span>=<span class="string">"com.pojo.User"</span>&gt;</span></span><br><span class="line">       select * from tb_user ;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>测试文件执行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"><span class="comment">//      构建 SqlSessionFactory</span></span><br><span class="line">        String resource = <span class="string">"mybatis-config.xml"</span>;</span><br><span class="line">        InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">        SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line"><span class="comment">//        获取SqlSession对象 执行sql</span></span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">//        执行sql  SQL映射文件的名称空间地址</span></span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        List&lt;User&gt; users = mapper.selectAll();</span><br><span class="line">        </span><br><span class="line">        System.out.println(users);</span><br><span class="line"></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/20/Day04_Maven%E5%92%8CMyBatis/" data-id="ckvzyymhz000o60uea1ofez14"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-day03_JDBC" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/19/day03_JDBC/"
    >JDBC和连接池DUird</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/19/day03_JDBC/" class="article-date">
  <time datetime="2021-10-19T09:16:49.000Z" itemprop="datePublished">2021-10-19</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-JDBC"><a href="#1-JDBC" class="headerlink" title="1. JDBC"></a>1. JDBC</h3><h4 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a>1.1 概述</h4><blockquote>
<ul>
<li>JDBC就是使用Java语言操作关系型数据库的一套API</li>
</ul>
<p>好处：</p>
<ul>
<li>各数据库厂商使用相同的接口，Java代码不需要针对不数据库分别开发</li>
<li>可随时替代底层数据库，访问数据库的Java代码基本不变</li>
</ul>
</blockquote>
<h5 id="1-2-基本使用"><a href="#1-2-基本使用" class="headerlink" title="1.2 基本使用"></a>1.2 基本使用</h5><blockquote>
<p>DML的使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        注册驱动</span></span><br><span class="line">       Class.forName(<span class="string">"mysql.JDBC"</span>);</span><br><span class="line">&gt;<span class="comment">//        获取连接</span></span><br><span class="line"> <span class="built_in">String</span> url = <span class="string">"jdbc:mysql://127.0.0.1:3306/demotest"</span>;</span><br><span class="line">       <span class="built_in">String</span> username = <span class="string">"root"</span>;</span><br><span class="line">       <span class="built_in">String</span> passwored = <span class="string">"root"</span>;</span><br><span class="line">       Connection conn = DriverManager.getConnection(url, username, passwored);</span><br><span class="line">&gt;<span class="comment">//        定义SQL语句</span></span><br><span class="line"> <span class="built_in">String</span> sql = <span class="string">"UPDATE stu set age = 22 WHERE id =1 "</span>;</span><br><span class="line">&gt;<span class="comment">//        获取执行SQL对象</span></span><br><span class="line">       Statement stmt = conn.createStatement();</span><br><span class="line">&gt;<span class="comment">//        执行SQL</span></span><br><span class="line">       int count = stmt.executeUpdate(sql);</span><br><span class="line">&gt;<span class="comment">//        返回结果</span></span><br><span class="line">       System.out.println(count);</span><br><span class="line">&gt;<span class="comment">//        结束资源</span></span><br><span class="line">       stmt.close();</span><br><span class="line">       conn.close();</span><br></pre></td></tr></table></figure>

<p>DQL的使用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="comment">//        注册驱动</span></span><br><span class="line">       Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">&gt;<span class="comment">//        获取连接  </span></span><br><span class="line">&gt;<span class="comment">// 		默认本机端口 可以省略jdbc:mysql:///demotest</span></span><br><span class="line">       String url = <span class="string">"jdbc:mysql://127.0.0.1:3306/demotest"</span>;</span><br><span class="line">       String username = <span class="string">"root"</span>;</span><br><span class="line">       String password = <span class="string">"root"</span>;</span><br><span class="line">       Connection conn = DriverManager.getConnection(url, username, password);</span><br><span class="line">&gt;<span class="comment">//        定义SQL语句  DML</span></span><br><span class="line">       String sql = <span class="string">"UPDATE stu set age = 44 WHERE id =1 "</span>;</span><br><span class="line">&gt;<span class="comment">//        DQL</span></span><br><span class="line">       String sql1 = <span class="string">"SELECT * FROM stu"</span>;</span><br><span class="line">&gt;<span class="comment">//        创建对象</span></span><br><span class="line">       Statement stmt = conn.createStatement();</span><br><span class="line">&gt;<span class="comment">//        执行语句</span></span><br><span class="line">       <span class="keyword">int</span> i = stmt.executeUpdate(sql);</span><br><span class="line">       ResultSet resultSet = stmt.executeQuery(sql1);</span><br><span class="line">&gt;<span class="comment">//        处理结果</span></span><br><span class="line">       <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">&gt;<span class="comment">//            设置参数</span></span><br><span class="line">           String id = resultSet.getString(<span class="number">1</span>);</span><br><span class="line">           String name = resultSet.getString(<span class="number">2</span>);</span><br><span class="line">           String age = resultSet.getString(<span class="number">3</span>);</span><br><span class="line">           String sex = resultSet.getString(<span class="number">4</span>);</span><br><span class="line">           String address = resultSet.getString(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">           System.out.println(id);</span><br><span class="line">           System.out.println(name);</span><br><span class="line">           System.out.println(age);</span><br><span class="line">           System.out.println(sex);</span><br><span class="line">           System.out.println(address);</span><br><span class="line"></span><br><span class="line">     System.out.println(<span class="string">"------------------------"</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       System.out.println(i);</span><br><span class="line">&gt;<span class="comment">//        关闭资源</span></span><br><span class="line">       resultSet.close();</span><br><span class="line">       stmt.close();</span><br><span class="line">       conn.close();</span><br></pre></td></tr></table></figure>


</blockquote>
<h4 id="1-3-JDBC-API"><a href="#1-3-JDBC-API" class="headerlink" title="1.3 JDBC API"></a>1.3 JDBC API</h4><blockquote>
<p>（1）DriverManager（驱动管理类）作用</p>
<ul>
<li><p>注册驱动</p>
</li>
<li><p>获取数据库连接</p>
<ul>
<li><pre><code class="java">jdbc:mysql:<span class="comment">//ip:端口/数据库名？自定义参数</span>
&lt;!--￼<span class="number">2</span>--&gt;</code></pre>
</li>
<li><p>预编译SQL的执行SQL对象：防止SQL注入</p>
</li>
<li><pre><code class="java"><span class="function">PrepareStatement <span class="title">prepareStatement</span><span class="params">(sql)</span> </span>
<span class="function"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 执行存储过程对象</span><br><span class="line"></span><br><span class="line">- &#96;&#96;&#96;java</span><br><span class="line">  CallableStatement prepareCall(sql)</span><br></pre></td></tr></table></figure></span></code></pre>
</li>
</ul>
</li>
<li><p>事务管理</p>
<ul>
<li><p>MySQL事务管理</p>
</li>
<li><p>JDBC事务管理</p>
</li>
<li><pre><code>// true  自动提交 false 手动提交
开启事务：   conn.setAutoCommit(bolean autoCommit);
提交事务：    commit()
回滚事务：    rollback()
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#96;&#96;&#96;java</span><br><span class="line">        try &#123;</span><br><span class="line">&#x2F;&#x2F;            开启事务  手动开启</span><br><span class="line">            conn.setAutoCommit(false);</span><br><span class="line">&#x2F;&#x2F;        执行SQL</span><br><span class="line">            int count &#x3D; stmt.executeUpdate(sql);</span><br><span class="line">&#x2F;&#x2F;        返回结果</span><br><span class="line">            System.out.println(count &gt; 0);</span><br><span class="line">&#x2F;&#x2F;            提交事务</span><br><span class="line">            conn.commit();</span><br><span class="line">        &#125; catch (SQLException e) &#123;</span><br><span class="line">&#x2F;&#x2F;            回滚事务</span><br><span class="line">            conn.rollback();</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
</code></pre></li>
</ul>
</li>
</ul>
<p>（3）Statement</p>
<ul>
<li><p>执行DDL、DML</p>
<ul>
<li><pre><code class="java"><span class="function"><span class="keyword">int</span> <span class="title">executeUpdate</span><span class="params">(sql)</span></span>
<span class="function"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 执行DQL</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;java</span><br><span class="line">    ResultSet  stmt.executeQuery(sql)</span><br></pre></td></tr></table></figure></span>
<span class="function"></span></code></pre>
</li>
</ul>
</li>
</ul>
<p>（4）ResultSet(结果集对象)</p>
<ul>
<li><p>ResultSet作用</p>
</li>
<li><p>获取查询结果</p>
<ul>
<li><pre><code class="javascript">boolean next():（<span class="number">1</span>）光标从当前位置向前移动一行 （<span class="number">2</span>）判断当前行是否为有效行
    返回值：
     - <span class="literal">true</span>：有效行，当前行有数据
     - <span class="literal">false</span>：无效行，当前没有数据
&lt;!--￼<span class="number">6</span>--&gt;
</code></pre>
</li>
</ul>
</li>
</ul>
<p>（5）PreparedStatement</p>
<p>sql注入：==’ ‘ or ‘1’ =  ‘ 1==</p>
<ul>
<li>PreparedStatament 作用<ul>
<li>预编译SQL并执行SQL</li>
<li>防止SQL注入：将铭感字符进行转义</li>
</ul>
</li>
<li>PreparedStatament  预编译功能开启：useServerPrepStmts = true；</li>
<li>PreparedStatament原理<ul>
<li>在获取PreparedStatament对象时，将sql语句发送给mysql服务器进行检查，编译（这些步骤耗时）</li>
<li>执行时就不用再进行步骤了，速度更快</li>
<li>如果sql模块一样，则只需要进行一次检查、编译</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="2-数据库连接池"><a href="#2-数据库连接池" class="headerlink" title="2.数据库连接池"></a>2.数据库连接池</h3><h5 id="2-1-数据库概述"><a href="#2-1-数据库概述" class="headerlink" title="2.1 数据库概述"></a>2.1 数据库概述</h5><blockquote>
<p>简介;</p>
<ul>
<li>数据库连接池是个容器，负责分配，管理数据库连接</li>
<li>她允许应用程序重复使用一个现有的数据库连接，而不是再重新建立一个</li>
<li>释放空间时间超过最大空闲时间的数据连接来避免因为没有释放数据库连接而引起的数据库连接遗漏</li>
</ul>
<p>好处：</p>
<ul>
<li>资源再用</li>
<li>提升系统响应速度</li>
<li>避免数据库连接遗漏</li>
</ul>
</blockquote>
<h5 id="2-2-数据库实现"><a href="#2-2-数据库实现" class="headerlink" title="2.2 数据库实现"></a>2.2 数据库实现</h5><blockquote>
<p>标准接口：DataSource</p>
<ul>
<li><p>官方（SUN）提供的数据库连接池标准接口，由第三方组织实现此接口</p>
</li>
<li><p>功能：获取连接</p>
<ul>
<li><pre><code class="java">Connection getDConnection
&lt;!--￼<span class="number">7</span>--&gt;
</code></pre>
</li>
</ul>
</li>
</ul>
</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/19/day03_JDBC/" data-id="ckvzyymif001i60ue3mtp3wde"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Day02_MySQL高级" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/10/17/Day02_MySQL%E9%AB%98%E7%BA%A7/"
    >MySQL高级</a
  >
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2021/10/17/Day02_MySQL%E9%AB%98%E7%BA%A7/" class="article-date">
  <time datetime="2021-10-17T14:19:19.000Z" itemprop="datePublished">2021-10-17</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h3 id="1-MySQL高级"><a href="#1-MySQL高级" class="headerlink" title="1. MySQL高级"></a>1. MySQL高级</h3><h4 id="1-1约束"><a href="#1-1约束" class="headerlink" title="1.1约束"></a>1.1约束</h4><h5 id="1-1-1-基础概念"><a href="#1-1-1-基础概念" class="headerlink" title="1.1.1 基础概念"></a>1.1.1 基础概念</h5><blockquote>
<p>约束：</p>
<ul>
<li>约束是作用于表中列上的规则，用于限定加入表的数据</li>
<li>约束的存在保存数据库中数据的正确性、有效性和完整性</li>
</ul>
<p>约束的分类：</p>
<table>
<thead>
<tr>
<th>约束名称</th>
<th>描述</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>非空约束</td>
<td>保证列中所有数据不能有null值</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>唯一约束</td>
<td>保证列中所有数据各不相同</td>
<td>UNIQUE</td>
</tr>
<tr>
<td>主键约束</td>
<td>主键是一行数据的唯一表示，要求非空白且唯一</td>
<td>PRIMARY KEY</td>
</tr>
<tr>
<td>检查约束</td>
<td>保障列中的值满足某一条件</td>
<td>CHECK</td>
</tr>
<tr>
<td>默认约束</td>
<td>保存数据时，未指定值则采用默认值</td>
<td>DEFAULT</td>
</tr>
<tr>
<td>外键约束</td>
<td>外键用来让两个表的数据之间建立连接，保证数据的一致性和完整性</td>
<td>FOREIGN KEY</td>
</tr>
</tbody></table>
<p>Tips：MySQL不支持检查约束</p>
</blockquote>
<h5 id="1-2-外键约束"><a href="#1-2-外键约束" class="headerlink" title="1.2 外键约束"></a>1.2 外键约束</h5><blockquote>
<p>概念：</p>
<ul>
<li>外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性</li>
</ul>
<p>语法：</p>
<p>（1）添加外键约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;CREATE TABLE 表名（</span><br><span class="line">列名 数据类型；</span><br><span class="line">..</span><br><span class="line">##小括号不要忘记</span><br><span class="line">[CONSTRAINT] [外键名称] FOREIGN KEY (外键列名) REFERENCES 主表（主表列名）</span><br><span class="line">&gt;）</span><br></pre></td></tr></table></figure>

<p>（2）建表后添加外键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;ALTER TABLE 表名 ADD CONSTRAINT 外键名 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主列表名称);</span><br></pre></td></tr></table></figure>

<p>（3）删除约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;alter table 表名 drop FOREIGN key 外键名;</span><br></pre></td></tr></table></figure>



<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;-- 删除表</span><br><span class="line">&gt;DROP TABLE IF EXISTS emp;</span><br><span class="line">&gt;DROP TABLE IF EXISTS dept;</span><br><span class="line"></span><br><span class="line">&gt;-- 部门表</span><br><span class="line">&gt;CREATE TABLE dept(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">dep_name varchar(20),</span><br><span class="line">addr varchar(20)</span><br><span class="line">&gt;);</span><br><span class="line">&gt;-- 员工表 </span><br><span class="line">&gt;CREATE TABLE emp(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name varchar(20),</span><br><span class="line">age int,</span><br><span class="line">dep_id int,</span><br><span class="line"></span><br><span class="line">-- 添加外键 dep_id,关联 dept 表的id主键</span><br><span class="line">	CONSTRAINT fk_emp_dept FOREIGN KEY (dep_id) REFERENCES dept(id)</span><br><span class="line">&gt;);</span><br><span class="line"></span><br><span class="line">&gt;-- 添加 2 个部门</span><br><span class="line">&gt;insert into dept(dep_name,addr) values</span><br><span class="line">&gt;(&#39;研发部&#39;,&#39;广州&#39;),(&#39;销售部&#39;, &#39;深圳&#39;);</span><br><span class="line"></span><br><span class="line">&gt;-- 添加员工,dep_id 表示员工所在的部门</span><br><span class="line">&gt;INSERT INTO emp (NAME, age, dep_id) VALUES </span><br><span class="line">&gt;(&#39;张三&#39;, 20, 1),</span><br><span class="line">&gt;(&#39;李四&#39;, 20, 1),</span><br><span class="line">&gt;(&#39;王五&#39;, 20, 1),</span><br><span class="line">&gt;(&#39;赵六&#39;, 20, 2),</span><br><span class="line">&gt;(&#39;孙七&#39;, 22, 2),</span><br><span class="line">&gt;(&#39;周八&#39;, 18, 2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;-- 删除外键</span><br><span class="line">&gt;alter table emp drop FOREIGN key fk_emp_dept;</span><br><span class="line"></span><br><span class="line">&gt;-- 添加外键</span><br><span class="line">&gt;ALTER TABLE emp ADD CONSTRAINT fk_emp_dept FOREIGN KEY (dep_id) REFERENCES dept(id);</span><br></pre></td></tr></table></figure>


</blockquote>
<h5 id="1-2-数据库设计"><a href="#1-2-数据库设计" class="headerlink" title="1.2 数据库设计"></a>1.2 数据库设计</h5><blockquote>
<p>概念：</p>
<ul>
<li>数据库设计就是根据业务系统的具体需求，结合我们所选的DBMS，为这个业务系统构造出最优的数据存储模型</li>
<li>建立数据库中的表结构以及表于表之间的关联关系的过程</li>
</ul>
<p>设计步骤：</p>
<ul>
<li><p>需求分析 ：数据是什么？数据具有哪些属性，属性和数据的特点是什么</p>
</li>
<li><p>逻辑分析：通过ER图对数据库进行裸机建模，不需要考虑所有选用的数据管理系统</p>
</li>
<li><p>物理设计：根据数据库自身的特点把裸机设计转换成物理设计</p>
</li>
<li><p>维护设计：对新的需求进行建模，表优化</p>
</li>
</ul>
<h5 id="表关系"><a href="#表关系" class="headerlink" title="表关系"></a><strong>表关系</strong></h5><ul>
<li>一对一<ul>
<li>用户和用户</li>
<li>一对一关系多用于表拆分</li>
<li>实现方式：在任意一方建立外键，关联对方主键，并设置外键唯一</li>
</ul>
</li>
<li>一对多（多对一）<ul>
<li>部门 和 员工</li>
<li>一个部门对应多个员工，一个员工对应一个部门</li>
<li>实现方式：在多的一方建立外键关联一的一方主键</li>
</ul>
</li>
<li>多对多<ul>
<li>商品 和 订单</li>
<li>一个商品对应多个订单，一个订单包含多个商品</li>
<li>实现方式：建立第三张中间表，中间表至少包含2个外键，分别关联双方主键</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="1-3-多表查询"><a href="#1-3-多表查询" class="headerlink" title="1.3 多表查询"></a>1.3 多表查询</h5><blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;SELECT * FROM emp,dept;</span><br><span class="line">&gt;-- 笛卡尔积：有A、B两个集合，取A、B所有的组合情况</span><br></pre></td></tr></table></figure>



<p><strong>连接查询：</strong></p>
<ul>
<li>内连接：相当于查询AB交集数据</li>
<li>外连接<ul>
<li>左外连接：相当于查询A表所有数据和交际部分数据</li>
<li>右外连接：相当于查询B表所有数据和交际部分数据</li>
</ul>
</li>
</ul>
<p><strong>子查询：</strong></p>
</blockquote>
<h6 id="1-3-1-连接查询"><a href="#1-3-1-连接查询" class="headerlink" title="1.3.1 连接查询"></a>1.3.1 连接查询</h6><blockquote>
<p>内连接：</p>
<ul>
<li><p>格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 隐式内连接</span><br><span class="line">SELECT 字段列表 FROM 表1,表2… WHERE 条件;</span><br><span class="line"></span><br><span class="line">-- 显示内连接</span><br><span class="line">SELECT 字段列表 FROM 表1 [INNER] JOIN 表2 ON 条件;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>外连接：</p>
<ul>
<li><p>格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 左外连接</span><br><span class="line">SELECT 字段列表 FROM 表1 LEFT [OUTER] JOIN 表2 ON 条件;</span><br><span class="line"></span><br><span class="line">-- 右外连接</span><br><span class="line">SELECT 字段列表 FROM 表1 RIGHT [OUTER] JOIN 表2 ON 条件;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;&#x2F;*</span><br><span class="line"></span><br><span class="line">&gt;-- 连接查询</span><br><span class="line">内连接</span><br><span class="line">外连接</span><br><span class="line">&gt;-- 	子查询</span><br><span class="line"></span><br><span class="line">&gt;*&#x2F;</span><br><span class="line"></span><br><span class="line">&gt;-- 内连接 隐式</span><br><span class="line"></span><br><span class="line">&gt;SELECT * FROM dept,emp WHERE emp.dep_id &#x3D; dept.id;</span><br><span class="line"></span><br><span class="line">&gt;-- 内连接 显式</span><br><span class="line"></span><br><span class="line">&gt;SELECT * FROM emp INNER JOIN dept on emp.dep_id &#x3D; dept.id;</span><br><span class="line"></span><br><span class="line">&gt;-- 外连接  左  查询左边的所有 以及交集</span><br><span class="line">&gt;SELECT *FROM emp LEFT JOIN dept ON emp.dep_id &#x3D; dept.id;</span><br><span class="line"></span><br><span class="line">&gt;-- 外连接  右		查询右边边的所有 以及交集</span><br><span class="line">&gt;SELECT *FROM emp RIGHT JOIN dept ON emp.dep_id &#x3D; dept.id;</span><br></pre></td></tr></table></figure>
</blockquote>
<h6 id="1-3-2-子查询"><a href="#1-3-2-子查询" class="headerlink" title="1.3.2 子查询"></a>1.3.2 子查询</h6><blockquote>
<p>概念： 查询中嵌套查询</p>
<p>根据查询结果不同，作用不同：</p>
<ul>
<li>单行单列 ：作为条件值，使用= != &gt; &lt; 等进行条件判断</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;SELECT 字段列表 FROM 表 WHERE 字段名 &#x3D; (子查询)；</span><br></pre></td></tr></table></figure>

<ul>
<li>多行单列 ：作为条件值，使用in等关键字进行条件判断</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;SELECT 字段列表 FROM 表 WHERE 字段名 in (子查询)；</span><br></pre></td></tr></table></figure>

<ul>
<li>多行多列 ：作为虚拟表</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;SELECT 字段列表 FROM (子查询) WHERE 条件；</span><br></pre></td></tr></table></figure>
</blockquote>
<p>1.4 事务</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2021/10/17/Day02_MySQL%E9%AB%98%E7%BA%A7/" data-id="ckvzyymhy000m60ue5bt753l6"
        class="article-share-link">分享</a>
        
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2020-2021
        ff
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="ONE PEAC"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
      
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>




<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['面朝大海，春暖花开','愿你一生努力，一生被爱','想要的都拥有，得不到的都释怀'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>


<script src="/js/ayer.js"></script>


<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>




<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>